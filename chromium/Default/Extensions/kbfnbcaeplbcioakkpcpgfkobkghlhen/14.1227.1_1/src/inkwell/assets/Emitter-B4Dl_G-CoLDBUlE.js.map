{"version":3,"file":"Emitter-B4Dl_G-CoLDBUlE.js","sources":["../../../util-reactive/dist/Emitter-B4Dl_G.mjs"],"sourcesContent":["import { logger } from '@grammarly/util-logging';\nimport { toObserver } from './Observer-DUozTT.mjs';\n\n/**\n * An emitter can be used to emit events to observers.\n * On disposal, the emitter will emit a completion event to all subscribers\n * and will not accept further subscriptions.\n * @public\n * @deprecated Use Rx.Subject instead\n * @example\n * ```typescript\n * interface Clock {\n *   readonly onTick: Subscribable<number>\n * }\n *\n * class ClockImpl implements Clock {\n *   readonly onTick = new Emitter<number>()\n *\n *   constructor() {\n *     setInterval(() => this.onTick.emit(Date.now()), 1000)\n *   }\n * }\n *\n * const clock = new ClockImpl()\n *\n * const disposable = clock.onTick.subscribe(time => console.log(`${time}ms`))\n * ```\n */\nclass Emitter {\n    #observers = new Set();\n    #closed = false;\n    /** {@inheritdoc} */\n    subscribe(observer) {\n        if (this.#closed) {\n            logger.warn('Cannot subscribe to closed Emitter');\n            return { [Symbol.dispose]: () => { } };\n        }\n        const obs = toObserver(observer);\n        this.#observers.add(obs);\n        return { [Symbol.dispose]: () => this.#observers.delete(obs) };\n    }\n    /**\n     * Emit an event to observers.\n     */\n    emit(event) {\n        this.#observers.forEach(obs => obs.next(event));\n    }\n    /**\n     * Emit complete to all observers.\n     */\n    [Symbol.dispose]() {\n        this.#observers.forEach(obs => obs.complete());\n        this.#observers.clear();\n        this.#closed = true;\n    }\n}\n\nexport { Emitter };\n//# sourceMappingURL=Emitter-B4Dl_G.mjs.map\n"],"names":["Emitter","__privateAdd","_observers","_closed","observer","__privateGet","logger","obs","toObserver","event","__privateSet"],"mappings":"kYA4BA,MAAMA,CAAQ,CAAd,cACIC,EAAA,KAAAC,EAAa,IAAI,KACjBD,EAAA,KAAAE,EAAU,IAEV,UAAUC,EAAU,CAChB,GAAIC,EAAA,KAAKF,GACL,OAAAG,EAAO,KAAK,oCAAoC,EACzC,CAAE,CAAC,OAAO,OAAO,EAAG,IAAM,CAAG,CAAA,EAExC,MAAMC,EAAMC,EAAWJ,CAAQ,EAC/B,OAAAC,EAAA,KAAKH,GAAW,IAAIK,CAAG,EAChB,CAAE,CAAC,OAAO,OAAO,EAAG,IAAMF,EAAA,KAAKH,GAAW,OAAOK,CAAG,EAC9D,CAID,KAAKE,EAAO,CACRJ,EAAA,KAAKH,GAAW,QAAQK,GAAOA,EAAI,KAAKE,CAAK,CAAC,CACjD,CAID,CAAC,OAAO,OAAO,GAAI,CACfJ,EAAA,KAAKH,GAAW,QAAQK,GAAOA,EAAI,SAAQ,CAAE,EAC7CF,EAAA,KAAKH,GAAW,QAChBQ,EAAA,KAAKP,EAAU,GAClB,CACL,CA1BID,EAAA,YACAC,EAAA"}