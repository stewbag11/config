import{a9 as ht,b as x,$ as _,L as U,s as H,e as xt,Q as B}from"./index-D8eA2Snd.js";import{b as R,r as m,m as vt,c as yt,R as O,L as _t}from"./index-BUrsDwB9.js";function G(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t))for(e=0;e<t.length;e++)t[e]&&(n=G(t[e]))&&(r&&(r+=" "),r+=n);else for(e in t)t[e]&&(r&&(r+=" "),r+=e);return r}function q(){for(var t,e,n=0,r="";n<arguments.length;)(t=arguments[n++])&&(e=G(t))&&(r&&(r+=" "),r+=e);return r}function h(t){return t===.5?"half":t===.25?"quarter":"".concat(t)}function z({margin:t,marginLeft:e,marginRight:n,marginTop:r,marginBottom:a}){const o=J(t);return{marginLeft:g(e,o.left),marginRight:g(n,o.right),marginTop:g(r,o.top),marginBottom:g(a,o.bottom)}}function wt({padding:t,paddingLeft:e,paddingRight:n,paddingTop:r,paddingBottom:a}){const o=J(t);return{paddingLeft:g(e,o.left),paddingRight:g(n,o.right),paddingTop:g(r,o.top),paddingBottom:g(a,o.bottom)}}function g(t,e){const n=t!==void 0?t:e;if(n!==void 0){if(typeof n=="string")return n;if(n<0){const r=n*-1;return"calc(var(--space-".concat(h(r),") * -1)")}return"var(--space-".concat(h(n),")")}}function J(t){if(typeof t!="string")return{top:t,right:t,bottom:t,left:t};const e=t.split(" "),n=e[0],r=e[1]||n,a=e[2]||n,o=e[3]||r;return{top:n,right:r,bottom:a,left:o}}const y=R.forwardRef(function(e,n){const{as:r,className:a,variant:o="text-medium",color:s,align:l,weight:c,italic:d,decoration:u,margin:i,marginLeft:V,marginRight:$,marginTop:v,marginBottom:D,style:T,...j}=e,F={...T,...s!=null&&{color:"var(--color-text-".concat(s,")")},...l!=null&&{textAlign:l},...St(c),...d!=null&&{fontStyle:d?"italic":"normal"},...u!=null&&{textDecoration:u},...z({margin:i,marginLeft:V,marginRight:$,marginTop:v,marginBottom:D})};return R.createElement(r,{ref:n,className:q("gds-typography","gds-".concat(o.startsWith("heading")?"heading":"text"),"gds-".concat(o),a),style:F,...j})}),P={bold:"bold",semibold:600,medium:500,normal:"normal"};function St(t){return t!=null&&P[t]?{fontWeight:P[t]}:null}function Ct(t){if(t!==void 0)return/-\d\d?\d?$/.test(t)||t==="white"?"var(--".concat(t,")"):"var(--color-".concat(t,")")}function Et({direction:t,wrap:e,className:n}){return q("gds-flex",t==="column"&&"gds-flex-direction-column",e&&"gds-flex-wrap",n)}const M=R.forwardRef(function(e,n){const{accessibilityLabel:r,align:a,as:o,bgColor:s,borderColor:l,borderRadius:c,children:d,className:u,direction:i="row",flex:V,gap:$=0,height:v,justify:D,margin:T,marginBottom:j,marginLeft:F,marginRight:K,marginTop:Z,padding:tt,paddingBottom:et,paddingLeft:nt,paddingRight:rt,paddingTop:ot,width:I,wrap:st=!1,style:at={},color:A,...it}=e,lt=Et({direction:i,wrap:st,className:u}),ct=typeof I=="number"?"".concat(I,"px"):I,ut=typeof v=="number"?"".concat(v,"px"):v,dt=Ct(s),pt=l!==void 0?"1px solid var(--color-border-".concat(l,")"):void 0,mt=c!==void 0?"var(--radius-".concat(h(c),")"):void 0,ft=A!==void 0?"var(--color-text-".concat(A,")"):void 0,gt={...Rt($),width:ct,height:ut,...z({margin:T,marginLeft:F,marginRight:K,marginTop:Z,marginBottom:j}),...wt({padding:tt,paddingLeft:nt,paddingRight:rt,paddingTop:ot,paddingBottom:et}),backgroundColor:dt,border:pt,borderRadius:mt,alignItems:a,justifyContent:D,flex:V,color:ft,...at},bt=o!=null?o:"div";return R.createElement(bt,{"aria-label":r,ref:n,className:lt,style:gt,...it},d)});function Rt(t){if(t==null)return{};if(typeof t=="number")return{gap:"var(--space-".concat(h(t),")")};const e=t.row==null?"normal":"var(--space-".concat(h(t.row),")"),n=t.column==null?"normal":"var(--space-".concat(h(t.column),")");return{gap:"".concat(e," ").concat(n)}}var Q={exports:{}},k={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var kt=m,Vt=Symbol.for("react.element"),$t=Symbol.for("react.fragment"),Dt=Object.prototype.hasOwnProperty,Tt=kt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,jt={key:!0,ref:!0,__self:!0,__source:!0};function X(t,e,n){var r,a={},o=null,s=null;n!==void 0&&(o=""+n),e.key!==void 0&&(o=""+e.key),e.ref!==void 0&&(s=e.ref);for(r in e)Dt.call(e,r)&&!jt.hasOwnProperty(r)&&(a[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)a[r]===void 0&&(a[r]=e[r]);return{$$typeof:Vt,type:t,key:o,ref:s,props:a,_owner:Tt.current}}k.Fragment=$t;k.jsx=X;k.jsxs=X;Q.exports=k;var p=Q.exports;const Ft=t=>{const[e,n]=m.useState(""),[r,a]=m.useState("base-default");return m.useEffect(()=>{const o=new DisposableStack;return o.use(t.text.subscribe(s=>{typeof s=="string"?n(s):(n(s.text),a(s.color))})),()=>o.dispose()},[n]),p.jsx(y,{as:"span",variant:t.variant,color:r,children:e})},W=({values:t})=>Array.from(ht(t,n=>n.section).entries()).map(([n,r],a)=>p.jsxs(M,{direction:"column",children:[n&&p.jsx(y,{as:"span",variant:"text-xsmall",marginTop:1,weight:"medium",children:n}),r.map((o,s)=>p.jsxs(M,{align:"center",justify:"space-between",direction:"row",gap:1,children:[p.jsx(y,{as:"span",variant:"text-xsmall",children:o.label}),p.jsxs(M,{children:[p.jsx(Ft,{variant:"text-xsmall",text:x(o.source,vt(l=>({text:l==null?"":typeof l=="number"?Number.isInteger(l)?l.toString():l.toFixed(1):o.stringify?o.stringify(l):String(l),color:o.getColorFor?o.getColorFor(l):void 0})))}),o.unit&&p.jsx(y,{as:"span",variant:"text-xsmall",children:o.unit})]})]},s))]},a)),It=({hud:t,style:e})=>{const[n,r]=m.useState(!0),[a,o]=m.useState(!1),[s,l]=m.useState(null),[c,d]=m.useState(new Map);m.useEffect(()=>{const i=new DisposableStack;return i.use(t.enabled.subscribe(o)),i.use(t.activeDocumentId.subscribe(l)),i.use(t.customValues.subscribe(d)),()=>i.dispose()},[]);const u=m.useCallback(()=>r(i=>!i),[r]);return a&&p.jsxs("div",{"data-name":"HUD",title:s!=null?s:void 0,onClick:u,style:{...e,padding:4,backgroundColor:"rgba(255, 255, 255, 0.5)",transform:"scale(0.75)",transformOrigin:"top right",borderRadius:4,backdropFilter:"blur(4px)",border:"1px solid #ccc",boxSizing:"content-box"},children:[p.jsx(y,{as:"strong",variant:"text-xsmall",children:s==null?void 0:s.slice(0,30)}),n&&x(c.get(null),i=>i&&p.jsx(W,{values:i},"root")),n&&x(c.get(s),i=>i&&p.jsx(W,{values:i},"active-document"))]})};var Mt=Object.defineProperty,Y=t=>{throw TypeError(t)},Lt=(t,e,n)=>e in t?Mt(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,L=(t,e,n)=>Lt(t,typeof e!="symbol"?e+"":e,n),Nt=(t,e,n)=>e.has(t)||Y("Cannot "+n),f=(t,e,n)=>(Nt(t,e,"read from private field"),n?n.call(t):e.get(t)),w=(t,e,n)=>e.has(t)?Y("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),N,S,C,b;class E{constructor(){w(this,N,new DisposableStack),w(this,S,new _(!1)),w(this,C,new _(null)),w(this,b,new _(new Map)),L(this,"enabled",f(this,S)),L(this,"activeDocumentId",f(this,C)),L(this,"customValues",f(this,b))}setEnabled(e){f(this,S).setValue(e)}setActiveDocument(e){f(this,C).setValue(e)}createValue(e){var n,r;const a=new _(void 0),o={...e,source:a},s=(n=e.documentId)!=null?n:null,l=[...(r=f(this,b).getValue().get(s))!=null?r:[],o].sort((c,d)=>{var u,i;return((u=c.section)!=null?u:"").localeCompare((i=d.section)!=null?i:"")});return f(this,b).update(c=>new Map(c).set(s,l)),{push:c=>a.setValue(c),[Symbol.dispose]:()=>{var c;const d=((c=f(this,b).getValue().get(s))!=null?c:[]).filter(u=>u!==o);f(this,b).update(u=>{const i=new Map(u);return d.length===0?i.delete(s):i.set(s,d),i})}}}[Symbol.dispose](){f(this,N).dispose()}}N=new WeakMap;S=new WeakMap;C=new WeakMap;b=new WeakMap;const Ot=yt(Symbol("HUD")),Ut=t=>O.all([At(t),Bt(t)]);function At(t){return x(t.getExecutionScope("global"),U(e=>O.all([e.register({token:E,useFactory:()=>{const n=new E;return Reflect.get(globalThis,"HUD")&&n.setEnabled(!0),H(n)}},{lifetime:_t.Singleton}),e.register({token:Ot,useToken:E})])))}function Bt(t){return x(B([t.getExecutionScope("global"),t.getFeature("ui")]),xt(([e,n])=>e.onStart(async r=>x(B([r.resolve(n.provides.MainViewContainer),r.resolve(E)]),U(([a,o])=>O.all([H(a.add(()=>m.createElement(It,{hud:o,style:{display:"inline-block",position:"fixed",top:8,right:8,zIndex:Number.MAX_SAFE_INTEGER}}),{slot:"default"}))]))))))}export{Ot as HUDToken,Ut as activate};
//# sourceMappingURL=index-Cvzwqagn.js.map
