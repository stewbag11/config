(self.webpackChunk=self.webpackChunk||[]).push([[5213],{45345:(e,t,a)=>{a.d(t,{v:()=>T});var i=a(81259),n=a(38684),r=a(90023),o=a(12518),c=a(44949),s=a(17071),l=a(65384),d=a(62958),g=a(87086),p=a(6088),u=a(5614);var m=a(58303),f=a(25770),v=a(73104),h=a(34854),x=a(50978);const C=e=>e.createDocument?e.createDocument:t=>x._A.create((e=>e.getDocumentId?e.getDocumentId:()=>{})(e)(t));var y=a(18845),S=a(35509),I=a(44806);const F={ruleName:"isKnowledgeHubEnabled",match:(e,t)=>"test"===t.experimentClient.getTreatment(i.p.KnowledgeHubAtlassian)},M=".ak-renderer-document",T=(w="Jira",b=e=>({createLayout:()=>new n.A7(e.field),validationRules:[F,{ruleName:"isReadonlyContentField",match:(e,t)=>e.matches(M)}],textMap:{createFieldTextMap:e=>new p.Z(e,((e,t)=>p.Z.defaultFilterNode(e,t)&&(e=>!e.classList.contains("expand-content-wrapper"))(e)))}}),k=M,{kind:I.A.readonly,name:`readonlyContent.${w}`,contentSelector:k,match:e=>{const t=((e,t,a,i)=>{const n=a(e),o=n.target||e.field,c=n.textMap||{createFieldTextMap:p.Z.create},m=(n.createSelectionSource||(()=>(0,g.B)(o)))();return{target:o,initialState:e.state,integrationName:`contentEditable.${t}`,validationRules:[{ruleName:"notABody",match:(0,s.ff)(d.XD)},{ruleName:"isReadonlyContentField",match:(e,t)=>e.matches(i)}],textMap:c,expiration:d.Jj,createSelectionSource:()=>(0,g.B)(o),mapChange:r.yR,...n,selectionSource:m,createTextObserver:()=>new u.j(o,l.k.fromDiff,m,void 0,c.createFieldTextMap)}})(e,w,b,k);return(0,r.zG)((0,y.O)(t.target,e,t.integrationName,t.validationRules),o.map((()=>({targetField:t.target,matchExpires:t.expiration(t.target),execute:e=>{var a;const i=S.Y.decorate((0,r.zG)(((e,t)=>{var a;const i=t.createTextObserver(),n=t.createHighlightsFilterFactory?t.createHighlightsFilterFactory(i):h.u,r=t.createLayout(t.target);return{doc:C(e)(t.target),textField:t.target,domain:e.pageContext.domain,url:e.pageContext.url,layout:r,createCheckingService:t=>e.createCheckingService(t),mapChange:t.mapChange,state:f.h.create(t.initialState),actions:e.actions,fieldSettings:e.fieldSettings,notifications:(0,v.Cq)(e.app.notifications,"ctx.app.notifications"),gnar:e.gnar,productMetricsCSClient:e.productMetricsCSClient,felog:e.felog,config:e.pageContext.config,experimentClient:e.experimentClient,isCurrentFieldFocused:f.h.create(!1),selectionSource:t.selectionSource,textObserver:i,createAlertProcessor:t.createAlertProcessor,createTextRevisionManager:t.createTextRevisionManager,geometryProvider:t.highlightGeometryProvider,customizations:{...t.customizations,getDocEvents:(null===(a=t.customizations)||void 0===a?void 0:a.getDocEvents)||e.getDocEvents,isGbuttonVisible:f.h.create(!1)},highlightsFilterFactory:n,iframeConnectionId:e.iframeConnectionId,eventPropagationHandler:e.eventPropagationHandler,forceIntegrationEntirelyInsideIframe:e.forceIntegrationEntirelyInsideIframe,pageIntegrationId:e.pageContext.id,integrationName:t.integrationName,fieldIntegrationStore:e.pageContext.fieldIntegrationStore,vBarsIntegrationInfo:m.YP}})(e,t),c.kC,r.a9),t.integrationName,t.target);return null===(a=t.onCreate)||void 0===a||a.call(t),{update(e){i.update(e)},dispose(){var e;i.dispose(),null===(e=t.onDispose)||void 0===e||e.call(t)}}},desiredCustomizations:{capiStartSessionOptions:{...e.capiStartSessionOptions,mode:"READ_ONLY"}}}))))}});var w,b,k},44287:(e,t,a)=>{a.r(t),a.d(t,{Jira:()=>n});var i,n,r=a(38684),o=a(75629),c=a(18845),s=a(45345),l=a(37094),d=a(55793),g=a(8748),p=a(90049),u=a(18615),m=a(34859),f=a(58303),v=a(62958),h=a(395),x=a(59898),C=a(91795),y=a(6088);function S(){return h.M.generic((e=>({overwriteGenericOpts:{validationRules:x.u,createLayout:()=>new r.A7(e.field.closest(".ak-editor-content-area, .content-area")||e.field),expiration:e=>{const t=e.closest("body > span > div"),a=t?C.x.observeStyle(t).pipe((0,u.P)((e=>"0"===e.opacity)),(0,m.h)(void 0)):(0,g.c)();return(0,p.T)((0,v.Jj)(e),a)},textMap:{createFieldTextMap:i.createTextMap},getVBarsIntegrationInfo:t=>f.G({kind:"jiraProseMirror",integrationName:t,domain:e.pageContext.domain,isInsideIFrame:!1})}})))}!function(e){e.createTextMap=t=>new y.Z(t,(t=>!e.hasPlaceholder(t))),e.hasPlaceholder=e=>!!e.querySelector(".placeholder-decoration")}(i||(i={})),function(e){const t=S(),a=o.T.textarea("Jira.issuePageDescription",(e=>({validate:(e,t)=>(0,c.O)(e.field,e,t,[{ruleName:"isNearDescriptionWikiEditField",match:e=>!!e.closest("#description-wiki-edit")}]),createLayout:()=>new r.A7(e.field)})));e.page=(0,l.$W)({name:"JIRA-readonly",domain:d.fI},[t,a,o.T.iframe("Jira"),o.T.contentEditable("Jira",(e=>({createLayout:()=>new r.A7(e.field)}))),o.T.textarea("Jira",(e=>({createLayout:()=>new r.A7(e.field)}))),s.v])}(n||(n={}))}}]);