(self.webpackChunk=self.webpackChunk||[]).push([[3896],{70632:(e,t,n)=>{var i=n(98544),a="chrome-extension://__MSG_@@extension_id__/",r="moz-extension://__MSG_@@extension_id__/",o="safari-web-extension://__MSG_@@extension_id__/",l=self.GR_RESOURCE_ROOT||a,d=self.GR_RESOURCE_ROOT||r,s=self.GR_RESOURCE_ROOT||o;e.exports={__css:i.toString().replace(new RegExp(a,"g"),l).replace(new RegExp(r,"g"),d).replace(new RegExp(o,"g"),s),...i.locals}},69001:(e,t,n)=>{n.d(t,{x:()=>r});var i=n(68811),a=n(92562);class r{constructor(){this._flags=new Set,this.actions={openUrl:e=>a.vM((()=>{throw new Error("Not allowed")})),openPopup:e=>a.vM((()=>{throw new Error("Not allowed")}))},this._flags.add(i.a.Flag.supportsSVGDominantBaseline)}has(e){return this._flags.has(e)}}},94270:(e,t,n)=>{n.r(t),n.d(t,{CitationBuilderIntegrationLayout:()=>y,citationButtonPositionToStyle:()=>p});var i=n(49231),a=n(4603),r=n(29095),o=n(74514),l=n(5669),d=n(33874),s=n(34967),c=n(75787),u=n(68811),m=n(18983),g=n(69001);const p=e=>({position:"fixed",[e.horizontalLocation]:c.ux.px(e.offsetX),[e.verticalLocation]:c.ux.px(e.offsetY),zIndex:9999,direction:"ltr","--rem":16});class y{render(e,t,n,c){const y=(0,r.I)(m.m.getConfig((0,a.nD)(n)?"mac":"windows")),h=self.document,f=l.V.get({monitorAs:"citation-builder"}).inject(d.EM.fromDocument(self.document,"grammarly-citation-builder"),d.zs.appendChild(h.documentElement),s.G7.showWhenLoaded(i.createElement((()=>i.createElement("div",{style:p(t.position)},i.createElement(u.a.Context.Provider,{value:new g.x},i.createElement(m.m.Context.Provider,{value:y.denali},i.createElement(i.Suspense,{fallback:i.createElement(i.Fragment,null)},i.createElement(o.L,{chunkName:"citationBuilderIntegration"},i.createElement(e,{viewModel:t,experimentClient:c}))))))),null)));return{dispose:()=>f.dispose()}}}},13925:(e,t,n)=>{n.r(t),n.d(t,{GenerationModel:()=>E});var i=n(21147),a=n(86399),r=n(90023),o=n(39953),l=n(58303),d=n(92562),s=n(12518),c=n(43636),u=n(25770),m=n(31382),g=n(38138),p=n(85683),y=n(97410);const h=e=>new p.com.grammarly.citations.model.input.Author(e.firstName,e.lastName,e.middleName||null,e.suffix||null),f=e=>void 0!==(null==e?void 0:e.year)?new p.com.grammarly.citations.model.input.Date(e.year,e.month,e.day):void 0,S=e=>new p.com.grammarly.citations.model.input.TimeStamp(e.hour,e.minute,e.second),v=(e,t)=>(new p.com.grammarly.citations.generation.CitationGeneratorFactory).getGenerator((e=>{switch(e){case g.Tk.Style.apa:return p.com.grammarly.citations.model.input.CitationFormat.APA;case g.Tk.Style.mla:return p.com.grammarly.citations.model.input.CitationFormat.MLA;case g.Tk.Style.chicago:return p.com.grammarly.citations.model.input.CitationFormat.Chicago}})(e),(e=>{switch(e){case y._.Kind.wikipedia:return p.com.grammarly.citations.model.input.SourceType.Wikipedia;case y._.Kind.journalArticle:return p.com.grammarly.citations.model.input.SourceType.Journal;case y._.Kind.magazineArticle:return p.com.grammarly.citations.model.input.SourceType.Magazine;case y._.Kind.website:return p.com.grammarly.citations.model.input.SourceType.Website;case y._.Kind.book:return p.com.grammarly.citations.model.input.SourceType.Book;case y._.Kind.image:return p.com.grammarly.citations.model.input.SourceType.Image;case y._.Kind.movie:return p.com.grammarly.citations.model.input.SourceType.Movie;case y._.Kind.onlineVideo:return p.com.grammarly.citations.model.input.SourceType.OnlineVideo;case y._.Kind.generativeAi:return p.com.grammarly.citations.model.input.SourceType.GenerativeAI}})(t)),b=e=>({fieldName:void 0===e.fieldName||null===e.fieldName?void 0:e.fieldName,value:e.value,italicize:Boolean(e.italicize),isPlaceholder:e.isPlaceholder}),k=(e,t)=>(0,o.zG)((()=>e.generateFullCitation(t,[])),d.vM,s.map((e=>({result:e.result.map(b),missingOrInvalidKeyFields:e.invalidFields}))));var _=n(70932);const w=i.yv,x=(0,a.jj)(w),C=l.UI(x);var E;!function(e){let t;e.standardGeneratorFactory=(e,t)=>(0,o.zG)((()=>v(e.style,t)),d.vM),e.create=({builderCSState:e,actions:t,dynamicConfig:n,citation:i,detectedSourceType:a,telemetry:v,generatorFactory:w})=>{const E=_.Y.create("CitationBuilder.GenerationModel.create"),K=u.h.create(a),I=K.view(l.fS((()=>y._.defaultKind))),F=u.h.create(g.Tk.parsedToEditingInput(i.get())),T=u.h.create(g.Tk.parsedToEditingInput(i.get())),q=u.h.combine(e,I,w),B=(e,t,n)=>{const i=((e,t)=>{var n,i,a,r;switch(t){case y._.Kind.wikipedia:return new p.com.grammarly.citations.model.input.GenerationInput(null!==(i=null===(n=e[y.S.authors])||void 0===n?void 0:n.map(h))&&void 0!==i?i:null,e[y.S.title],null,(0,o.zG)(e[y.S.published],f),null,null,null,null,null,e[y.S.url],e[y.S.websiteName],(0,o.zG)(e[y.S.retrievalDate],f),null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null);case y._.Kind.generativeAi:return new p.com.grammarly.citations.model.input.GenerationInput(null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,e[y.S.company],e[y.S.productName],e[y.S.modelVersion],e[y.S.modelType],e[y.S.promptText],e[y.S.promptText],e[y.S.promptDescription],null,null);case y._.Kind.journalArticle:default:return new p.com.grammarly.citations.model.input.GenerationInput(null!==(r=null===(a=e[y.S.authors])||void 0===a?void 0:a.map(h))&&void 0!==r?r:null,e[y.S.title],e[y.S.periodicalTitle],(0,o.zG)(e[y.S.published],f),null,e[y.S.volume],e[y.S.issue],e[y.S.doi],void 0!==e[y.S.firstPage]?[new p.com.grammarly.citations.model.input.PagesRange(e[y.S.firstPage],e[y.S.lastPage])]:null,e[y.S.url],null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null)}})(t,I.get()),a=(0,o.zG)(e,s.chain((e=>k(e,i)))),r=(e=>new p.com.grammarly.citations.model.input.GenerationInput(void 0===e.authors||0===e.authors.length?void 0:e.authors.map(h),e.title,e.periodicalTitle,e.publishingDate&&(0,o.zG)(e.publishingDate,f),e.publishingYear,e.volume,e.issue,e.doi,void 0!==e.pagesRange&&e.pagesRange.length>0?e.pagesRange.map((e=>new p.com.grammarly.citations.model.input.PagesRange(e.startPage,e.endPage))):void 0,e.url,e.websiteName,e.accessedDate&&(0,o.zG)(e.accessedDate,f),e.publisher,void 0!==e.translators&&e.translators.length>0?e.translators.map(h):void 0,e.publicationCity,e.edition,void 0!==e.editors&&e.editors.length>0?e.editors.map(h):void 0,e.university,e.dissertationType,e.database,e.publicationNumber,e.lectureType,e.conferenceTitle,e.organization,e.venue,e.city,e.location,void 0!==e.directors&&e.directors.length>0?e.directors.map(h):void 0,e.studio,void 0!==e.actors&&e.actors.length>0?e.actors.map(h):void 0,e.movieLength&&S(e.movieLength),e.username,e.timestamp&&S(e.timestamp),e.bibleVersion,e.bibleBook,e.bibleChapter,null,[],void 0!==e.artists&&e.artists.length>0?e.artists.map(h):void 0,e.imageDescription,e.imageSource,e.imageType,e.company,e.productName,e.modelVersion,e.modelType,e.promptText,e.promptText,e.promptDescription,null,null))(n),c=(0,o.zG)(e,s.chain((e=>k(e,r)))),u=(0,o.zG)(e,s.chain((e=>((e,t)=>(0,o.zG)((()=>e.generateInTextCitation(t,[new p.com.grammarly.citations.model.generation.FieldPlaceholder("inTextPagesCited","[Insert page number]")])),d.vM,s.map((e=>({result:e.result.map(b),missingOrInvalidKeyFields:e.invalidFields})))))(e,r))));return{fullCitation:c,inTextCitation:u,fieldsMissedInParsing:(0,o.zG)(a,s.map((e=>e.missingOrInvalidKeyFields.filter((e=>void 0===n[e])))),l.Uo),currentlyMissingFields:(0,o.zG)(a,s.map((e=>e.missingOrInvalidKeyFields)),s.map((e=>e.filter((e=>void 0===n[e])))),l.Uo),invalidFields:(0,o.zG)(c,s.map((e=>e.missingOrInvalidKeyFields)),s.map((e=>e.filter((e=>void 0!==n[e])))),l.Uo)}},D=u.h.combine(q,i,T,B),G=u.h.combine(q,i,F,B),P=e=>t=>{const i=`Failed to generate citation - ${e}`;return v.citationBuilder.error(e,i,(0,m.ex)(n),t),E.error(i,t),l.YP};return{sourceType:K,setSourceType:e=>{K.set(l.G(e))},setStyle:e=>t.setCitationBuilderStyle(e),style:e.view("style"),parsedCitation:i,inTextCitation:D.view((0,r.ls)((({inTextCitation:e})=>e),s.fold(P("generationIntext"),l.G))),fullCitation:D.view((0,r.ls)((({fullCitation:e})=>e),s.fold(P("generationFull"),l.G))),fieldsMissedInParsing:D.view((0,r.ls)((({fieldsMissedInParsing:e})=>e),C)),editedFullCitation:G.view((0,r.ls)((({fullCitation:e})=>e),s.fold(P("generationFull"),l.G))),isCitationEdited:()=>!c.Xy(T.get(),g.Tk.parsedToEditingInput(i.get())),currentlyMissingFields:D.view((0,r.ls)((({currentlyMissingFields:e})=>e),C)),invalidEditingFields:G.view((0,r.ls)((({invalidFields:e})=>e),C)),requiredKeyFields:q.view((0,r.ls)(s.map((0,r.ls)((e=>e.getRequiredFields()),x)),l.Uo)),secondaryFields:q.view((0,r.ls)(s.map((0,r.ls)((e=>e.getSecondaryFields()),x)),l.Uo)),currentInput:F,committedInput:T,commitInput:()=>T.set(F.get()),cancelInput:()=>F.set(T.get()),regenerateInput:()=>{F.set(g.Tk.parsedToEditingInput(i.get())),T.set(g.Tk.parsedToEditingInput(i.get()))}}},function(e){e.generatedCitationToRtf=function(e){return e.result.reduce(((e,t)=>e+(t.italicize?`<i>${t.value}</i>`:t.value)),"")}}(t=e.Utils||(e.Utils={}))}(E||(E={}))},26492:(e,t,n)=>{n.r(t),n.d(t,{ParsingModel:()=>Ee,toCitationModel:()=>Ke});var i=n(38538),a=n(90023),r=n(58303),o=n(12518),l=n(31382),d=n(38138),s=n(68259),c=n(97410);function u(e,{editing:t},n,i){return a=>{const{required:r,secondary:o}=function(e){switch(e){case c._.Kind.wikipedia:return{required:p,secondary:[]};case c._.Kind.journalArticle:case c._.Kind.magazineArticle:return{required:m,secondary:g};case c._.Kind.book:return{required:y,secondary:h};case c._.Kind.image:return{required:f,secondary:S};case c._.Kind.onlineVideo:return{required:v,secondary:b};case c._.Kind.website:return{required:k,secondary:_};case c._.Kind.movie:return{required:w,secondary:x};case c._.Kind.generativeAi:return{required:C,secondary:E};default:(0,s.vE)(e)}}(e),l=r.filter((e=>void 0===a[e])),d=r.length-l.length,u=o.filter((e=>void 0===a[e])),K=t?d>=n:0===l.length;return 0===l.length&&0===u.length||i(e,{required:l,secondary:u,validationPassed:K}),K}}const m=[c.S.title,c.S.published,c.S.authors,c.S.periodicalTitle],g=[c.S.volume,c.S.issue,c.S.doi,c.S.url,c.S.firstPage,c.S.lastPage,c.S.retrievalDate],p=[c.S.title,c.S.published,c.S.retrievalDate,c.S.url,c.S.authors,c.S.websiteName],y=[c.S.title,c.S.published,c.S.authors,c.S.publisher],h=[c.S.url,c.S.doi,c.S.edition,c.S.translators,c.S.firstPage,c.S.lastPage,c.S.publicationCity,c.S.editors,c.S.volume],f=[c.S.title,c.S.published],S=[c.S.authors,c.S.websiteName,c.S.retrievalDate,c.S.imageSource,c.S.imageType,c.S.url,c.S.publisher,c.S.imageDescription],v=[c.S.username,c.S.published,c.S.url,c.S.title,c.S.websiteName],b=[c.S.authors],k=[c.S.title,c.S.url,c.S.websiteName],_=[c.S.authors,c.S.retrievalDate,c.S.published],w=[c.S.directors,c.S.title],x=[c.S.published,c.S.studio,c.S.actors,c.S.movieLength,c.S.url],C=[c.S.company,c.S.productName,c.S.promptText,c.S.promptDescription],E=[c.S.modelVersion,c.S.modelType];var K=n(95922),I=n(52256),F=n(10765),T=n(59833),q=n(53186),B=n(70932);function D(e={element:()=>r.YP,string:()=>r.YP,object:()=>r.YP}){const t={...{element:()=>r.YP,string:()=>r.YP,object:()=>r.YP},...e};return r.tS((0,a.ls)(T.UI((e=>{return(n=e)instanceof HTMLElement||n instanceof Document?t.element(e):G(e)?t.string(e):t.object(e);var n})),T.hX(r.pC),T.vP(r.g1),r.UI(T.xH),r.hX(T.Od)))}function G(e){return"string"==typeof e||e instanceof String}function P(e){return"object"==typeof e&&!(e instanceof String)}function N(e){return(0,a.zG)(function(e){return t=e,(0,a.zG)(t,r.Gg(T.yW(G)))?(0,a.zG)(e,r.UI(T.UI((e=>e.trim()))),r.hX((e=>e.length>0))):(V.debug("Failed to convert to string array",e),r.YP);var t}(e),r.tS(T.YM))}function M(e){return(0,a.zG)(e,r.hX((e=>"0"!==e)))}function z(e){return(0,a.zG)(e,N,r.tS((0,a.ls)(c._.KindC.decode,r.Uo)))}const A=["d MMMM yyyy","d MMM yyyy","d. MMMM yyyy","yyyy/MM"];function L(e){return(0,a.ls)(N,r.tS((t=>(0,a.zG)(r.G(Date.parse(t)),r.hX((e=>Number.isInteger(e))),I.vx(function(e,t){return(0,a.zG)(A.reduce(((n,i)=>r.pC(n)?n:(0,a.zG)(r.G(F.ou.fromFormat(e,i,{locale:t})),r.hX((e=>e.isValid)))),r.YP),r.UI((e=>e.toMillis())))}(t,e))))),r.UI((e=>function(e){return{year:e.getUTCFullYear(),day:e.getUTCDate(),month:e.getUTCMonth()+1}}(new Date(e)))))}const V=B.Y.create("CitationBuilder.Parser.Utils");function O(e){return V.debug("Converting to Authors array",e),t=e,(0,a.zG)(t,r.Gg((e=>T.yW(P)(e)&&e.length>0)))?(0,a.zG)(e,r.tS((0,a.ls)(T.fw(r.Kw)((0,a.ls)(d.Tk.AuthorT.decode,o.mapLeft((e=>(V.debug("Failed to convert to author",e),e))),r.Uo,r.hX((e=>e.lastName.length>0&&e.firstName.length>0)),r.UI(i.UI((e=>e.trim()))))),r.tS(q.nI)))):r.YP;var t}const R=B.Y.create("CitationBuilder.Parser.CustomFunction"),Y=e=>D({element:t=>(0,a.zG)(t instanceof Element&&e?t.getAttribute(e.attr):null,W(H.Id.attr))}),U=()=>D({element:e=>(0,a.zG)(e.textContent,W(H.Id.textContent))}),j=()=>D({element:e=>{var t;return(0,a.zG)(null===(t=e.firstChild)||void 0===t?void 0:t.textContent,W(H.Id.firstTextContent))}});function W(e){return t=>(0,a.zG)(t,r.ij,r.hX((e=>e.length>0)),I.ew((()=>R.warn("Custom function returned nothing",e))),r.UI((e=>[e])))}var H;!function(e){let t;!function(e){e.attr="attr",e.textContent="textContent",e.firstTextContent="firstTextContent"}(t=e.Id||(e.Id={})),e.repository={[t.attr]:Y,[t.textContent]:U,[t.firstTextContent]:j}}(H||(H={}));const $="(\\p{Lu}\\p{L}{0,}\\.?)\\s?(\\p{Lu}\\p{L}{0,}\\.?)?\\s{1,}(\\p{Lu}\\p{L}{0,}\\.?(?:\\s|-|\\p{Lu}\\p{L}+){0,})",X=`^\\s{0,}((\\p{L}+[\\s]?\\p{L}{0,}),\\s+(\\p{L}+\\.?)\\s{0,}(\\p{L}+\\.?)?)|(${$})$`,Z=`(${$})`,J="(\\d+)[â€“\\-]?(\\d{0,})",Q="^(?:https?:\\/\\/)?(?:[^@\\/]+@)?(?:www\\.)?([^:\\/?]+)",ee=[{kind:c._.Strategy.CombinatorKind.struct,optionalFields:["middleName","suffix"],struct:{lastName:[{kind:c._.Strategy.Kind.regex,regex:X,resultIndexes:[2,8]}],firstName:[{kind:c._.Strategy.Kind.regex,regex:X,resultIndexes:[3,6]}],middleName:[{kind:c._.Strategy.Kind.regex,regex:X,resultIndexes:[4,7]}],suffix:[{kind:c._.Strategy.Kind.const,value:null}]}}],te=[{kind:c._.Strategy.Kind.function,id:H.Id.attr,args:{attr:"content"}},...ee],ne={authors:[{kind:c._.Strategy.Kind.queryAll,query:".author-group  > button, .author-group > a"},{kind:c._.Strategy.CombinatorKind.struct,optionalFields:["middleName","suffix"],struct:{firstName:[{kind:c._.Strategy.Kind.query,query:".given-name"},{kind:c._.Strategy.Kind.function,id:H.Id.textContent},{kind:c._.Strategy.Kind.regex,regex:"^([\\p{L}\\.]+)\\s?",resultIndexes:[1]}],lastName:[{kind:c._.Strategy.Kind.query,query:".surname"},{kind:c._.Strategy.Kind.function,id:H.Id.textContent}],middleName:[{kind:c._.Strategy.Kind.query,query:".given-name"},{kind:c._.Strategy.Kind.function,id:H.Id.textContent},{kind:c._.Strategy.Kind.regex,regex:"\\s(.+)",resultIndexes:[1]}],suffix:[{kind:c._.Strategy.Kind.const,value:null}]}}],periodicalTitle:[{kind:c._.Strategy.CombinatorKind.or,options:[[{kind:c._.Strategy.Kind.query,query:"a.publication-title-link"},{kind:c._.Strategy.Kind.function,id:H.Id.textContent}],[{kind:c._.Strategy.Kind.query,query:'meta[name="citation_journal_title" i]'},{kind:c._.Strategy.Kind.function,id:H.Id.attr,args:{attr:"content"}}],[{kind:c._.Strategy.Kind.query,query:"img.article-branding"},{kind:c._.Strategy.Kind.function,id:H.Id.attr,args:{attr:"alt"}}]]}]},ie={volume:[{kind:c._.Strategy.Kind.query,query:"span.volume"},{kind:c._.Strategy.Kind.function,id:H.Id.textContent}],issue:[{kind:c._.Strategy.Kind.query,query:"span.issue"},{kind:c._.Strategy.Kind.function,id:H.Id.textContent}],firstPage:[{kind:c._.Strategy.Kind.query,query:"span.page"},{kind:c._.Strategy.Kind.function,id:H.Id.textContent},{kind:c._.Strategy.Kind.regex,regex:J,resultIndexes:[1]}],lastPage:[{kind:c._.Strategy.Kind.query,query:"span.page"},{kind:c._.Strategy.Kind.function,id:H.Id.textContent},{kind:c._.Strategy.Kind.regex,regex:J,resultIndexes:[2]}]},ae={authors:[{kind:c._.Strategy.Kind.queryAll,query:"#full-view-heading .authors-list .full-name"},{kind:c._.Strategy.Kind.function,id:H.Id.textContent},...ee],lastPage:[{kind:c._.Strategy.Kind.query,query:"div.fm-citation"},{kind:c._.Strategy.Kind.function,id:H.Id.firstTextContent},{kind:c._.Strategy.Kind.regex,regex:":\\s"+J+"\\.",resultIndexes:[2]}]},re={periodicalTitle:[{kind:c._.Strategy.Kind.const,value:"arXiv"}]},oe={title:[{kind:c._.Strategy.CombinatorKind.or,options:[[{kind:c._.Strategy.Kind.query,query:"turnaway-pharos-heading"}],[{kind:c._.Strategy.Kind.query,query:'[data-qa="item-title"]'}],[{kind:c._.Strategy.Kind.query,query:'[data-qa="book-title"]'}]]},{kind:c._.Strategy.Kind.function,id:H.Id.textContent}],url:[{kind:c._.Strategy.Kind.query,query:"[data-qa=stable-url]"},{kind:c._.Strategy.Kind.function,id:H.Id.textContent}],published:[{kind:c._.Strategy.CombinatorKind.or,options:[[{kind:c._.Strategy.Kind.query,query:".turnaway-content__summary turnaway-pharos-link"},{kind:c._.Strategy.Kind.function,id:H.Id.textContent},{kind:c._.Strategy.Kind.regex,resultIndexes:[1],regex:"\\((.+)\\)"}],[{kind:c._.Strategy.Kind.query,query:"[data-qa=published-date]"},{kind:c._.Strategy.Kind.function,id:H.Id.textContent}],[{kind:c._.Strategy.Kind.query,query:"[data-qa=copyright-date]"},{kind:c._.Strategy.Kind.function,id:H.Id.textContent}],[{kind:c._.Strategy.CombinatorKind.or,options:[[{kind:c._.Strategy.Kind.query,query:'[data-qa="item-src-info"]'}],[{kind:c._.Strategy.Kind.query,query:'[data-qa="book"]'}],[{kind:c._.Strategy.Kind.query,query:".summary-journal"}]]},{kind:c._.Strategy.Kind.function,id:H.Id.textContent},{kind:c._.Strategy.Kind.regex,regex:"\\s(\\d\\d\\d\\d)",resultIndexes:[1]}]]}],volume:[{kind:c._.Strategy.Kind.query,query:'[data-qa="item-src-info"]'},{kind:c._.Strategy.Kind.function,id:H.Id.textContent},{kind:c._.Strategy.Kind.regex,resultIndexes:[1],regex:"Vol\\.\\s+(\\d+)"}],issue:[{kind:c._.Strategy.Kind.query,query:'[data-qa="item-src-info"]'},{kind:c._.Strategy.Kind.function,id:H.Id.textContent},{kind:c._.Strategy.Kind.regex,resultIndexes:[1],regex:"No\\.\\s+(\\d+)"}],firstPage:[{kind:c._.Strategy.CombinatorKind.or,options:[[{kind:c._.Strategy.Kind.query,query:'[data-qa="item-src-info"]'},{kind:c._.Strategy.Kind.function,id:H.Id.textContent},{kind:c._.Strategy.Kind.regex,resultIndexes:[1,2],regex:"(?:\\sp\\.\\s+(\\d+)|\\spp\\.\\s+(\\d+))"}],[{kind:c._.Strategy.Kind.query,query:".summary-journal"},{kind:c._.Strategy.Kind.function,id:H.Id.textContent},{kind:c._.Strategy.Kind.regex,resultIndexes:[1,2],regex:"(?:\\sp\\.\\s+(\\d+)|\\spp\\.\\s+(\\d+))"}]]}],lastPage:[{kind:c._.Strategy.Kind.query,query:'[data-qa="item-src-info"]'},{kind:c._.Strategy.Kind.function,id:H.Id.textContent},{kind:c._.Strategy.Kind.regex,resultIndexes:[1],regex:"pp\\.\\s+\\d+[\\-\\-](\\d+)"}],periodicalTitle:[{kind:c._.Strategy.CombinatorKind.or,options:[[{kind:c._.Strategy.Kind.query,query:"[data-qa=journal] cite"},{kind:c._.Strategy.Kind.function,id:H.Id.textContent}],[{kind:c._.Strategy.Kind.query,query:"div.summary-journal > div"},{kind:c._.Strategy.Kind.function,id:H.Id.textContent}]]}],doi:[{kind:c._.Strategy.CombinatorKind.or,options:[[{kind:c._.Strategy.Kind.query,query:"[data-doi]"},{kind:c._.Strategy.Kind.function,id:H.Id.attr,args:{attr:"data-doi"}}],[{kind:c._.Strategy.Kind.query,query:"[data-qa=crossref-doi]"},{kind:c._.Strategy.Kind.function,id:H.Id.textContent}]]}],authors:[{kind:c._.Strategy.CombinatorKind.or,options:[[{kind:c._.Strategy.CombinatorKind.or,options:[[{kind:c._.Strategy.Kind.query,query:".content-meta-data__authors"}],[{kind:c._.Strategy.Kind.queryAll,query:"[data-qa=item-authors]"}]]},{kind:c._.Strategy.Kind.function,id:H.Id.textContent},{kind:c._.Strategy.Kind.regex,regex:Z,flags:["g"]},{kind:c._.Strategy.CombinatorKind.struct,optionalFields:["middleName","suffix"],struct:{lastName:[{kind:c._.Strategy.Kind.regex,regex:$,resultIndexes:[3]}],firstName:[{kind:c._.Strategy.Kind.regex,regex:$,resultIndexes:[1]}],middleName:[{kind:c._.Strategy.Kind.regex,regex:$,resultIndexes:[2]}],suffix:[{kind:c._.Strategy.Kind.const,value:null}]}}],[{kind:c._.Strategy.Kind.query,query:".contrib-type-author"},{kind:c._.Strategy.Kind.function,id:H.Id.textContent},...ee]]}],publisher:[{kind:c._.Strategy.CombinatorKind.or,options:[[{kind:c._.Strategy.Kind.query,query:"[data-qa=publisher] a"},{kind:c._.Strategy.Kind.function,id:H.Id.textContent}]]}]},le={title:[{kind:c._.Strategy.Kind.query,query:"h1#firstHeading"},{kind:c._.Strategy.Kind.function,id:H.Id.firstTextContent}],websiteName:[{kind:c._.Strategy.Kind.const,value:"Wikipedia"}],authors:[{kind:c._.Strategy.Kind.const,value:"no author, a dummy value to prevent using generic rules"}],published:[{kind:c._.Strategy.CombinatorKind.or,options:[[{kind:c._.Strategy.Kind.query,query:"body script[type='application/ld+json' i]"},{kind:c._.Strategy.Kind.function,id:H.Id.textContent},{kind:c._.Strategy.Kind.regex,regex:'dateModified":"([^"]+)"',resultIndexes:[1]}],[{kind:c._.Strategy.Kind.query,query:"#footer-info-lastmod"},{kind:c._.Strategy.Kind.function,id:H.Id.textContent},{kind:c._.Strategy.Kind.regex,regex:"(\\d{1,2}\\.?\\s\\p{L}+\\s\\d{4,4})",resultIndexes:[1]}]]}],url:[{kind:c._.Strategy.Kind.query,query:'[rel="canonical" i]'},{kind:c._.Strategy.Kind.function,id:H.Id.attr,args:{attr:"href"}}],retrievalDate:[{kind:c._.Strategy.Kind.currDate}]},de={company:[{kind:c._.Strategy.Kind.const,value:"OpenAI"}],productName:[{kind:c._.Strategy.Kind.const,value:"ChatGPT"}],promptText:[{kind:c._.Strategy.CombinatorKind.or,options:[[{kind:c._.Strategy.Kind.queryLast,query:'div[data-message-author-role="user"] > div'},{kind:c._.Strategy.Kind.function,id:H.Id.textContent}],[{kind:c._.Strategy.Kind.queryLast,query:"div.group.dark\\:bg-gray-800 div.empty\\:hidden"},{kind:c._.Strategy.Kind.function,id:H.Id.textContent}]]}],modelVersion:[{kind:c._.Strategy.Kind.query,query:'div[aria-haspopup="menu"] span.text-token-text-secondary'},{kind:c._.Strategy.Kind.function,id:H.Id.textContent}],modelType:[{kind:c._.Strategy.Kind.const,value:"Large language model"}]},se={company:[{kind:c._.Strategy.Kind.const,value:"Microsoft"}],productName:[{kind:c._.Strategy.Kind.const,value:"Bing"}],modelType:[{kind:c._.Strategy.Kind.const,value:"Large language model"}]},ce={periodicalTitle:[{kind:c._.Strategy.Kind.query,query:'.citation a[href^="/journal"]'},{kind:c._.Strategy.Kind.function,id:H.Id.textContent}],published:[{kind:c._.Strategy.Kind.queryLast,query:".citation span.citation__top__item"},{kind:c._.Strategy.Kind.function,id:H.Id.textContent}]};function ue(e){return{"sciencedirect.com":ne,"sagepub.com":ie,"nih.gov":ae,"arxiv.org":re,"jstor.org":oe,"wikipedia.org":le,"chatgpt.com":de,"bing.com":se,"asha.org":ce}[e]||{}}const me={kind:c._.Strategy.Kind.function,id:H.Id.attr,args:{attr:"content"}},ge={authors:[{kind:c._.Strategy.CombinatorKind.or,options:[[{kind:c._.Strategy.Kind.queryAll,query:'meta[name="citation_author" i]'}],[{kind:c._.Strategy.Kind.queryAll,query:'meta[name="dc.Creator" i]'}],[{kind:c._.Strategy.Kind.queryAll,query:'meta[property="og:article:author" i]'}],[{kind:c._.Strategy.Kind.queryAll,query:'meta[property="og:book:author" i]'}],[{kind:c._.Strategy.Kind.queryAll,query:'meta[name="twitter:creator" i]'}]]},...te],published:[{kind:c._.Strategy.CombinatorKind.or,options:[[{kind:c._.Strategy.Kind.query,query:'meta[name="citation_publication_date" i]'}],[{kind:c._.Strategy.Kind.query,query:'meta[name="citation_date" i]'}],[{kind:c._.Strategy.Kind.query,query:'meta[name="dc.Issued" i]'}],[{kind:c._.Strategy.Kind.query,query:'meta[name="dc.Date" i]'}],[{kind:c._.Strategy.Kind.query,query:'meta[property="og:article:published_time" i]'}],[{kind:c._.Strategy.Kind.query,query:'meta[property="og:book:release_date" i]'}],[{kind:c._.Strategy.Kind.query,query:'meta[property="og:video:release_date" i]'}]]},me],title:[{kind:c._.Strategy.CombinatorKind.or,options:[[{kind:c._.Strategy.CombinatorKind.or,options:[[{kind:c._.Strategy.Kind.query,query:'meta[name="citation_title" i]'}],[{kind:c._.Strategy.Kind.query,query:'meta[name="dc.Title" i]'}],[{kind:c._.Strategy.Kind.query,query:'meta[property="og:title" i]'}],[{kind:c._.Strategy.Kind.query,query:'meta[name="twitter:title" i]'}]]},me],[{kind:c._.Strategy.Kind.query,query:"title"},{kind:c._.Strategy.Kind.function,id:H.Id.textContent}]]}],periodicalTitle:[{kind:c._.Strategy.CombinatorKind.or,options:[[{kind:c._.Strategy.Kind.query,query:'meta[name="citation_journal_title" i]'}],[{kind:c._.Strategy.Kind.query,query:'meta[name="citation_inbook_title" i]'}],[{kind:c._.Strategy.Kind.query,query:'meta[name="dc.Relation.Ispartof" i]'}]]},me],volume:[{kind:c._.Strategy.CombinatorKind.or,options:[[{kind:c._.Strategy.Kind.query,query:'meta[name="citation_volume" i]'}],[{kind:c._.Strategy.Kind.query,query:'meta[name="dc.Citation.Volume" i]'}]]},me],issue:[{kind:c._.Strategy.CombinatorKind.or,options:[[{kind:c._.Strategy.Kind.query,query:'meta[name="citation_issue" i]'}],[{kind:c._.Strategy.Kind.query,query:'meta[name="dc.Citation.Issue" i]'}]]},me],firstPage:[{kind:c._.Strategy.CombinatorKind.or,options:[[{kind:c._.Strategy.Kind.query,query:'meta[name="citation_firstpage" i]'}],[{kind:c._.Strategy.Kind.query,query:'meta[name="dc.Citation.Spage" i]'}]]},me],lastPage:[{kind:c._.Strategy.CombinatorKind.or,options:[[{kind:c._.Strategy.Kind.query,query:'meta[name="citation_lastpage" i]'}],[{kind:c._.Strategy.Kind.query,query:'meta[name="dc.Citation.Epage" i]'}]]},me],doi:[{kind:c._.Strategy.CombinatorKind.or,options:[[{kind:c._.Strategy.Kind.query,query:'meta[name="citation_doi" i]'}],[{kind:c._.Strategy.Kind.query,query:'meta[name="dc.Identifier" i]'}],[{kind:c._.Strategy.Kind.query,query:'meta[name="dc.Source" i]'}]]},me],url:[{kind:c._.Strategy.CombinatorKind.or,options:[[{kind:c._.Strategy.Kind.query,query:'meta[name="citation_public_url" i]'},me],[{kind:c._.Strategy.Kind.query,query:'[rel="canonical" i]'},{kind:c._.Strategy.Kind.function,id:H.Id.attr,args:{attr:"href"}}],[{kind:c._.Strategy.Kind.query,query:'meta[property="og:url" i]'},me],[{kind:c._.Strategy.Kind.query,query:'meta[name="twitter:url" i]'},me],[{kind:c._.Strategy.Kind.url}]]}],retrievalDate:[{kind:c._.Strategy.Kind.currDate}],websiteName:[{kind:c._.Strategy.CombinatorKind.or,options:[[{kind:c._.Strategy.Kind.query,query:'meta[property="og:site_name" i]'},me],[{kind:c._.Strategy.Kind.url},{kind:c._.Strategy.Kind.regex,regex:Q,resultIndexes:[1]}]]}],publisher:[{kind:c._.Strategy.CombinatorKind.or,options:[[{kind:c._.Strategy.Kind.query,query:'meta[name="dc.publisher" i]'}],[{kind:c._.Strategy.Kind.query,query:'meta[name="citation_publisher" i]'}],[{kind:c._.Strategy.Kind.query,query:'meta[name="citation_technical_report_institution" i]'}],[{kind:c._.Strategy.Kind.query,query:'meta[name="citation_dissertation_institution" i]'}]]},me],translators:[],publicationCity:[],edition:[],editors:[],imageDescription:[{kind:c._.Strategy.CombinatorKind.or,options:[[{kind:c._.Strategy.Kind.query,query:'meta[name="dc.description" i]'}],[{kind:c._.Strategy.Kind.query,query:'meta[property="og:description" i]'}],[{kind:c._.Strategy.Kind.query,query:'meta[name="twitter:description" i]'}]]},me],imageSource:[{kind:c._.Strategy.Kind.query,query:'meta[property="og:site_name" i]'},me],imageType:[{kind:c._.Strategy.Kind.const,value:"Photograph"}],username:[{kind:c._.Strategy.Kind.query,query:'meta[property="og:profile:username" i]'},me],timestamp:[],directors:[{kind:c._.Strategy.CombinatorKind.or,options:[[{kind:c._.Strategy.Kind.queryAll,query:'meta[property="og:video:director" i]'}],[{kind:c._.Strategy.Kind.queryAll,query:'meta[name="dc.Creator" i]'}],[{kind:c._.Strategy.Kind.queryAll,query:'meta[name="twitter:creator" i]'}]]},...te],studio:[],actors:[{kind:c._.Strategy.Kind.queryAll,query:'meta[property="og:video:actor" i]'},...te],movieLength:[{kind:c._.Strategy.Kind.query,query:'meta[property="og:video:duration" i]'},me],company:[],productName:[],modelVersion:[],modelType:[],promptText:[],promptDescription:[{kind:c._.Strategy.Kind.const,value:"prompt"}]};function pe(e){return(0,a.zG)(e,ue,(t=ge,e=>(0,a.zG)(t,i.Su(((t,n)=>{const i=e[t];return null==i?n:n.length>0?[{kind:c._.Strategy.CombinatorKind.or,options:[i,n]}]:i})))));var t}var ye,he=n(18117);!function(e){e.onQuery=function(e){return t=>(0,a.zG)(t,D({element:t=>(0,a.zG)(r.Y3((()=>{if(e.kind===c._.Strategy.Kind.queryAll)return Array.from(t.querySelectorAll(e.query));if(e.kind===c._.Strategy.Kind.query){const n=t.querySelector(e.query);return n?[n]:[]}if(e.kind===c._.Strategy.Kind.queryLast){const n=t.querySelectorAll(e.query);return n&&n.length>0?[n[n.length-1]]:[]}(0,s.L0)(e)})),r.hX(T.Od))}))},e.onStruct=function(e,t){const n=n=>(0,a.zG)(Object.keys(e.struct),(i=>{const o={};return i.forEach((i=>{var l;const d=e.struct[i];if(null!==d){const s=(0,a.zG)(r.G([n]),fe(t)(d),r.tS(T.YM));!(0,r.pC)(s)&&(null===(l=e.optionalFields)||void 0===l?void 0:l.includes(i))||(o[i]=s)}})),o}),(0,he.Yt)(r.Kw),r.UI((e=>[e])));return D({element:n,string:n,object:n})},e.onOr=function(e,t){return n=>e.options.reduce(((e,i)=>r.pC(e)?e:(0,a.zG)(n,fe(t)(i),r.hX(T.Od))),r.YP)},e.onRegex=function(e){const t=e.resultIndexes;return D({string:(0,a.ls)((t=>t.match(new RegExp(e.regex,e.flags?"u"+e.flags.join(""):"u"))),r.ij,r.UI((e=>Array.from(e).filter(((e,n)=>(!t||t.includes(n))&&"string"==typeof e&&e.length>0)))),r.UI(e.mapResultsTo?t=>t.map(((t,n)=>{var i;return null!==(i=e.mapResultsTo[n])&&void 0!==i?i:t})):a.yR),r.tS(q.nI))})},e.onConst=function(e){return()=>(0,a.zG)(e.value,r.ij,r.UI((e=>[e])))},e.onPageUrl=function(){return()=>r.G(q.of(document.location.href))},e.onCurrDate=function(e){return()=>r.G(q.of(e.mockDate?e.mockDate:(new Date).toString()))},e.onCustomFunction=function(e){return t=>{switch(e.id){case H.Id.textContent:return H.repository.textContent({})(t);case H.Id.firstTextContent:return H.repository.firstTextContent({})(t);case H.Id.attr:return H.repository.attr(e.args)(t)}}}}(ye||(ye={}));const fe=e=>t=>n=>{const i=(e=>(t,n)=>{switch(n.kind){case c._.Strategy.Kind.query:case c._.Strategy.Kind.queryAll:case c._.Strategy.Kind.queryLast:return ye.onQuery(n)(t);case c._.Strategy.Kind.function:return ye.onCustomFunction(n)(t);case c._.Strategy.CombinatorKind.struct:return ye.onStruct(n,e)(t);case c._.Strategy.CombinatorKind.or:return ye.onOr(n,e)(t);case c._.Strategy.Kind.regex:return ye.onRegex(n)(t);case c._.Strategy.Kind.const:return ye.onConst(n)(t);case c._.Strategy.Kind.currDate:return ye.onCurrDate(e)(t);case c._.Strategy.Kind.url:return ye.onPageUrl()(t)}})(e);return(0,a.zG)(t,T.u4(n,i))};class Se{constructor(e,t,n,i,a){this._domain=e,this._sourceType=t,this._locale=n,this._params=a,this._document=r.G([i]),this._run=fe(this._params),this._updateParsingConfig(this._sourceType,this._domain)}updateSourceType(){}_updateParsingConfig(e,t){this._config=(0,a.zG)(pe(t),(e=>function(e,t){return e}(e)))}}class ve extends Se{get data(){return{[c.S.authors]:()=>(0,a.zG)(this._document,this._run(this._config.authors),O),[c.S.published]:()=>(0,a.zG)(this._document,this._run(this._config.published),L(this._locale)),[c.S.title]:()=>(0,a.zG)(this._document,this._run(this._config.title),N),[c.S.periodicalTitle]:()=>(0,a.zG)(this._document,this._run(this._config.periodicalTitle),N),[c.S.retrievalDate]:()=>(0,a.zG)(this._document,this._run(this._config.retrievalDate),L(this._locale)),[c.S.volume]:()=>(0,a.zG)(this._document,this._run(this._config.volume),N,M),[c.S.issue]:()=>(0,a.zG)(this._document,this._run(this._config.issue),N,M),[c.S.doi]:()=>(0,a.zG)(this._document,this._run(this._config.doi),N),[c.S.url]:()=>(0,a.zG)(this._document,this._run(this._config.url),N),[c.S.firstPage]:()=>(0,a.zG)(this._document,this._run(this._config.firstPage),N),[c.S.lastPage]:()=>(0,a.zG)(this._document,this._run(this._config.lastPage),N),[c.S.websiteName]:()=>(0,a.zG)(this._document,this._run(this._config.websiteName),N),[c.S.publisher]:()=>(0,a.zG)(this._document,this._run(this._config.publisher),N),[c.S.edition]:()=>(0,a.zG)(this._document,this._run(this._config.edition),N,M),[c.S.translators]:()=>(0,a.zG)(this._document,this._run(this._config.translators),O),[c.S.editors]:()=>(0,a.zG)(this._document,this._run(this._config.editors),O),[c.S.publicationCity]:()=>(0,a.zG)(this._document,this._run(this._config.publicationCity),N),[c.S.username]:()=>(0,a.zG)(this._document,this._run(this._config.username),N),[c.S.timestamp]:()=>r.YP,[c.S.imageSource]:()=>(0,a.zG)(this._document,this._run(this._config.imageSource),N),[c.S.imageDescription]:()=>(0,a.zG)(this._document,this._run(this._config.imageDescription),N),[c.S.imageType]:()=>(0,a.zG)(this._document,this._run(this._config.imageType),N),[c.S.company]:()=>(0,a.zG)(this._document,this._run(this._config.company),N),[c.S.productName]:()=>(0,a.zG)(this._document,this._run(this._config.productName),N),[c.S.modelVersion]:()=>(0,a.zG)(this._document,this._run(this._config.modelVersion),N),[c.S.modelType]:()=>(0,a.zG)(this._document,this._run(this._config.modelType),N),[c.S.promptText]:()=>(0,a.zG)(this._document,this._run(this._config.promptText),N),[c.S.promptDescription]:()=>(0,a.zG)(this._document,this._run(this._config.promptDescription),N)}}}class be extends Se{get data(){return{title:K.of(r.YP),authors:K.of(r.YP),published:K.of(r.YP),retrievalDate:K.of(r.YP),url:K.of(r.YP),websiteName:K.of(r.YP),periodicalTitle:K.of(r.YP),issue:K.of(r.YP),volume:K.of(r.YP),firstPage:K.of(r.YP),lastPage:K.of(r.YP),doi:K.of(r.YP),editors:K.of(r.YP),translators:K.of(r.YP),edition:K.of(r.YP),publisher:K.of(r.YP),publicationCity:K.of(r.YP),username:K.of(r.YP),timestamp:K.of(r.YP),imageSource:K.of(r.YP),imageDescription:K.of(r.YP),imageType:K.of(r.YP),company:K.of(r.YP),productName:K.of(r.YP),modelVersion:K.of(r.YP),modelType:K.of(r.YP),promptText:K.of(r.YP),promptDescription:K.of(r.YP)}}}var ke;!function(e){e.create=function(e,t,n,i,a){return"grammarlyaws.com"===i?new be(i,t,n,e,a.params):new ve(i,t,n,e,a.params)}}(ke||(ke={}));const _e={kind:c._.Strategy.CombinatorKind.or,options:[[{kind:c._.Strategy.Kind.regex,regex:"(article|report|journal|magazine|paper)",resultIndexes:[1],mapResultsTo:[c._.Kind.journalArticle],flags:["i"]}],[{kind:c._.Strategy.Kind.regex,regex:"(image|picture|figure)",resultIndexes:[1],mapResultsTo:[c._.Kind.image],flags:["i"]}],[{kind:c._.Strategy.Kind.regex,regex:"(book)",resultIndexes:[1],mapResultsTo:[c._.Kind.book],flags:["i"]}],[{kind:c._.Strategy.Kind.regex,regex:"(movie|film)",resultIndexes:[1],mapResultsTo:[c._.Kind.movie],flags:["i"]}],[{kind:c._.Strategy.Kind.regex,regex:"(video|player)",resultIndexes:[1],mapResultsTo:[c._.Kind.onlineVideo],flags:["i"]}],[{kind:c._.Strategy.Kind.regex,regex:"(website)",resultIndexes:[1],mapResultsTo:[c._.Kind.website],flags:["i"]}]]};function we(e){return[{kind:c._.Strategy.Kind.function,id:H.Id.attr,args:{attr:e}},_e]}const xe={locale:[{kind:c._.Strategy.Kind.query,query:"html[lang]"},{kind:c._.Strategy.Kind.function,id:H.Id.attr,args:{attr:"lang"}}],sourceType:[{kind:c._.Strategy.CombinatorKind.or,options:[[{kind:c._.Strategy.Kind.url},{kind:c._.Strategy.Kind.regex,regex:Q,resultIndexes:[1]},{kind:c._.Strategy.CombinatorKind.or,options:[[{kind:c._.Strategy.Kind.regex,regex:"(wikipedia\\.org)$",resultIndexes:[1],mapResultsTo:[c._.Kind.wikipedia]}],[{kind:c._.Strategy.Kind.regex,regex:"(springeropen\\.com)$",resultIndexes:[1],mapResultsTo:[c._.Kind.journalArticle]}],[{kind:c._.Strategy.Kind.regex,regex:"(journals\\.plos\\.org)$",resultIndexes:[1],mapResultsTo:[c._.Kind.journalArticle]}],[{kind:c._.Strategy.Kind.regex,regex:"(sciencedirect\\.com)$",resultIndexes:[1],mapResultsTo:[c._.Kind.journalArticle]}],[{kind:c._.Strategy.Kind.regex,regex:"(journals\\.sagepub\\.com)$",resultIndexes:[1],mapResultsTo:[c._.Kind.journalArticle]}],[{kind:c._.Strategy.Kind.regex,regex:"(ncbi\\.nlm\\.nih\\.gov)$",resultIndexes:[1],mapResultsTo:[c._.Kind.journalArticle]}],[{kind:c._.Strategy.Kind.regex,regex:"(doaj\\.org)$",resultIndexes:[1],mapResultsTo:[c._.Kind.journalArticle]}],[{kind:c._.Strategy.Kind.regex,regex:"(arxiv\\.org)$",resultIndexes:[1],mapResultsTo:[c._.Kind.journalArticle]}],[{kind:c._.Strategy.Kind.regex,regex:"(frontiersin\\.org)$",resultIndexes:[1],mapResultsTo:[c._.Kind.journalArticle]}],[{kind:c._.Strategy.Kind.regex,regex:"(jstor\\.org)$",resultIndexes:[1],mapResultsTo:[c._.Kind.journalArticle]}],[{kind:c._.Strategy.Kind.regex,regex:"(onlinelibrary\\.wiley\\.com)$",resultIndexes:[1],mapResultsTo:[c._.Kind.journalArticle]}],[{kind:c._.Strategy.Kind.regex,regex:"(journals\\.physiology\\.org)$",resultIndexes:[1],mapResultsTo:[c._.Kind.journalArticle]}],[{kind:c._.Strategy.Kind.regex,regex:"(science\\.org)$",resultIndexes:[1],mapResultsTo:[c._.Kind.journalArticle]}],[{kind:c._.Strategy.Kind.regex,regex:"(nature\\.com)$",resultIndexes:[1],mapResultsTo:[c._.Kind.journalArticle]}],[{kind:c._.Strategy.Kind.regex,regex:"(pnas\\.org)$",resultIndexes:[1],mapResultsTo:[c._.Kind.journalArticle]}],[{kind:c._.Strategy.Kind.regex,regex:"(annualreviews\\.org)$",resultIndexes:[1],mapResultsTo:[c._.Kind.journalArticle]}],[{kind:c._.Strategy.Kind.regex,regex:"(pubs\\.asha\\.org)$",resultIndexes:[1],mapResultsTo:[c._.Kind.journalArticle]}],[{kind:c._.Strategy.Kind.regex,regex:"(academic\\.oup\\.com)$",resultIndexes:[1],mapResultsTo:[c._.Kind.journalArticle]}],[{kind:c._.Strategy.Kind.regex,regex:"(mdpi\\.com)$",resultIndexes:[1],mapResultsTo:[c._.Kind.journalArticle]}],[{kind:c._.Strategy.Kind.regex,regex:"(muse\\.jhu\\.edu)$",resultIndexes:[1],mapResultsTo:[c._.Kind.journalArticle]}],[{kind:c._.Strategy.Kind.regex,regex:"(online\\.ucpress\\.edu)$",resultIndexes:[1],mapResultsTo:[c._.Kind.journalArticle]}],[{kind:c._.Strategy.Kind.regex,regex:"(journals\\.uchicago\\.edu)$",resultIndexes:[1],mapResultsTo:[c._.Kind.journalArticle]}],[{kind:c._.Strategy.Kind.regex,regex:"(chatgpt\\.com)$",resultIndexes:[1],mapResultsTo:[c._.Kind.generativeAi]}],[{kind:c._.Strategy.Kind.regex,regex:"(bing\\.com)$",resultIndexes:[1],mapResultsTo:[c._.Kind.generativeAi]}]]}],[{kind:c._.Strategy.CombinatorKind.or,options:[[{kind:c._.Strategy.Kind.query,query:'meta[name="dc.type" i]'},...we("content")],[{kind:c._.Strategy.Kind.query,query:'meta[property="og:type" i]'},...we("content")]]}],[{kind:c._.Strategy.CombinatorKind.or,options:[[{kind:c._.Strategy.Kind.query,query:'meta[property^="og:book" i]'}],[{kind:c._.Strategy.Kind.query,query:'meta[property^="og:video" i]'}],[{kind:c._.Strategy.Kind.query,query:'meta[property^="og:article" i]'}],[{kind:c._.Strategy.Kind.query,query:'meta[property^="og:image:" i]'}]]},...we("property")],[{kind:c._.Strategy.CombinatorKind.or,options:[[{kind:c._.Strategy.Kind.query,query:'meta[name^="twitter:player" i]'}],[{kind:c._.Strategy.Kind.query,query:'meta[name^="twitter:image:" i]'}]]},...we("name")]]}]},Ce=fe({});var Ee;function Ke(e,t,n,r,s,c,m,g){return p=>{const y=B.Y.create("CitationBuilder.ParsingModel");return(0,a.zG)(p,(0,i.UI)((e=>e())),(e=>(y.debug(`Parsed fields ${JSON.stringify(e)}`),e)),i.IM.compact,o.fromPredicate((0,a.ls)(u(e,r,m,((e,{required:t,secondary:n,validationPassed:i})=>{g.citationBuilder.info("missingFields","Missing fields found",{...(0,l.ex)(s.dynamicConfig),sourceType:e,missingFields:{required:t,secondary:n,validationPassed:i}}),y.debug("Missing fields found",{required:t,secondary:n,validationPassed:i})})),n?a.W8:a.yR),(()=>new d.Op("Could not parse data",{domain:t,url:c}))))}}!function(e){e.create=function(e,t,n,i,o){const d=function(e){return(0,a.zG)(r.G([e]),Ce(xe.sourceType),z)}(t),s=(0,a.zG)(d,r.fS((()=>c._.defaultKind))),u=(0,a.zG)(function(e){return(0,a.zG)(r.G([e]),Ce(xe.locale),N)}(t),r.fS((()=>c._.defaultLocale))),m=(0,a.zG)((0,l.xq)(t.location.href),r.fS((()=>"badDomain"))),g=(0,l.FU)(t.location.hostname,n.dynamicConfig),p=g?1:2;return{parse:()=>(0,a.zG)(ke.create(t,s,u,m,i),(t=>{const r=(0,l.OY)(i,n.page);return(0,a.zG)(t.data,Ke(s,m,r,i,n,e,p,o))})),sourceType:d,shouldReparseOnWindowOpen:g}}}(Ee||(Ee={}))},44918:(e,t,n)=>{n.r(t),n.d(t,{createCitationBuilderViewModel:()=>K});var i=n(90023),a=n(90731),r=n(58303),o=n(43636),l=n(25770),d=n(31382),s=n(73964),c=n(39756);const u={priority:s.P.Priority.low,timeout:s.P.DefaultTimeout,position:s.P.Position.bottomLeft,viewType:s.P.ViewType.standard};var m;!function(e){e.createFactory=function(){return{citationCopied:c.r.createBuilder().build(u),turnedOff:c.r.createBuilder().build(u),intextCopied:c.r.createBuilder().build(u),feedbackSubmitted:c.r.createBuilder().build(u)}}}(m||(m={}));const g=e=>e.result.reduce(((e,t)=>t.fieldName?e.add(t.fieldName):e),new Set).size;var p=n(37246);const y={type:p.D.ViewType.Default,elements:{backButton:!1,styleSelector:!0,feedbackIcon:!0}};var h=n(39953),f=n(52256),S=n(13925),v=n(97410);function b(e){var t,n;if(self.navigator&&self.navigator.clipboard&&self.navigator.clipboard.write){const t=new Blob([e],{type:"text/html"}),n=new Blob([e.replace(/<\/?\w+>/gm,"")],{type:"text/plain"}),i=new ClipboardItem({"text/html":t,"text/plain":n});navigator.clipboard.write([i])}else{const i=document.createElement("div");i.innerHTML=e,i.style.position="fixed",i.style.pointerEvents="none",i.style.opacity="0",document.body.appendChild(i),null===(t=self.getSelection())||void 0===t||t.removeAllRanges();const a=document.createRange();a.selectNode(i),null===(n=self.getSelection())||void 0===n||n.addRange(a),document.execCommand("copy"),document.body.removeChild(i)}}var k=n(27548);const _=(e,t)=>({notify:(n,i,a)=>{i.forEach((({type:i})=>{switch(i){case"notify":n===k._&&t.popActiveView();break;case"closeCard":e()}}))},activeView:t.activeView});var w=n(17071),x=n(70932);var C=n(58679);const E=(e,t)=>t.manualInvocation?(e=>{const t=(0,i.zG)(e.fullCitation.get(),r.UI(g),r.fS((()=>0)));return 0===t?p.D.View.editViewByDefault:t<=2?p.D.View.addMissingViewByDefault:p.D.View.defaultView})(e):p.D.View.defaultView;function K({csState:e,model:t,generationModel:n,gnar:s,features:c}){let u=[];const g=l.h.create(p.D.State.citeSource),k=(0,d.OY)(c,e.page),K=E(n,c),I=K!==p.D.View.defaultView,F=new C.A(K,K),T=()=>g.set(p.D.State.citeSource),q=()=>g.set(p.D.State.citeSourceDisabled),B=new a.y(l.h.create([]),m.createFactory(),1,5e3),D=(0,d.UI)(t.domain,e.dynamicConfig),G=_(T,F),P=((e,t,n,i,a)=>({domain:e,position:t,disablePermanently:n,disableForSession:i,openWindow:a}))(t.domain,D,(()=>{s.citePopupButtonDisable(s.domain,"permanent",s.sessionId,"citation-builder",k);u.push({dispose:()=>{t.disableCitationBuilder()},id:"disableOnDispose"}),q(),B.enqueue("turnedOff").subscribe((e=>{"shown"!==e&&(t.disableCitationBuilder(),u=u.filter((({id:e})=>"disableOnDispose"!==e)))}))}),(()=>{s.citePopupButtonDisable(s.domain,"session",s.sessionId,"citation-builder",k),q()}),(()=>{if(!n.isCitationEdited()&&t.shouldReparseOnWindowOpen){t.reparseCitation(),n.regenerateInput();const e=E(n,c);F.activeView.get()!=e&&F.replaceActiveView(e)}return s.citePopupButtonClick(s.domain,s.sessionId,k),g.set(p.D.State.showWindow)})),N=((e,t,n)=>{let a=r.YP;return{citationStyle:e.style,sourceType:e.sourceType.view(r.fS((()=>v._.defaultKind))),showSourceTypeSelector:n.manualInvocation&&e.sourceType.view((0,w.ff)((0,w.Kg)(f.FX(v._.Kind.wikipedia),f.FX(v._.Kind.generativeAi)))).get(),position:t,setCitationStyle:t=>{e.setStyle(t)},setSourceType:t=>e.setSourceType(t),setStyleTypeSelectorLabel:e=>{a=e},forceOpenStyleTypeSelector:()=>(0,i.zG)(a,r.g_((()=>{x.Y.create("CitationBuilder.StyleType").warn("Style Type selector label empty")}),(e=>{e.focus(),e.click()})))}})(n,D,c),M=(({generationModel:e,notificationsManager:t,handlers:n,gnar:a,features:o,router:l,wasManuallyInvoked:d})=>{const s=[],c=e.sourceType.view(r.fS((()=>v._.defaultKind)));return{fullCitation:e.fullCitation,inTextCitation:e.inTextCitation.view((0,i.ls)(r.UI(S.GenerationModel.Utils.generatedCitationToRtf),r.hX((e=>e.length>0)))),missingFields:e.currentlyMissingFields.view((0,i.ls)(r.UI((e=>e.length)),r.fS((()=>0)))),showChangeSourceTypeMessage:e.sourceType.view(r.Wi),editingEnabled:o.editing,copyFullCitation:()=>{(0,h.zG)(e.fullCitation.get(),r.UI(S.GenerationModel.Utils.generatedCitationToRtf),f.bw((e=>{b(e),s.push(t.enqueue("citationCopied").subscribe()),n.closeWindow()}))),a.citeCopyButtonClick(e.style.get(),a.domain,a.sessionId,c.get(),d)},copyInTextCitation:()=>{(0,h.zG)(e.inTextCitation.get(),r.UI((e=>({citation:e,rtf:S.GenerationModel.Utils.generatedCitationToRtf(e)}))),f.bw((({citation:e,rtf:i})=>{b(i),s.push(t.enqueue("intextCopied",{params:{citation:e}}).subscribe()),n.closeWindow()}))),a.citeCopyIntextClick(e.style.get(),a.domain,a.sessionId,c.get(),d)},goToAllFieldsEditingView:()=>{o.editing&&(l.pushActiveView({type:p.D.ViewType.EditCitation,elements:{backButton:!0,styleSelector:!0,feedbackIcon:!0}}),a.citePopupEditClick(a.domain,a.sessionId,d))},goToMissingFieldsView:()=>{o.editing&&(l.pushActiveView({type:p.D.ViewType.AddMissingInformation,elements:{backButton:!0,styleSelector:!0,feedbackIcon:!0}}),a.citePopupAddMissingClick(a.domain,a.sessionId,d))},missingFieldsPromptShown:()=>{a.citePopupMissingInfoShow(a.domain,a.sessionId,d)},openStyleTypeSelector:n.openStyleTypeSelector,dispose:()=>{s.forEach((e=>e.unsubscribe()))}}})({generationModel:n,notificationsManager:B,handlers:{closeWindow:T,openStyleTypeSelector:()=>N.forceOpenStyleTypeSelector()},gnar:s,features:c,router:F,wasManuallyInvoked:k});u.push(M);const z=(({generationModel:e,router:t,startedWithFormView:n,closeWindow:i,gnar:a,wasManuallyInvoked:r})=>{const o=l.h.create(!n);return{fullCitation:e.editedFullCitation,currentInput:e.currentInput,commitInput:()=>{e.commitInput(),t.replaceActiveView(y),a.citePopupEditSuccess(a.domain,a.sessionId,r),o.set(!0)},onAddMissingInfoFormShow:e=>{a.citePopupMissingInfoFormShow(a.domain,e,a.sessionId,r)},discardInput:()=>{e.cancelInput(),o.get()?t.replaceActiveView(y):i()},fieldsMissedInParsing:e.fieldsMissedInParsing,currentlyMissingFields:e.currentlyMissingFields,invalidEditingFields:e.invalidEditingFields,requiredKeyFields:e.requiredKeyFields,secondaryFields:e.secondaryFields,showWarning:o.view((e=>!e)),goToAllFieldsEditingView:()=>t.pushActiveView({type:p.D.ViewType.EditCitation,elements:{backButton:!0,styleSelector:!0,feedbackIcon:!0}})}})({generationModel:n,router:F,startedWithFormView:I,closeWindow:T,gnar:s,wasManuallyInvoked:k}),A=((e,t,n,i)=>{const a=[];return{domain:e.domain,submitFeedback(r,o,l){e.feedbackSentButtonClick((o||"")+(void 0===l?"":` - ${l}`),"citationBuilder",r),a.push(n.enqueue("feedbackSubmitted").subscribe()),i(),t.popActiveView()},dispose(){a.forEach((e=>e))}}})(s,F,B,T);u.push(A);const L=(0,i.zG)(t,o.H6("onboardingSeen","setOnboardingSeen"));return{wasManuallyInvoked:k,citation:t.citation,state:g,router:F,header:G,gButton:P,styleTypeSelector:N,citationView:M,citationEditingView:z,feedbackView:A,notificationsManager:B,onboarding:L,gnar:s,features:c,position:D,dispose(){u.forEach((e=>e.dispose()))}}}},37246:(e,t,n)=>{n.d(t,{D:()=>i});var i,a=n(77174);!function(e){let t,n,i,r;!function(e){e.citeSource="citeSource",e.citeSourceDisabled="citeSourceDisabled",e.showWindow="showWindow"}(t=e.State||(e.State={})),function(e){e.Default="Default",e.EditCitation="EditCitation",e.EditCitationByDefault="EditCitationByDefault",e.AddMissingInformation="AddMissingInformation",e.AddMissingInformationByDefault="AddMissingInformationByDefault",e.Feedback="Feedback"}(n=e.ViewType||(e.ViewType={})),function(e){e.defaultView={type:n.Default,elements:{backButton:!1,styleSelector:!0,feedbackIcon:!0}};const t={backButton:!0,styleSelector:!0,feedbackIcon:!0};e.editView={type:n.EditCitation,elements:t},e.editViewByDefault={type:n.EditCitationByDefault,elements:{...t,backButton:!1}},e.addMissingView={type:n.AddMissingInformation,elements:t},e.addMissingViewByDefault={type:n.AddMissingInformationByDefault,elements:e.editViewByDefault.elements};e.feedbackView={type:n.Feedback,elements:{backButton:!0,styleSelector:!1,feedbackIcon:!1}}}(i=e.View||(e.View={})),function(e){e.nullableStringFieldLens=function(e){return a.Ue((t=>String(t[e]||"")),((t,n)=>({...n,[e]:""===t?void 0:t})))},e.nullableNumberFieldLens=function(e){return a.Ue((t=>String(t[e]||"")),((t,n)=>{if(""===t)return{...n,[e]:void 0};const i=Number(t);return String(i)===t&&i>=0&&Math.ceil(i)===i?{...n,[e]:i}:n}))},e.nullableArrayLens=function(){return a.Ue((e=>e||[]),(e=>0===e.length?void 0:e))},e.nullableCitationDateLens=function(){return a.Ue((e=>e||{}),(e=>void 0===e.year&&null==e.month&&void 0===e.day?void 0:e))}}(r=e.Lenses||(e.Lenses={}))}(i||(i={}))},46518:(e,t,n)=>{n.d(t,{e:()=>S,c:()=>v});var i=n(49231),a=n(90023),r=n(67848),o=n(19042),l=n(44715),d=n(38368),s=n(75787),c=n(34903),u=n(86820),m=n(43818),g=n(99627),p=n(52108),y=n(70402),h=n(22315);const f=({disabled:e,onClick:t})=>i.createElement(m.F.Fragment,null,i.createElement("button",{...(0,g.Sh)(y.getCitationButton,e&&y.disabledGetCitationButton),onClick:e?void 0:t},i.createElement(h.K,{size:28}),i.createElement("span",null,"Get citation"))),S=({viewModel:e,disabled:t})=>{const[n,o]=i.useState(!1),l=()=>o(!1),c=(0,r.N)({processGbuttonBlur:l,processGbuttonHover:()=>o(!0)},600,1200);return i.createElement(m.F.div,{className:p.citationGButtonContainer,...c.handlers,"data-grammarly-part":"citation-button"},!t&&i.createElement("div",{...(0,g.Sh)(p.citationGButtonSettingsContainer,"left"===e.position.horizontalLocation?p.citationGButtonSettingsContainerLeft:p.citationGButtonSettingsContainerRight)},i.createElement(d.L,{name:"disableCitationBuilder",label:i.createElement(b,{onClick:(0,a.ls)(l,c.reset.bind(c)),visible:n,gButtonHorizontalPosition:e.position.horizontalLocation}),align:e.position.horizontalLocation,vAlign:"bottom"===e.position.verticalLocation?"top":"bottom",appearanceBehavior:"mouseClick",theme:{dropdownList:s.ux.joinClasses([p.dropdownContainer,"bottom"===e.position.verticalLocation?p.dropdownContainerBottom:p.dropdownContainerTop,p.dropdownContainer,"left"===e.position.horizontalLocation?p.dropdownContainerLeft:p.dropdownContainerRight])},showDelay:0},i.createElement(v,{viewModel:e}))),i.createElement(f,{disabled:t,onClick:(0,a.ls)(l,c.reset.bind(c),e.openWindow.bind(e))}))},v=({viewModel:e})=>i.createElement(i.Fragment,null,i.createElement(c.Z.Small,{className:p.disableMenuText},o.l_.title(e.domain)),i.createElement(u.zx.Flat,{name:"thisSessionDisable",onClick:e.disableForSession.bind(e)},o.l_.forNow),i.createElement(u.zx.Flat,{name:"thisSessionDisable",onClick:e.disablePermanently.bind(e)},o.l_.always)),b=({onClick:e,visible:t,gButtonHorizontalPosition:n})=>i.createElement("button",{...(0,g.Sh)(p.citationGButtonSettings,t?p.visible:p.hidden,"left"===n?p.citationGButtonSettingsLeft:p.citationGButtonSettingsRight),onClick:e},i.createElement(l.B,null))},27548:(e,t,n)=>{n.d(t,{_:()=>z,h:()=>A});var i=n(49231),a=n(37246),r=n(46518),o=n(28479),l=n(38368),d=n(65210);const s=({gButtonVM:e})=>i.createElement(l.L,{name:"citationBuilderSettings",label:i.createElement(o.l,{size:"small",enableTooltip:!0,className:d.settingsButton}),align:"right",vAlign:"bottom"===e.position.verticalLocation?"top":"bottom",showDelay:0,closeDelay:0,theme:{dropdownList:d.dropdownContainer},appearanceBehavior:"mouseClick"},i.createElement(r.c,{viewModel:e}));var c=n(90023),u=n(38138),m=n(97410),g=n(19042),p=n(12990),y=n(42467),h=n(34903),f=n(14224),S=n(58303),v=n(59833),b=n(43818),k=n(21222);const _=["apa","mla","chicago"],w=[m._.Kind.journalArticle,m._.Kind.website,m._.Kind.book,m._.Kind.magazineArticle,m._.Kind.onlineVideo,m._.Kind.image],x=e=>"mla"===e||"apa"===e?e.toUpperCase():e.charAt(0).toUpperCase()+e.slice(1),C=({vm:e})=>i.createElement(l.L,{name:"styleTypeSelector",label:i.createElement(p.z,{includePadding:!1,kind:"transparent-hoverable",className:k.selectorButton,ref:t=>e.setStyleTypeSelectorLabel(S.ij(t))},i.createElement("span",{className:k.selectorButtonLabel},i.createElement(b.F.Fragment,null,e.citationStyle.view(x))," Â· ",i.createElement(b.F.Fragment,null,e.sourceType.view((e=>g.s5[e])))),i.createElement(y.JO.Arrow,{className:k.arrowIcon})),align:e.position.horizontalLocation,vAlign:"bottom"===e.position.verticalLocation?"top":"bottom",appearanceBehavior:"mouseClick",showDelay:0,closeDelay:0},i.createElement("div",{className:k.dropdownContainer},i.createElement(h.Z.Small,null,"Style"),i.createElement(f.zx.Group,{sticky:!0,className:k.styleButtonGroup},_.map((t=>i.createElement(f.zx.White,{name:t,key:t,active:e.citationStyle.view((e=>e===t)),className:k.styleButton,onClick:()=>e.setCitationStyle(u.Tk.Style[t])},x(t))))),e.showSourceTypeSelector&&i.createElement(i.Fragment,null,i.createElement(h.Z.Small,{className:k.selectorPadding},"Type"),(0,c.zG)(w,v.wM(3),v.UI((t=>i.createElement(f.zx.Group,{sticky:!0,className:k.styleButtonGroup,key:t[0]},t.map((t=>i.createElement(f.zx.White,{name:t,key:t,active:e.sourceType.view((e=>e===t)),className:k.styleButton,onClick:()=>e.setSourceType(t)},g.s5[t]))))))))));var E=n(86016),K=n(90298),I=n(50899),F=n(51320),T=n(99627),q=n(83386),B=n.n(q);const D=({enableTooltip:e=!1,size:t="medium",...n})=>i.createElement(F.u,{message:"Feedback",showDelay:I.gk,disabled:!e},i.createElement(E.h,{...n},i.createElement("div",{...(0,T.Sh)("small"===t?B().feedbackButtonSmallIcon:null,"medium"===t?B().feedbackButtonMediumIcon:null)})));var G=n(22315),P=n(91217),N=n(10583);const M=e=>i.createElement(E.h,{...e},i.createElement("div",{className:N.backIcon})),z="back-button",A=({notify:e,router:t,styleTypeSelectorVM:n,gButtonVM:r})=>i.createElement(b.F.div,{...(0,T.Sh)(N.citationBuilderHeader,"bottom"===r.position.verticalLocation?N.citationBuilderHeaderBottom:N.citationBuilderHeaderTop)},t.activeView.view((o=>i.createElement(i.Fragment,null,i.createElement("div",{className:N.headerContent},o.type===a.D.ViewType.Default&&i.createElement(G.K,{type:"mini"}),o.elements.backButton&&i.createElement(i.Fragment,null,i.createElement(M,{onClick:()=>e(z,[{type:"notify",userAction:P.nz.Click}],{alertRefs:[]})}),i.createElement("div",{className:N.title},function(e){switch(e.type){case a.D.ViewType.AddMissingInformation:return"Add missing information";case a.D.ViewType.EditCitation:return"Edit citation";case a.D.ViewType.Feedback:return"Provide Feedback";default:return""}}(o)))),i.createElement("div",{className:N.headerSeparator}),o.elements.styleSelector&&i.createElement(C,{vm:n}),o.elements.feedbackIcon&&i.createElement(D,{size:"small",onClick:()=>t.pushActiveView(a.D.View.feedbackView)}),i.createElement(s,{gButtonVM:r}),i.createElement(K.P,{className:N.citationBuilderCloseButton,onClick:()=>e("close",[{type:"closeCard"}],{alertRefs:[]}),tooltipMessage:"Close Citation Builder"})))))},16467:(e,t,n)=>{n.r(t),n.d(t,{CitationBuilderView:()=>Ge});var i=n(49231),a=n(37246),r=n(19042),o=n(78565),l=n(59577);const d={citationCopied:()=>i.createElement(c,null),turnedOff:()=>i.createElement(g,null),intextCopied:e=>i.createElement(m,{citation:e.args.params.citation}),feedbackSubmitted:()=>i.createElement(u,null)},s=({children:e})=>i.createElement("div",{className:l.contentWrapper},e),c=()=>i.createElement(s,null,i.createElement(o.DI.Content,null,"Citation copied to clipboard")),u=()=>i.createElement(s,null,i.createElement(o.DI.Content,null,r.tu.notification)),m=({citation:e})=>i.createElement(s,null,i.createElement(o.DI.Content,null,"â€œ",e.result.reduce(((e,t,n)=>{if(40===e.length)return e;const a=e.length+t.value.length>40,r=a?t.value.substring(0,40-e.length):t.value;return{length:Math.min(40,e.length+t.value.length),result:[...e.result,i.createElement("span",{key:n},t.isPlaceholder?i.createElement("b",null,r):t.italicize?i.createElement("i",null,r):i.createElement("span",null,r),a&&i.createElement(i.Fragment,null,"â€¦"))]}}),{length:0,result:[]}).result,"â€ copied")),g=()=>i.createElement(s,null,i.createElement(o.DI.TitledContent,{title:"Grammarly Citation turned off"},"To turn it back on go to",i.createElement("br",null)," Browser toolbar â†’ Grammarly."));var p=n(47065),y=n(47524);const h=({manager:e,position:t})=>i.createElement(p.i,{manager:e,theme:{grid:{container:y.ux.joinClasses([l.container,"left"===t.horizontalLocation?l.containerLeft:l.containerRight]),bottomLeft:l.bottomLeft,bottomRight:l.bottomRight,top:l.top},view:{wrapper:l.notificationWrapper}},views:d});var f=n(90023),S=n(38138),v=n(79992),b=n(58303),k=n(59833),_=n(12518),w=n(43818),x=n(97424),C=n(86820),E=n(42467),K=n(34903),I=n(99694),F=n(99627);const T=({title:e,width:t,children:n})=>i.createElement(w.F.div,{className:"full"===t?x.citationFormFullWidthItem:"auto"===t?x.citationFormAutoWidthItem:x.citationFormHalfWidthItem},i.createElement(K.Z.Small,{className:x.citationFormLabel},e),n),q=({value:e,onChange:t,title:n,placeholder:a,width:r,validationFailed:o})=>i.createElement(T,{title:n,width:r},i.createElement(I.B2,{value:e||"",onChange:e=>t(e.currentTarget.value||void 0),placeholder:a,...(0,F.Sh)(x.citationFormInput,null==o?void 0:o.view((e=>e&&x.validationFailed)))})),B=({value:e,title:t,placeholder:n,width:a,validationFailed:r})=>i.createElement(T,{title:t,width:a},i.createElement(I.II,{value:e,placeholder:n,...(0,F.Sh)(x.citationFormInput,null==r?void 0:r.view((e=>e&&x.validationFailed)))})),D=({value:e,title:t,validationFailed:n})=>{const a=(t,n)=>e.modify((e=>{const i=[...e];return i.splice(t,1,n),i}));return i.createElement("div",{className:x.citationFormCombinedInputContainer},i.createElement(w.F.Fragment,null,e.view((r=>r.length>0?r.map(((o,l)=>i.createElement(i.Fragment,{key:`${l}-${r.length}`},i.createElement(q,{value:o.firstName,onChange:e=>a(l,{...o,firstName:e||""}),title:`${t} first name`,validationFailed:n}),i.createElement(q,{value:o.lastName,onChange:e=>a(l,{...o,lastName:e||""}),title:`${t} last name`,validationFailed:n}),i.createElement(T,{title:"Â "},i.createElement(C.zx.Ghost,{name:"remove-contributor",onClick:()=>{return t=l,e.modify((e=>{const n=[...e];return n.splice(t,1),n}));var t},className:x.removeButton},i.createElement(E.JO.Cross,null))),i.createElement("div",{className:x.flexWrapDelimiter})))):i.createElement(K.Z.Small,{className:x.emptyAuthorsInputLabel},t)))),i.createElement("div",null,i.createElement(C.zx.Ghost,{name:"add-contributor",onClick:()=>e.modify((e=>[...e,{firstName:"",lastName:""}])),className:x.verticallySeparatedButton},i.createElement(E.JO.New,null),"Add ",t)))};var G=n(29919),P=n(38368),N=n(17071);const M=({value:e,validationFailed:t})=>i.createElement(P.L,{name:"month",label:i.createElement(C.zx.Flat,{...(0,F.Sh)(x.monthDropdownLabel,null==t?void 0:t.view((e=>e&&x.validationFailed))),name:"month-dropdown",onClick:N.Q1},i.createElement(w.F.span,{style:{flex:1}},e.view((e=>void 0===e?"Month":G.lQ[e-1]))),i.createElement(E.JO.Arrow,{direction:E.n4.down})),appearanceBehavior:"mouseClick",customPosition:{top:"bottom",left:"auto"},showDelay:0,theme:{dropdownContainer:x.monthDropdownContainer,dropdownList:x.monthDropdownList}},i.createElement("div",{className:x.monthDropdownListContent},i.createElement(C.zx.Flat,{name:"month-dropdown-empty",onClick:()=>e.set(void 0)},i.createElement(K.Z.Base,null,"Month")),G.lQ.map(((t,n)=>i.createElement(C.zx.Flat,{name:`month-dropdown-${t}`,onClick:()=>e.set(n+1),key:t},i.createElement(K.Z.Base,{style:{flex:1}},t)))))),z=({value:e,title:t,validationFailed:n})=>{const r=e.lens(a.D.Lenses.nullableCitationDateLens());return i.createElement("div",{className:x.citationFormCombinedInputContainer},i.createElement("div",null,i.createElement(K.Z.Small,{className:x.citationFormLabel},t),i.createElement(M,{value:r.lens("month"),validationFailed:n})),i.createElement(B,{value:r.lens(a.D.Lenses.nullableNumberFieldLens("day")),title:"Day",width:"auto",placeholder:"DD",validationFailed:n}),i.createElement(B,{value:r.lens(a.D.Lenses.nullableNumberFieldLens("year")),title:"Year",width:"auto",placeholder:"YYYY",validationFailed:n}))};var A=n(65882),L=n(2218),V=n(65647),O=n(14765),R=n(25770);const Y=(e,t,n,i,a)=>{const r=R.h.create(n(e.get()));return{textValue:A.aj([r.pipe(L.A()),e.pipe(L.A())]).pipe(V.U((([e,a])=>{const r=t(e.value),o=a.value,l=i(b.FS(r),o);return a.timestamp>e.timestamp&&!l?n(o):e.value})),O.O("")),validationFailed:R.h.combine(a||R.h.create(!1),r,((e,n)=>e||(0,f.zG)(n,t,b.Wi))),onUserInput:n=>{const i=t(n||"");r.set(n||""),e.set(b.FS(i))}}},U=({viewModel:e,title:t,placeholder:n,width:a})=>i.createElement(q,{value:e.textValue,placeholder:n,title:t,width:a,onChange:e.onUserInput,validationFailed:e.validationFailed});var j=n(28186);const W=(e,t)=>Y(e,(e=>{const t=e.replace(" ","").split(",").map((e=>{const t=e.split("-");return""===t[0]?null:{startPage:t[0],endPage:t[1]||void 0}})).filter((e=>null!==e));return b.G(t.length>0?t:void 0)}),(e=>{var t;return(null===(t=null==e?void 0:e.map((e=>e.endPage?`${e.startPage}-${e.endPage}`:e.startPage)))||void 0===t?void 0:t.join(", "))||""}),((e,t)=>(null==e?void 0:e.length)===(null==t?void 0:t.length)&&(0,f.zG)(k.$R(e,t),k.yW((([e,t])=>j.vZ(e,t))))),t),H=({value:e,title:t,width:n,validationFailed:a})=>i.createElement(U,{viewModel:W(e,a),placeholder:"1-2, A1, ii-xi",title:t,width:n}),$=e=>void 0===e?"00":e<10?`0${e}`:e,X=(e,t)=>Y(e,(e=>{if(""===e)return b.G(void 0);const t=e.split(":").map(Number).map((e=>Number.isNaN(e)||e<0?void 0:e));return(0,f.zG)(t,k.yW((e=>void 0===e)))?b.G(void 0):t.length<=3?b.G({hour:t[t.length-3],minute:t[t.length-2],second:t[t.length-1]||0}):b.YP}),(e=>void 0===e?"":e.hour?`${e.hour}:${$(e.minute)}:${$(e.second)}`:e.minute?`${e.minute}:${$(e.second)}`:`0:${e.second}`),j.vZ,t),Z=({value:e,title:t,width:n,validationFailed:a})=>i.createElement(U,{viewModel:X(e,a),placeholder:"1-2, A1, ii-xi",title:t,width:n}),J=["string","number","pages","timestamp"],Q=["title","promptText","promptDescription"],ee=({fields:e,editingInput:t,invalidFields:n,width:o})=>{const l=e=>n.view((0,f.ls)(b.UI((t=>t.includes(e))),b.fS((()=>!1))));return i.createElement(i.Fragment,null,e.map((([e,n])=>{switch(n){case"string":case"number":return i.createElement(B,{title:r.dw[e],value:t.lens("string"===n?a.D.Lenses.nullableStringFieldLens(e):a.D.Lenses.nullableNumberFieldLens(e)),width:o,validationFailed:l(e),key:e});case"authors":return i.createElement(D,{title:r.dw[e],value:t.lens(e).lens(a.D.Lenses.nullableArrayLens()),validationFailed:l(e),key:e});case"date":return i.createElement(z,{value:t.lens(e),title:r.dw[e],validationFailed:l(e),key:e});case"pages":return i.createElement(H,{key:e,value:t.lens(e).lens(a.D.Lenses.nullableArrayLens()),title:r.dw[e],validationFailed:l(e),width:o});case"timestamp":return i.createElement(Z,{key:e,value:t.lens(e),title:r.dw[e],validationFailed:l(e),width:o});default:(0,v.vE)(n)}})))},te=({fields:e,editingInput:t,invalidFields:n})=>i.createElement(w.F.div,{className:x.citationFormContainer},e.view((0,f.ls)(b.UI((0,f.ls)(k.UI((e=>[e,S.Tk.EditingInputFieldTypes[e]])),k.tV((e=>Q.includes(e[0])||!J.includes(e[1])?_.left(e):_.right(e))),(({left:e,right:a})=>i.createElement(w.F.Fragment,null,i.createElement(ee,{fields:e,editingInput:t,invalidFields:n,width:"full"}),i.createElement(ee,{fields:a,editingInput:t,invalidFields:n,width:"half"}))))),b.FS)));var ne=n(79299);const ie=({color:e})=>i.createElement("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8 16C12.4183 16 16 12.4183 16 8C16 3.58172 12.4183 0 8 0C3.58172 0 0 3.58172 0 8C0 12.4183 3.58172 16 8 16Z",fill:null!=e?e:ne.Z.red50}),i.createElement("path",{d:"M8.94827 4H7.05196L7.22242 10.1108H8.78208L8.94827 4ZM8.00225 12.8381C8.5477 12.8381 9.02071 12.3821 9.02498 11.8153C9.02071 11.2571 8.5477 10.8011 8.00225 10.8011C7.43975 10.8011 6.97526 11.2571 6.97952 11.8153C6.97526 12.3821 7.43975 12.8381 8.00225 12.8381Z",fill:ne.Z.neutral0}));var ae=n(71556);const re=({citation:e})=>i.createElement("div",{className:ae.fullCitationPreview},i.createElement(w.F.div,{className:ae.fullCitationText},e.result.map(((e,t)=>i.createElement(K.Z,{key:e.value+String(t),styleType:K.Z.Type.Base,nodeType:"span",className:ae.citationText},e.italicize?i.createElement("i",null,e.value):e.value))))),oe=({viewModel:e})=>{const t=R.h.combine(e.missingFields,e.showChangeSourceTypeMessage,((e,t)=>({fields:e,sourceType:t,isSomeDataMissing:e||t})));return i.createElement(w.F.Fragment,null,t.view((t=>t.isSomeDataMissing&&i.createElement(w.F.div,{className:ae.citationFooter},i.createElement("div",{className:ae.missingItemsContainer},t.sourceType&&i.createElement(de,{viewModel:e}),t.fields>0&&i.createElement(le,{viewModel:e,missingFields:t.fields}))))))},le=({missingFields:e,viewModel:t})=>(i.useEffect((()=>{t.missingFieldsPromptShown()}),[]),i.createElement("div",{className:ae.missingItem},i.createElement("span",{className:ae.missingIconContainer},i.createElement(ie,{color:ne.Z.yellow60})),r.bL.citationViewMissingFieldsLabel(e),i.createElement("span",{className:ae.reviewMissingDot},"Â·"),i.createElement(C.zx.Ghost,{name:"reviewMissing",className:ae.reviewMissing,onClick:t.goToMissingFieldsView},r.bL.review))),de=({viewModel:e})=>i.createElement("div",{className:ae.missingItem},i.createElement("span",{className:ae.missingIconContainer},i.createElement(ie,{color:ne.Z.yellow60})),r.bL.changeSourceType.question,i.createElement("span",{className:ae.reviewMissingDot},"Â·"),i.createElement(C.zx.Ghost,{name:"changeSourceType",className:ae.reviewMissing,onClick:e.openStyleTypeSelector},r.bL.changeSourceType.action)),se=({viewModel:e})=>i.createElement(w.F.div,{className:ae.citationContainer},e.fullCitation.view(b.g_((()=>i.createElement("p",{className:ae.errorState},r.bL.noAutoCitation)),(t=>i.createElement(w.F.Fragment,null,i.createElement("div",{className:ae.citationBody},i.createElement(re,{citation:t}),i.createElement("div",{className:ae.buttonsContainer},i.createElement(C.zx.Group,{sticky:!0,className:ae.buttonsGroup},i.createElement(C.zx.Primary,{name:"copyCitation",className:ae.copyButton,onClick:e.copyFullCitation.bind(e)},r.bL.copy),i.createElement(P.L,{name:"citationMenu",label:i.createElement(C.zx.White,{name:"menu",className:ae.moreButton},i.createElement(E.JO.EllipsisSmall,{className:ae.moreIcon})),align:"right",vAlign:"top",showDelay:0,appearanceBehavior:"mouseClick"},e.inTextCitation.view((0,f.ls)(b.UI((()=>i.createElement(C.zx.Flat,{key:"copyInText",name:"copyInText",onClick:e.copyInTextCitation.bind(e)},r.bL.copyInText))),b.WG)),e.editingEnabled&&i.createElement(C.zx.Flat,{name:"editCitation",onClick:e.goToAllFieldsEditingView},r.bL.edit))))),e.editingEnabled&&i.createElement(oe,{viewModel:e}))))));var ce=n(11951);const ue=({viewModel:e})=>{const t=R.h.create(!1);return i.createElement("div",null,i.createElement(w.F.div,{className:ce.citationPreviewContainer},R.h.combine(e.fullCitation,e.showWarning,((e,t)=>(0,f.zG)(e,b.g_((()=>i.createElement("p",{className:ae.errorState},"Error generating citation.")),(e=>e.result.length>0?i.createElement(re,{citation:e}):t&&i.createElement("p",{className:ae.errorState},i.createElement("span",{className:ae.missingIconContainer},i.createElement(ie,{color:ne.Z.yellow60})),r.bL.noAutoCitation))))))),i.createElement(w.F.div,{className:ce.citationFormsContainer},t.view((n=>i.createElement(w.F.Fragment,null,i.createElement(te,{fields:e.requiredKeyFields,editingInput:e.currentInput,invalidFields:e.invalidEditingFields}),e.secondaryFields.view((e=>(0,f.zG)(e,b.UI(k.Od),b.fS(f.jv))&&i.createElement(C.zx.Tertiary,{name:"show-secondary",onClick:()=>t.modify((e=>!e)),className:ce.verticallySeparatedButton},n?i.createElement(i.Fragment,null,"Hide additional fields ",i.createElement(E.JO.Arrow,{direction:E.n4.up})):i.createElement(i.Fragment,null,"Show additional fields ",i.createElement(E.JO.Arrow,{direction:E.n4.down}))))),n&&i.createElement(i.Fragment,null,i.createElement(te,{fields:e.secondaryFields,editingInput:e.currentInput,invalidFields:e.invalidEditingFields}),i.createElement("div",{ref:e=>null==e?void 0:e.scrollIntoView()})))))),i.createElement(w.F.div,{className:ce.actionButtonsContainer},i.createElement(C.zx.Primary,{name:"save",onClick:e.commitInput},"Save"),i.createElement(C.zx.Ghost,{name:"cancel",onClick:e.discardInput},"Cancel")))};var me=n(46518),ge=n(99460),pe=n(27548),ye=n(47204),he=n(9690),fe=n(30152),Se=n(20715),ve=n(44040);const be="citation-window",ke=({children:e,vm:t})=>i.createElement(ye.p,null,i.createElement(he.G.DefaultProvider,null,i.createElement("div",{className:ve.citationBuilderWrapper,"data-grammarly-part":be},i.createElement("div",{"data-grammarly-part":"citation-window-header",className:ve.citationBuilderWrapperHeader},i.createElement(pe.h,{notify:t.header.notify,router:t.router,gButtonVM:t.gButton,styleTypeSelectorVM:t.styleTypeSelector})),i.createElement(ge.z,{"data-grammarly-part":"citation-window-content",className:ve.citationBuilderWrapperContent,animationDurationMs:300},(e instanceof fe.y?e:Se.of(e)).pipe(V.U((e=>i.createElement("div",{className:ve.citationBuilderWindowContent},e))))))));var _e=n(4721);const we=({viewModel:e,experimentClient:t})=>i.createElement("div",{style:{paddingTop:"12px"}},i.createElement(_e.q,{withScore:!0,onSubmit:t=>{e.submitFeedback(t.score,t.text,t.domain)},title:i.createElement("span",null,r.tu.title),hideTextBoxTitle:!0,hideLogo:!0,hideDomainHelpText:!0,showPostSubmitScreen:!1,submitButtonKind:"primary",domain:e.domain,experimentClient:t}));var xe=n(52256),Ce=n(22067);const Ee=({viewModel:e,isInitialView:t})=>(i.useEffect((()=>{e.onAddMissingInfoFormShow(t)}),[]),i.createElement("div",null,i.createElement(w.F.div,{className:ce.citationPreviewContainer},R.h.combine(e.fullCitation,e.showWarning,e.fieldsMissedInParsing,((e,t,n)=>(0,f.zG)(e,b.g_((()=>i.createElement("p",{className:ae.errorState},"Error generating citation.")),(e=>i.createElement(i.Fragment,null,i.createElement(re,{citation:e}),t&&b.pC(n)&&i.createElement("div",{className:ae.citationFooter},i.createElement("span",{className:ae.missingIconContainer},i.createElement(ie,{color:ne.Z.yellow60})),r.bL.citationViewMissingFieldsLabel(xe.MH(n).length))))))))),i.createElement(w.F.div,{className:ce.citationFormsContainer},i.createElement("p",{className:Ce.missingInformationHeader},"Missing Information"),i.createElement(te,{fields:e.fieldsMissedInParsing,editingInput:e.currentInput,invalidFields:e.invalidEditingFields})),i.createElement(w.F.div,{className:ce.actionButtonsContainer},i.createElement(C.zx.Primary,{name:"save",onClick:e.commitInput},"Save"),i.createElement(C.zx.Ghost,{name:"cancel",onClick:e.discardInput},"Cancel"),i.createElement("div",{className:ce.flexSeparator}),i.createElement(C.zx.Tertiary,{name:"show-all",onClick:e.goToAllFieldsEditingView},"Show all fields"))));var Ke=n(90298),Ie=n(47453),Fe=n(52745);const Te=({children:e,viewModel:t})=>{const n=()=>{t.setOnboardingSeen()};return i.useEffect((()=>n),[]),i.createElement(w.F.Fragment,null,t.onboardingSeen.view((t=>i.createElement(Ie.J,{mainContent:i.createElement(qe,{onClose:n}),isOutsideReferenceElement:!1,theme:"dark",placement:"top-start",includeMainContentPadding:!1,style:{zIndex:1,marginLeft:"2px"},onClose:n,size:"medium",distanceFromReferenceElement:16,closeButton:e=>i.createElement(Ke.P,{size:"small",onClick:e,id:Fe.citationOnboardingCloseButton}),show:!t},i.createElement("div",null,e)))))},qe=({onClose:e})=>i.createElement("div",{className:Fe.onboardingContent},i.createElement("div",{className:Fe.onboardingTitle},r.qv.title),i.createElement("div",null,r.qv.subTitle),i.createElement("div",{className:Fe.onboardingGotIt},i.createElement(C.zx.Ghost,{name:"citationBuilderOnboardingGotIt",onClick:e},r.qv.button)));var Be=n(68259),De=n(85389);const Ge=e=>i.createElement("div",{className:De.citationBuilderMainContainer},i.createElement(w.F.Fragment,null,((e,t)=>{const n=(0,v.hz)((()=>{e.gnar.citePopupButtonShow(e.gnar.domain,e.gnar.sessionId,e.wasManuallyInvoked)}));return e.state.view((r=>{switch(r){case a.D.State.citeSource:return n(),i.createElement(Te,{viewModel:e.onboarding},i.createElement(me.e,{viewModel:e.gButton,disabled:!1}));case a.D.State.citeSourceDisabled:return i.createElement(me.e,{viewModel:e.gButton,disabled:!0});case a.D.State.showWindow:return i.createElement(ke,{vm:e},e.router.activeView.view((n=>{switch(n.type){case a.D.ViewType.Default:return i.createElement(se,{viewModel:e.citationView});case a.D.ViewType.EditCitation:case a.D.ViewType.EditCitationByDefault:return i.createElement(ue,{viewModel:e.citationEditingView});case a.D.ViewType.AddMissingInformation:return i.createElement(Ee,{viewModel:e.citationEditingView,isInitialView:!1});case a.D.ViewType.AddMissingInformationByDefault:return i.createElement(Ee,{viewModel:e.citationEditingView,isInitialView:!0});case a.D.ViewType.Feedback:return i.createElement(we,{viewModel:e.feedbackView,experimentClient:t});default:return(0,Be.vE)(n)}})));default:(0,Be.vE)(r)}}))})(e.viewModel,e.experimentClient)),i.createElement(h,{manager:e.viewModel.notificationsManager,position:e.viewModel.position}))},29095:(e,t,n)=>{n.d(t,{I:()=>s,O:()=>i});var i,a=n(49231),r=n(18983),o=n(80953),l=n(48886),d=n(46412);!function(e){e.Context=a.createContext(o.Y.invariantContent("AssistantTextResources")),e.holder=l.VF((()=>({setGoalsTooltip:"Set goals to get tailored writing suggestions",proofitTooltip:"Expert writing help"})))}(i||(i={}));const s=d.Pj(d.GG({denali:r.m.holder,assistant:i.holder}))((()=>({denali:{}})))},58679:(e,t,n)=>{n.d(t,{A:()=>a});var i=n(25770);class a{constructor(e,t){this._viewHistory=[],this._startupPlaceHolder=e,this._activeView=i.h.create(this._startupPlaceHolder),this._defaultView=t}get activeView(){return this._activeView.view()}get lastView(){return this._viewHistory[this._viewHistory.length-1]||this._defaultView}pushActiveView(e){const t=this._activeView.get();e.type!==t.type&&(t.type!==this._startupPlaceHolder.type&&this._viewHistory.push(t),this._activeView.set(e))}popActiveView(){const e=this._viewHistory.pop()||this._defaultView;this._activeView.set(e)}replaceActiveView(e){e.type!==this._activeView.get().type&&this._activeView.set(e)}}},99460:(e,t,n)=>{n.d(t,{z:()=>g});var i=n(90023),a=n(49231),r=n(15542),o=n(65647),l=n(65882),d=n(34859),s=n(90049),c=n(83780),u=n(58303),m=n(43818);const g=({children:e,animationDurationMs:t,...n})=>{const{onMount:g,rect:p}=r.P.useRectWatcher(),y=p.pipe(o.U((0,i.ls)(u.UI((e=>e.height)),u.fS((()=>0))))),h=l.aj([e,p]).pipe(d.h("hidden")),f=s.T(h,h.pipe(c.g(t),d.h("visible")));return a.createElement(m.F.div,{...n,style:{height:y,overflow:f,transitionProperty:"height",transitionDuration:`${t}ms`}},a.createElement(m.F.div,{mount:g},e))}},28479:(e,t,n)=>{n.d(t,{l:()=>c});var i=n(49231),a=n(50899),r=n(86016),o=n(51320),l=n(99627),d=n(46922),s=n.n(d);const c=({enableTooltip:e=!1,size:t="medium",...n})=>i.createElement(o.u,{message:"Settings",showDelay:a.gk,disabled:!e},i.createElement(r.h,{...n},i.createElement("div",{...(0,l.Sh)("small"===t?s().settingsButtonSmallIcon:null,"medium"===t?s().settingsButtonMediumIcon:null)})))},44637:(e,t,n)=>{n.d(t,{J:()=>c});var i=n(90023),a=n(49231),r=n(15542),o=n(80724),l=n(78488),d=n(99627),s=n(14482);const c=({onChange:e,labelId:t,className:n,checkboxClassName:c,labelClassName:u,checked:m,children:g,disabled:p,useDS:y,dataGrammarlyPart:h="ui-kit-checkbox",tabIndex:f=0,onMount:S=i.Q1})=>{const[v,b]=a.useState(null!=m&&m);a.useEffect((()=>{b(Boolean(m))}),[m]);const k=t=>{t.preventDefault(),t.stopPropagation(),b(!v),null==e||e(!v)},{ref:_,onMount:w}=r.P.useElWatcher();return a.useEffect((()=>{const e=_.pipe(o.oA,l.b(S)).subscribe();return()=>e.unsubscribe()}),[]),a.createElement("div",{"data-grammarly-part":h,...(0,d.Sh)(s.checkboxContainer,n)},a.createElement("div",{...(0,d.Sh)(s.checkbox,c,v?s.checkboxChecked:null,y?s.checkboxDS:null),role:"checkbox","aria-checked":v,tabIndex:f,"aria-labelledby":t,onKeyDown:e=>{" "===e.key&&k(e)},onClick:p?i.Q1:k,ref:w},v?a.createElement("div",{className:s.checkboxCheckmark}):null),a.createElement("label",{id:t,onClick:k,className:u},g))}},96130:(e,t,n)=>{n.d(t,{E:()=>o});var i=n(49231),a=n(99627),r=n(17345);const o=({options:e,onChange:t=(()=>null),ariaLabel:n,className:o})=>{const l=[],[d,s]=i.useState(null);i.useEffect((()=>{var n;null!==d&&(null===(n=l[d])||void 0===n||n.focus()),t(null!==d?e[d].value:null)}),[d]);const c=null!==d?e[d]:null;return i.createElement("div",{"data-grammarly-part":"ui-kit-radio-group",className:o},i.createElement("div",{className:r.radioGroup,role:"radiogroup","aria-label":n,onKeyDown:t=>{if(" "!==t.key||c){if("ArrowRight"===t.key||"ArrowDown"===t.key){t.preventDefault(),t.stopPropagation();s(((d||0)+1)%e.length)}else if("ArrowLeft"===t.key||"ArrowUp"===t.key){t.preventDefault(),t.stopPropagation();const n=(d||0)-1;s(n<0?e.length-1:n)}}else t.preventDefault(),t.stopPropagation(),s(0)}},e.map(((e,t)=>{const n=(null==c?void 0:c.value)===e.value,o=0===t;return i.createElement("div",{key:e.value,...(0,a.Sh)(r.radioGroupOption,n?r.radioGroupOptionSelected:null),role:"radio",tabIndex:n||o&&!c?0:-1,"aria-checked":n,onClick:e=>{e.preventDefault(),e.stopPropagation(),s(t)},ref:e=>l.push(e)},e.render())}))))}},21136:(e,t,n)=>{n.d(t,{z:()=>m});var i=n(49231),a=n(64151);const r=({children:e,style:t,dataGrammarlyPart:n="ui-kit-iframe",...r})=>{const[o,l]=i.useState(null),d=i.useCallback((e=>{var t,n;let i=null;"contentDocument"in e.target&&(i=null!==(n=null===(t=e.target.contentDocument)||void 0===t?void 0:t.body)&&void 0!==n?n:null),l(i),i&&(i.style.margin="0",i.style.height="100vh",i.style.overflowY="hidden")}),[]);return i.createElement("iframe",{...r,style:{border:"none",...t},onLoad:d,srcDoc:"<html><body></body></html>","data-grammarly-part":n},o&&(0,a.createPortal)(e,o))};var o=n(1208),l=n(70632),d=n.n(l),s=n(6986),c=n(4798);const u=({placeholder:e,ariaLabel:t,onChange:n})=>{const[a,r]=i.useState("");return i.useEffect((()=>{n(a)}),[a]),i.createElement(i.Fragment,null,i.createElement(o.b,null,d().__css),i.createElement("div",{role:"textbox",className:d().textBox,contentEditable:!0,onInput:e=>{r(e.target.innerText)},"data-placeholder":e,"aria-placeholder":e,"aria-label":t}))},m=({placeholder:e,onChange:t,ariaLabel:n,iframeTitle:a,className:o})=>(0,s.OB)().experimentClient.isGateEnabled(c.K.CentralizeStopEventPropagation)?i.createElement("div",{className:o,style:{width:"100%",height:"128px",maxHeight:"inherit"}},i.createElement(u,{onChange:t,ariaLabel:n,placeholder:e})):i.createElement(r,{dataGrammarlyPart:"ui-kit-textbox",className:o,style:{width:"100%",height:"100%"},title:a},i.createElement(u,{onChange:t,ariaLabel:n,placeholder:e}))},44715:(e,t,n)=>{n.d(t,{B:()=>r});var i=n(49231),a=n(79299);const r=({color:e=a.Z.neutral0})=>i.createElement("svg",{fill:"none",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"},i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9.431 4h1.138c.16 0 .288.13.288.288 0 1.37 1.68 2.031 2.65 1.063a.294.294 0 0 1 .413-.002l.731.73c.114.115.112.3-.002.415-.968.968-.307 2.649 1.063 2.649.159 0 .288.129.288.288v1.138c0 .16-.13.288-.288.288-1.37 0-2.031 1.68-1.063 2.65.114.113.116.3.002.413l-.73.731a.294.294 0 0 1-.415-.002c-.968-.968-2.649-.307-2.649 1.063 0 .159-.129.288-.288.288H9.43a.288.288 0 0 1-.288-.288c0-1.37-1.68-2.031-2.65-1.063a.293.293 0 0 1-.413.002l-.731-.73a.294.294 0 0 1 .002-.415c.968-.968.307-2.649-1.063-2.649A.288.288 0 0 1 4 10.57V9.43c0-.16.13-.288.288-.288 1.37 0 2.031-1.68 1.063-2.65a.294.294 0 0 1-.002-.413l.73-.731a.294.294 0 0 1 .415.002c.968.968 2.649.307 2.649-1.063 0-.159.129-.288.288-.288ZM10 12.308a2.308 2.308 0 1 0 0-4.616 2.308 2.308 0 0 0 0 4.616Z",fill:e}))},4721:(e,t,n)=>{n.d(t,{q:()=>h});var i=n(49231),a=n(4798),r=n(80882),o=n(12990),l=n(96130),d=n(21136),s=n(44637),c=n(99627),u=n(63039),m=n(45321),g=n(29221),p=n(78225);const y=({hideLogo:e=!1,align:t="center",fixSubmitButtonOverflowBottomPadding:n=!1,...a})=>{var r;const y=[g.B.bad,g.B.ok,g.B.good],[h,f]=i.useState(null),[S,v]=i.useState(""),[b,k]=i.useState(!1),[_,w]=i.useState(!1);let x;return x=_&&!1!==a.showPostSubmitScreen?i.createElement("div",{"data-grammarly-part":"surveys-feedback-form-thank-you",...(0,c.Sh)(u.feedbackFormContainer,u.feedbackFormContainerAlignCenter)},i.createElement("div",{className:u.feedbackFormSuccessMessageTextContainer},i.createElement("div",{className:u.feedbackFormSuccessMessageIcon}),i.createElement("div",{className:u.feedbackFormSuccessMessageTitle},"Thank you!"),i.createElement("div",{className:u.feedbackFormSuccessMessageSubtitle},"Your feedback helps us improve.")),i.createElement(o.z,{className:u.feedbackFormSubmitButton,kind:"success",type:"submit",onClick:a.onClose},"Done"),n?i.createElement("div",{className:u.feedbackFormSubmitButtonFixOverflowBottomPadding},i.createElement("div",{className:u.feedbackFormSubmitButtonFixOverflowBottomPaddingChild})):null):i.createElement("div",{"data-grammarly-part":"surveys-feedback-form-fields",...(0,c.Sh)(u.feedbackFormContainer,"center"===t?u.feedbackFormContainerAlignCenter:null)},i.createElement("div",{className:u.feedbackFormFields},i.createElement(p.V,{isEnabled:!e}),a.hideTitle?null:i.createElement("div",{...(0,c.Sh)(u.feedbackFormTitle,a.compactDisplay?u.compact:null)},a.title||i.createElement("span",null,"How do you like ",i.createElement("br",null)," Grammarly?")),a.withScore?i.createElement(i.Fragment,null,i.createElement(l.E,{ariaLabel:"Feedback Score",options:y.map((e=>({value:e,render(){let t,n;return e===g.B.bad?(t=m.feedbackFormOptionIconDisheartening,n="I dislike it"):e===g.B.ok?(t=m.feedbackFormOptionIconNeutral,n="Itâ€™s OK"):(t=t=m.feedbackFormOptionIconSmiling,n="I like it"),i.createElement("div",{className:m.feedbackFormOption},i.createElement("div",{...(0,c.Sh)(m.feedbackFormOptionIcon,t)}),i.createElement("div",null,n))}}))),onChange:f,...(0,c.Sh)(u.feedbackFormScore,a.compactDisplay?u.compact:null)}),a.hideTextBoxTitle?null:i.createElement("div",{className:u.feedbackFormTextBoxTitle},"Anything we can improve?")):null,i.createElement(d.z,{onChange:v,placeholder:a.placeholderText||"Your thoughts here",ariaLabel:"Feedback Text",...(0,c.Sh)(u.feedbackFormTextBox,a.compactDisplay?u.compact:null)}),a.domain?i.createElement(i.Fragment,null,a.hideDomainHelpText?null:i.createElement("div",{className:u.feedbackFormShareDomainTitle},"Help improve Grammarly by sharing the domain youâ€™re on:"),i.createElement(s.J,{labelId:"feedback-form-share-domain-checkbox",onChange:k,className:u.feedbackFormShareDomainCheckbox},"Include the domain ",i.createElement("b",null,a.domain)," with my feedback")):null),i.createElement(o.z,{className:u.feedbackFormSubmitButton,kind:null!==(r=a.submitButtonKind)&&void 0!==r?r:"success",type:"submit",disabled:a.withScore?!h:!S,onClick:()=>{var e,t;a.withScore&&h?(null===(e=a.onSubmit)||void 0===e||e.call(a,{score:h,text:S,domain:b?a.domain:void 0}),w(!0)):!a.withScore&&S&&(null===(t=a.onSubmit)||void 0===t||t.call(a,{text:S,domain:b?a.domain:void 0}),w(!0))}},"Submit"),n?i.createElement("div",{className:u.feedbackFormSubmitButtonFixOverflowBottomPadding},i.createElement("div",{className:u.feedbackFormSubmitButtonFixOverflowBottomPaddingChild})):null),i.createElement("div",{style:a.style,"data-grammarly-part":"surveys-feedback-form",role:"region","aria-label":"Provide feedback"},x)},h=({experimentClient:e,...t})=>e.isGateEnabled(a.K.ExtensionA11yKeyboardNavigation)?i.createElement(r.b,{...t}):i.createElement(y,{...t})},78225:(e,t,n)=>{n.d(t,{V:()=>o});var i=n(49231),a=n(63039),r=n(29357);const o=e=>e.isEnabled?i.createElement(r.T,{type:"mini",size:26,className:a.feedbackFormLogoLine}):null},80882:(e,t,n)=>{n.d(t,{b:()=>w});var i=n(49231),a=n(99627),r=n(12990),o=n(63039);const l=({fixSubmitButtonOverflowBottomPadding:e,className:t,...n})=>i.createElement(i.Fragment,null,i.createElement(r.z,{...n,className:null!=t?t:o.feedbackFormSubmitButton},n.children),i.createElement(d,{isEnabled:e})),d=e=>e.isEnabled?i.createElement("div",{className:o.feedbackFormSubmitButtonFixOverflowBottomPadding},i.createElement("div",{className:o.feedbackFormSubmitButtonFixOverflowBottomPaddingChild})):null,s=e=>i.createElement("div",{"data-grammarly-part":"surveys-feedback-form-thank-you",...(0,a.Sh)(o.feedbackFormContainer,o.feedbackFormContainerAlignCenter)},i.createElement("div",{className:o.feedbackFormSuccessMessageTextContainer},i.createElement("div",{className:o.feedbackFormSuccessMessageIcon}),i.createElement("div",{className:o.feedbackFormSuccessMessageTitle},"Thank you!"),i.createElement("div",{className:o.feedbackFormSuccessMessageSubtitle},"Your feedback helps us improve.")),i.createElement(l,{type:"button",kind:"success",onClick:e.onClose},"Done"));var c=n(21136),u=n(44637);const m=e=>e.domain?i.createElement(i.Fragment,null,e.withHelpText&&i.createElement("div",{className:o.feedbackFormShareDomainTitle},"Help improve Grammarly by sharing the domain youâ€™re on:"),i.createElement(u.J,{checked:e.checked,labelId:"feedback-form-share-domain-checkbox",onChange:e.onChange,className:o.feedbackFormShareDomainCheckbox},"Include the domain ",i.createElement("b",null,e.domain)," with my feedback")):null;var g=n(78225);const p=e=>{var t;if(!e.isEnabled)return null;const n=null!==(t=e.title)&&void 0!==t?t:i.createElement("span",null,"How do you like ",i.createElement("br",null)," Grammarly?");return i.createElement("h3",{...(0,a.Sh)(o.feedbackFormTitle,e.isCompact&&o.compact)},n)};var y=n(79992),h=n(96130),f=n(29221),S=n(45321);const v=e=>{const t=[f.B.bad,f.B.ok,f.B.good];return e.isEnabled?i.createElement(i.Fragment,null,i.createElement(h.E,{ariaLabel:"Feedback Score",options:t.map((e=>({value:e,render:()=>i.createElement("div",{className:S.feedbackFormOption},i.createElement("div",{...(0,a.Sh)(S.feedbackFormOptionIcon,b(e))}),i.createElement("div",null,function(e){switch(e){case f.B.bad:return"I dislike it";case f.B.ok:return"Itâ€™s OK";case f.B.good:return"I like it";default:(0,y.vE)(e)}}(e)))}))),onChange:e.onChange,...(0,a.Sh)(o.feedbackFormScore,e.compactDisplay&&o.compact)}),!e.hideTextBoxTitle&&i.createElement("div",{className:o.feedbackFormTextBoxTitle},"Anything we can improve?")):null};function b(e){switch(e){case f.B.bad:return S.feedbackFormOptionIconDisheartening;case f.B.ok:return S.feedbackFormOptionIconNeutral;case f.B.good:return S.feedbackFormOptionIconSmiling;default:(0,y.vE)(e)}}const k=e=>{var t,n,r,d;const[s,u]=i.useState(null),[y,h]=i.useState(""),[f,S]=i.useState(null!==(t=e.domainSharedByDefault)&&void 0!==t&&t);return i.createElement("form",{"data-grammarly-part":"surveys-feedback-form-fields",...(0,a.Sh)(o.feedbackFormContainer,"center"===e.align&&o.feedbackFormContainerAlignCenter)},i.createElement("div",{className:o.feedbackFormFields},i.createElement(g.V,{isEnabled:!e.hideLogo}),i.createElement(p,{isEnabled:!e.hideTitle,title:e.title,isCompact:null!==(n=e.compactDisplay)&&void 0!==n&&n}),i.createElement(v,{isEnabled:e.withScore,compactDisplay:e.compactDisplay,hideTextBoxTitle:e.hideTextBoxTitle,onChange:u}),i.createElement(c.z,{onChange:h,placeholder:null!==(r=e.placeholderText)&&void 0!==r?r:"Your thoughts here",ariaLabel:"Feedback Text",iframeTitle:"Feedback text field",...(0,a.Sh)(o.feedbackFormTextBox,e.compactDisplay&&o.compact)}),i.createElement(m,{domain:e.domain,checked:e.domainSharedByDefault,withHelpText:!e.hideDomainHelpText,onChange:S})),i.createElement(l,{type:"submit",kind:null!==(d=e.submitButtonKind)&&void 0!==d?d:"success",disabled:e.withScore?!s:!y,fixSubmitButtonOverflowBottomPadding:e.fixSubmitButtonOverflowBottomPadding,onClick:t=>{t.preventDefault();const n=f?e.domain:void 0;e.withScore&&s?e.onSubmit({score:s,text:y,domain:n}):!e.withScore&&y&&e.onSubmit({text:y,domain:n})}},"Submit"))};var _=n(84602);const w=({hideLogo:e=!1,align:t="center",fixSubmitButtonOverflowBottomPadding:n=!1,showPostSubmitScreen:a=!0,...r})=>{const[o,l]=i.useState(!1),d=o&&a;return i.createElement("div",{style:r.style,"data-grammarly-part":"surveys-feedback-form",role:"region","aria-label":"Provide feedback","aria-live":"polite"},d?i.createElement(s,{fixSubmitButtonOverflowBottomPadding:n,onClose:r.onClose}):i.createElement(k,{...r,hideLogo:e,align:t,fixSubmitButtonOverflowBottomPadding:n,onSubmit:e=>{r.withScore?((0,_.n8)(e),r.onSubmit(e)):((0,_.TY)(e),r.onSubmit(e)),l(!0)}}))}},29221:(e,t,n)=>{var i;n.d(t,{B:()=>i}),function(e){e.bad="bad",e.ok="ok",e.good="good"}(i||(i={}))},84602:(e,t,n)=>{function i(e){return"score"in e}function a(e){if(!i(e))throw new Error("Received unexpected feedback form data without score")}function r(e){if(i(e))throw new Error("Received unexpected feedback form data with score")}n.d(t,{TY:()=>r,dK:()=>i,n8:()=>a})},98544:(e,t,n)=>{var i=n(42663),a=n(2963)(i);a.push([e.id,"._z3YOv-textBox{font-family:Inter,sans-serif;font-style:normal;font-weight:normal;color:#0e101a;font-size:14px;line-height:21px;font-feature-settings:'ss03' on;background:#f9faff;border:1px solid #e7e9f5;box-sizing:border-box;border-radius:4px;padding:10px 8px;overflow-y:auto;cursor:text;width:100%;height:100%;}._z3YOv-textBox:empty:before{font-feature-settings:'ss03' on;font-family:Inter,sans-serif;font-style:normal;font-weight:normal;color:#6d758d;font-size:14px;line-height:21px;content:attr(data-placeholder)}",""]),a.locals={textBox:"_z3YOv-textBox"},e.exports=a},70402:e=>{e.exports={getCitationButton:"TJqK_",disabledGetCitationButton:"OUnK0",spin:"gtb07"}},97424:e=>{e.exports={citationFormInput:"xEI8b",validationFailed:"y3K5S",citationFormContainer:"ciO2T",citationFormFullWidthItem:"adkKD",citationFormHalfWidthItem:"wM8KF",citationFormAutoWidthItem:"UC1qT",citationFormCombinedInputContainer:"UB_fF",flexWrapDelimiter:"lgYEX",verticallySeparatedButton:"EBtwA",citationFormLabel:"PTjcO",emptyAuthorsInputLabel:"UIWog",removeButton:"eDoCo",monthDropdownLabel:"CQb_B",monthDropdownContainer:"RPcgD",monthDropdownList:"XkRyQ",monthDropdownListContent:"uP_5p"}},11951:e=>{e.exports={citationPreviewContainer:"eHG3J",citationFormsContainer:"EdADf",flexSeparator:"SPaBA",verticallySeparatedButton:"Wcd0d",actionButtonsContainer:"j7PGz"}},52108:e=>{e.exports={citationGButtonContainer:"jW6zC",citationGButtonSettings:"Z3z9c",citationGButtonSettingsLeft:"Q2AWV",visible:"hCj_U",hidden:"DskjF",citationGButtonSettingsRight:"Akjks",citationGButtonSettingsContainer:"u83J9",citationGButtonSettingsContainerLeft:"QnTvU",citationGButtonSettingsContainerRight:"Eb0bS",settingsIcon:"quLN3",disableMenuText:"Ten_A",dropdownContainer:"i6QYE",dropdownContainerLeft:"doIDs",dropdownContainerRight:"E2gr6",dropdownContainerBottom:"c2KSI",dropdownContainerTop:"wb14t",spin:"cLcFF"}},71556:e=>{e.exports={citationContainer:"HG2vG",citationBody:"OfipI",citationFooter:"SXPDa",errorState:"c9Dk4",fullCitationPreview:"bpkVs",fullCitationText:"gYcOY",buttonsContainer:"Xrrfg",buttonsGroup:"_26_Ju",moreButton:"AdRL2",moreIcon:"oLHdU",copyButton:"ruFrp",citationText:"zy8b9",reviewMissingDot:"U3yPs",reviewMissing:"e4kdK",missingIconContainer:"ivQPa",missingItemsContainer:"Pes95",missingItem:"eJ0Bs"}},44040:e=>{e.exports={styleTypeSelectorContainer:"gTqAM",citationBuilderCloseButton:"CGpI8",citationBuilderWrapper:"SDOXs",citationBuilderWrapperHeader:"mbUFb",citationBuilderWrapperContent:"xyaJS",spin:"Kz_zR"}},10583:e=>{e.exports={actions_hovered:"H0KY7",header:"krAQX",citationBuilderHeader:"zQ_WB",draggableWrapper:"ZLfwG",draggable:"aaK2h",headerActions:"NW_wC",headerActionBtnProofitIcon:"doZbO",headerActionBtnGoalsIcon:"jFXVN",logoscore_fadein:"Fye6Z",fadein:"LrmXc",logoscore_fadeout:"LvNOO",fadeout:"k5MPg",logo_score:"jHlY6",citationBuilderHeaderBottom:"Wq9Bu",citationBuilderHeaderTop:"T0w8C",headerSeparator:"jyXHU",backIcon:"Ym1B0",title:"jBHDX",headerContent:"qWLF2",spin:"qxE7o"}},65210:e=>{e.exports={dropdownContainer:"rbVgb",settingsButton:"EYG8l"}},22067:e=>{e.exports={missingInformationHeader:"z0rlU"}},59577:e=>{e.exports={container:"PhVhU",containerLeft:"Fq4Vh",containerRight:"CIeiA",baseGrid:"qD0vI",bottomLeft:"XFcFy",bottomRight:"vEzpC",top:"jy8qk",notificationWrapper:"CFl7s",contentWrapper:"p7tSh"}},52745:e=>{e.exports={onboardingContent:"n12f8",onboardingTitle:"VlqXr",onboardingGotIt:"RK9xl",citationOnboardingCloseButton:"IS16Q"}},21222:e=>{e.exports={selectorButton:"h1AP1",arrowIcon:"UmkUb",selectorButtonLabel:"Ml3GV",selectorPadding:"MAfbF",dropdownContainer:"G4Lw1",styleButtonGroup:"CyOts",styleButton:"rQBK5"}},85389:e=>{e.exports={citationBuilderMainContainer:"JApPF"}},83386:e=>{e.exports={feedbackButtonMediumIcon:"hiv9G",feedbackButtonSmallIcon:"hZk_v",spin:"YouEU"}},46922:e=>{e.exports={settingsButtonMediumIcon:"jerdC",settingsButtonSmallIcon:"PlOGe",spin:"MH8w4"}},14482:e=>{e.exports={checkboxContainer:"Te37e",checkbox:"mFHkX",checkboxDS:"DdH2q",checkboxChecked:"JhHnz",checkboxCheckmark:"zShXt",spin:"tww6q"}},17345:e=>{e.exports={radioGroup:"KAzfW",radioGroupOption:"WkjDU",radioGroupOptionSelected:"onilo"}},63039:e=>{e.exports={feedbackFormContainer:"kjElf",feedbackFormContainerAlignCenter:"hkEx2",feedbackFormFields:"Ua5wJ",feedbackFormTitle:"GnQ_a",feedbackFormTextBoxTitle:"kWEW0",feedbackFormLogoLine:"osGQI",compact:"b7yYp",feedbackFormScore:"ZOSRK",feedbackFormTextBox:"l8New",feedbackFormShareDomainTitle:"Qbnj_",feedbackFormShareDomainCheckbox:"VBCx1",feedbackFormSubmitButton:"tYYGU",feedbackFormSubmitButtonFixOverflowBottomPadding:"Opd8X",feedbackFormSubmitButtonFixOverflowBottomPaddingChild:"QKLT7",feedbackFormSuccessMessageTextContainer:"ARBzt",feedbackFormSuccessMessageIcon:"kJIzg",feedbackFormSuccessMessageTitle:"iXQnf",feedbackFormSuccessMessageSubtitle:"Ydufo",spin:"Vv6WG"}},45321:e=>{e.exports={feedbackFormOption:"sp8vS",feedbackFormOptionIcon:"eH6DL",feedbackFormOptionIconDisheartening:"DhaWh",feedbackFormOptionIconNeutral:"BS_8d",feedbackFormOptionIconSmiling:"dUZNd",spin:"uouSO"}}}]);