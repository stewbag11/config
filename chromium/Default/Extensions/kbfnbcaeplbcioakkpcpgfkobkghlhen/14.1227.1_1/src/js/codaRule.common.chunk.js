(self.webpackChunk=self.webpackChunk||[]).push([[6011],{99264:(e,t,i)=>{i.d(t,{Ao:()=>l,CW:()=>r,Hq:()=>d,Vt:()=>s,YH:()=>n,ZD:()=>a,Zw:()=>o,wE:()=>c});const n={zIndex:i(50899).op,position:"absolute",top:0,left:0,width:"100%",pointerEvents:"all"},o="vBarsFeedbackForm",a="grammarly-extension-vBars-feedback-form",r="vBars",l="grammarly-extension-vBars",s="vBarCard",d="grammarly-extension-vBar-cad",c="vBarCardPositionReference"},9696:(e,t,i)=>{i.r(t),i.d(t,{Coda:()=>n,getHideGrammarlyWhenTextFieldIsUnderAnimationSub:()=>z,getInjectionLayoutForGButtonForDocument:()=>H});var n,o=i(20715),a=i(64965),r=i(90049),l=i(65647),s=i(60165),d=i(55446),c=i(78488),u=i(60841),p=i(83780),m=i(18615),f=i(39620),g=i(25770),b=i(99264),h=i(4798),v=i(57935),C=i(80831),x=i(70874),y=i(16703),E=i(87234),S=i(38684),T=i(72779),w=i(65384),A=i(82133),B=i(75629),k=i(59898),F=i(21220),G=i(87086),R=i(6088),I=i(5614),P=i(37094),U=i(23070),W=i(55793);!function(e){function t({changes:e,deltaChange:t}){return e.length>0||t.delta.ops.length>0}function i(i){var n;const o=(0,G.B)(i.field),a=i.experimentClient.isGateEnabled(h.K.CodaUseCSSTransformTranslateForUnderlinePosition);let r;if(i.experimentClient.isGateEnabled(h.K.CodaPositionGbuttonIntoFixedContainer)&&"editable"===i.field.getAttribute("data-coda-ui-id")){const e=null===(n=document.querySelector('[data-coda-ui-id="help-button"]'))||void 0===n?void 0:n.parentElement;e&&(r=H(e))}const d=[],c=g.h.create(!1),u=i.experimentClient.isGateEnabled(h.K.CodaHideUnderlineWhenAnimated),p=i.field.firstElementChild,m=x.S.sec1.pipe((0,l.U)((()=>{var e;for(const t of document.querySelectorAll("span[role=button]"))if("Suggesting edits"===(null===(e=t.textContent)||void 0===e?void 0:e.trim()))return!0;return!1})),(0,s.x)(((e,t)=>e===t)));return{createLayout:()=>(d.push(m.subscribe(f.wW(c))),u&&p&&d.push(z(p)),new S.A7(i.field,{...r,createGbuttonShiftBehavior:()=>c.view((e=>e?{top:self.innerHeight,left:self.innerWidth}:{top:0,left:0})),getFieldSize:(e,t)=>{if(c.get())return{width:0,height:0};const i=a&&e.firstElementChild?(0,T.Bi)(self.getComputedStyle(e.firstElementChild)):void 0;return{width:t.width-((null==i?void 0:i.x)||0),height:t.height-((null==i?void 0:i.y)||0)}}})),createSelectionSource:()=>o,createTextObserver:()=>new I.j(i.field,w.k.fromDiff,o,void 0,e.createTextMapWithoutCodeBlocks,t),extraCondition:()=>C.T.isSupported(),createReplacementService:e=>new A.V0({eventTarget:i.field,textObserver:e,asyncReplaceDelay:100,deletionEvent:"paste",experimentClient:i.experimentClient}),validationRules:[...k.u,(0,F.Uo)(20,135)],onDispose:()=>{d.forEach((e=>e.unsubscribe()))}}}e.isNonEmptyChange=t,e.createTextMapWithoutCodeBlocks=e=>R.Z.create(e,{andFilterNode:(e,t)=>!e.classList.contains("kr-code-block")}),e.getContentIntegrationConfigure=i,e.content=B.T.contentEditable("CodaIO.content",i),e.page=(0,P.$W)({name:"coda",domain:W.LF},[e.content,U.k.iframeHostRule,B.T.textarea("generic",(e=>{const t=e.experimentClient.isGateEnabled(h.K.CodaHideGbuttonForDocumentTitle);return{gbuttonMinimizeState:(0,o.of)(!0),createLayout:()=>new S.A7(e.field,{injectIntegrationRoot:e=>{const i=e.editorElement.getAttribute("data-coda-ui-id");t&&i&&["documentTitle"].includes(i)&&"gbutton"===e.grammarlyPart||(0,S.Ry)(e)}}),validationRules:[...k.u,(0,F.Uo)(20,45),{ruleName:"skipTableTitle",match:(e,t)=>"tableTitle"!==t.field.getAttribute("data-coda-ui-id")}]}}))])}(n||(n={}));const H=e=>({customGbuttonPositioning:{injectionElement:e,injectionStyle:{top:"-5px",right:"0px"},createPositionStyleBehavior:e=>e.pipe(l.U((e=>({position:"absolute",width:"auto",height:"auto",pointerEvents:"all",right:-e.left+"px",bottom:-e.top+"px"})))),calculateMetrics:(e,t,i)=>{const n=E.p8.create({top:i.top+-5,left:e.size.width-i.left});return{offset:n,page:E.Cv.fromOffset(n,E.Cv.fromClient(e.client,{top:t.scrollY,left:t.scrollX}),{top:0,left:0}),client:E.Ir.create(E.E9.plus(e.client,n)),effectivePadding:{top:0,right:0,bottom:0,left:0},size:y.V.gButtonMaxSize}}}}),z=e=>{const t=()=>[...document.getElementsByTagName(S.Mf),...document.getElementsByTagName(b.Ao)],i="data-temp-style";let n=!1;return(0,a.R)(e,"animationstart").pipe((0,d.h)((()=>!n)),(0,c.b)((()=>{n=!0;for(const e of t()){const t=e.getAttribute("style");t&&e.setAttribute(i,t),e.setAttribute("style","display: none")}})),(0,u.w)((()=>(0,r.T)((0,a.R)(e,"animationend").pipe((0,p.g)(v.E0)),x.S.sec2).pipe((0,m.P)())))).subscribe((()=>{for(const e of t()){const t=e.getAttribute(i);t?(e.setAttribute("style",t),e.removeAttribute(i)):e.removeAttribute("style")}n=!1}))}}}]);