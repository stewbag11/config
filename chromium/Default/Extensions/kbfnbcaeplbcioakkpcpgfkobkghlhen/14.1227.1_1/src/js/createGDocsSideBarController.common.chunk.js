(self.webpackChunk=self.webpackChunk||[]).push([[7102],{16205:(e,t,i)=>{var s=i(55869),r="chrome-extension://__MSG_@@extension_id__/",a="moz-extension://__MSG_@@extension_id__/",n="safari-web-extension://__MSG_@@extension_id__/",o=self.GR_RESOURCE_ROOT||r,l=self.GR_RESOURCE_ROOT||a,c=self.GR_RESOURCE_ROOT||n;e.exports={__css:s.toString().replace(new RegExp(r,"g"),o).replace(new RegExp(a,"g"),l).replace(new RegExp(n,"g"),c),...s.locals}},99694:(e,t,i)=>{i.d(t,{B2:()=>v,E_:()=>f});var s=i(46504),r=i(38569),a=i(49231),n=i(90023),o=i(99627),l=i(96985),c=i(88836),d=i(75787),h=i(74864),u=i(14167),p=i(34903);function g(e){return Boolean(e)?function(t){return"".concat(e,"/").concat(t)}:n.yR}var m=function(e){return a.createElement(p.Z,(0,r._)((0,s._)({},_(e)),{value:e.value,onChange:e.onChange}))},v=function(e){return a.createElement(m,(0,r._)((0,s._)({},e),{nodeType:"input"}))},f=function(e){return a.createElement(m,(0,r._)((0,s._)({},e,(0,o.Sh)(w.textArea,e.className)),{nodeType:"textarea"}))},_=function(e){return(0,s._)({"data-name":(i=e.name,r=a.useContext(c.f.Context).name,void 0===i?i:"string"==typeof i?g(r)(i):i.view(g(r))),"data-block-extension":e.blockExtension,mount:(t=e.autofocus,!0===t?function(e){return e&&requestAnimationFrame((function(){return e.focus()}))}:void 0),styleType:p.Z.Type.P1,nodeType:e.nodeType,placeholder:e.placeholder,onFocus:e.onFocus,onBlur:e.onBlur,onKeyPress:e.onKeyPress},(0,o.Sh)(w.inputField,e.className));var t,i,r},b={width:d.ux.percent(100),outline:"none",border:"1px solid ".concat(h.xO),borderRadius:d.ux.rem(u.fx),background:l.Il.CoreNeutral0,$nest:{"&::placeholder":{color:h.FW,opacity:1},"&:focus":{borderColor:l.Il.CoreBlue50}}},w=d.ux.stylesheet({inputField:[b],textArea:[{resize:"none"}]})},11959:(e,t,i)=>{i.d(t,{y:()=>r});var s=i(81259);const r=e=>"test"===e.getTreatment(s.p.GrammarlyPro)},90342:(e,t,i)=>{i.d(t,{O:()=>a});var s=i(90023),r=i(43636);function a(e){return(0,s.zG)(e,r.H6("gdocsPlagiarismButtonClick","plagiarismAlertEditToLook"))}},62566:(e,t,i)=>{i.d(t,{u:()=>c});var s=i(73964),r=i(39756),a=i(90731),n=i(25770);const o={priority:s.P.Priority.low,timeout:s.P.DefaultTimeout,position:s.P.Position.bottomRight,viewType:s.P.ViewType.standard};var l;!function(e){e.createFactory=function(){return{referenceCopied:r.r.createBuilder().build(o)}}}(l||(l={}));const c=new a.y(n.h.create([]),l.createFactory(),1,5e3)},86952:(e,t,i)=>{i.d(t,{T:()=>a});var s=i(49231),r=i(22133);function a(){return s.createElement("div",{"data-grammarly-part":"plagiarism-footer-loader",style:{display:"flex",justifyItems:"flex-start",gap:"8px"}},s.createElement("div",null,r.m),s.createElement("p",{style:{fontSize:"12px",color:"#6D758D"}},"One moment, checking updated text ..."))}},22133:(e,t,i)=>{i.d(t,{m:()=>r});var s=i(49231);const r=s.createElement("svg",{width:"28",height:"36",viewBox:"0 0 28 36",fill:"none",xmlns:"http://www.w3.org/2000/svg"},s.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M13.753 19.0813C22.1893 19.0134 23.798 29.1843 24.0765 31.8872C24.1134 32.2449 23.8297 32.54 23.4701 32.54L4.0362 32.54C3.67648 32.54 3.39275 32.245 3.43014 31.8872C3.71078 29.2023 5.32414 19.1492 13.753 19.0813ZM13.753 16.3491C17.5002 16.4275 24.1112 10.446 24.1307 2.89034C24.1362 0.755411 22.4849 1.34762 20.1116 2.19872C18.4408 2.79791 16.4122 3.52541 14.352 3.52001C12.1688 3.51428 9.95019 2.84258 8.08428 2.27767C5.36044 1.45302 3.38826 0.855938 3.37536 2.89034C3.33347 9.50154 10.0059 16.2707 13.753 16.3491Z",fill:"#EDF5FF"}),s.createElement("path",{d:"M13.753 19.0813L13.7555 19.3961L13.753 19.0813ZM24.1307 2.89034L24.4455 2.89115L24.1307 2.89034ZM13.753 16.3491L13.7596 16.0343L13.753 16.3491ZM20.1116 2.19872L20.0054 1.90239L20.1116 2.19872ZM14.352 3.52001L14.3528 3.20519L14.352 3.52001ZM8.08428 2.27767L7.99306 2.57898L8.08428 2.27767ZM3.37536 2.89034L3.06056 2.88834L3.37536 2.89034ZM3.43014 31.8872L3.74325 31.9199L3.43014 31.8872ZM24.3897 31.855C24.2491 30.4902 23.7722 27.2249 22.2533 24.3001C20.7297 21.3661 18.1289 18.7312 13.7504 18.7665L13.7555 19.3961C17.8134 19.3634 20.2352 21.7801 21.6946 24.5903C23.1587 27.4097 23.6255 30.5813 23.7634 31.9195L24.3897 31.855ZM4.0362 32.8549L23.4701 32.8549L23.4701 32.2252L4.0362 32.2252L4.0362 32.8549ZM13.7504 18.7665C9.37936 18.8017 6.78114 21.4381 5.25692 24.3571C3.73746 27.2671 3.25878 30.4984 3.11703 31.8545L3.74325 31.9199C3.88214 30.5911 4.35046 27.4534 5.81505 24.6486C7.27487 21.8528 9.69774 19.4288 13.7555 19.3961L13.7504 18.7665ZM23.8159 2.88953C23.8064 6.57564 22.1878 9.88931 20.1027 12.2753C19.0609 13.4675 17.9086 14.4209 16.7943 15.0697C15.6752 15.7212 14.6175 16.0523 13.7596 16.0343L13.7465 16.6638C14.7622 16.6851 15.9361 16.2979 17.1111 15.6138C18.2908 14.927 19.495 13.9275 20.5768 12.6896C22.7388 10.2156 24.4355 6.76071 24.4455 2.89115L23.8159 2.88953ZM20.2179 2.49506C20.8138 2.28135 21.3522 2.08842 21.8294 1.94983C22.3101 1.81025 22.7019 1.73417 23.0077 1.73954C23.3064 1.74477 23.4833 1.82579 23.5961 1.96239C23.719 2.11124 23.8172 2.38657 23.8159 2.88953L24.4455 2.89115C24.447 2.32665 24.3408 1.87541 24.0815 1.56144C23.8121 1.23523 23.4288 1.11719 23.0187 1.11C22.6157 1.10294 22.1501 1.20107 21.6538 1.34518C21.1541 1.49029 20.5961 1.69055 20.0054 1.90239L20.2179 2.49506ZM14.3512 3.83482C16.4756 3.8404 18.5559 3.0911 20.2179 2.49506L20.0054 1.90239C18.3258 2.50472 16.3488 3.21043 14.3528 3.20519L14.3512 3.83482ZM7.99306 2.57898C9.85098 3.14147 12.114 3.82895 14.3512 3.83482L14.3528 3.20519C12.2236 3.19961 10.0494 2.54369 8.1755 1.97636L7.99306 2.57898ZM3.69017 2.89233C3.6931 2.42976 3.80694 2.18451 3.95006 2.04891C4.09608 1.91056 4.33403 1.82756 4.71395 1.82668C5.09238 1.82579 5.56475 1.90666 6.1258 2.04507C6.68437 2.18286 7.30993 2.37216 7.99306 2.57898L8.1755 1.97636C7.49671 1.77086 6.8543 1.57628 6.27661 1.43376C5.70139 1.29186 5.16918 1.19598 4.71248 1.19705C4.25727 1.19811 3.82951 1.29575 3.517 1.59185C3.2016 1.8907 3.06407 2.33371 3.06056 2.88834L3.69017 2.89233ZM13.7596 16.0343C12.9064 16.0165 11.8452 15.6128 10.7164 14.8789C9.59395 14.149 8.43258 13.1106 7.38401 11.8666C5.28175 9.37254 3.66986 6.09768 3.69017 2.89233L3.06056 2.88834C3.03897 6.2942 4.74232 9.70951 6.90259 12.2724C7.98527 13.5569 9.19198 14.6387 10.3732 15.4067C11.548 16.1706 12.7261 16.6425 13.7465 16.6638L13.7596 16.0343ZM4.0362 32.2252C3.85034 32.2252 3.7266 32.0793 3.74325 31.9199L3.11703 31.8545C3.05889 32.4107 3.50263 32.8549 4.0362 32.8549L4.0362 32.2252ZM23.7634 31.9195C23.7798 32.0792 23.6556 32.2252 23.4701 32.2252L23.4701 32.8549C24.0037 32.8549 24.4469 32.4106 24.3897 31.855L23.7634 31.9195Z",fill:"#1F243C"}),s.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M19.1703 13.6849C17.7789 14.966 16.2896 15.8447 14.9816 16.1887V19.1477C23.5373 20.1649 24.1307 32.5404 24.1307 32.5404H3.37537C3.37537 32.5404 3.96598 20.3668 12.463 19.1749V16.1037C11.281 15.707 9.95321 14.852 8.68529 13.6849C9.94457 12.3355 16.5556 12.3355 19.1703 13.6849Z",fill:"#F9EA9E"}),s.createElement("path",{d:"M14.9816 16.1887L14.9015 15.8842L14.6667 15.946V16.1887H14.9816ZM19.1703 13.6849L19.3836 13.9165L19.7148 13.6116L19.3147 13.4051L19.1703 13.6849ZM14.9816 19.1477H14.6667V19.4273L14.9444 19.4603L14.9816 19.1477ZM24.1307 32.5404V32.8552H24.461L24.4452 32.5253L24.1307 32.5404ZM3.37537 32.5404L3.06092 32.5252L3.04491 32.8552H3.37537V32.5404ZM12.463 19.1749L12.5068 19.4867L12.7779 19.4487V19.1749H12.463ZM12.463 16.1037H12.7779V15.8772L12.5632 15.8052L12.463 16.1037ZM8.68529 13.6849L8.45513 13.4701L8.23887 13.7018L8.47208 13.9165L8.68529 13.6849ZM15.0616 16.4931C16.4336 16.1324 17.9668 15.2209 19.3836 13.9165L18.9571 13.4533C17.5909 14.7111 16.1457 15.557 14.9015 15.8842L15.0616 16.4931ZM15.2964 19.1477V16.1887H14.6667V19.1477H15.2964ZM24.1307 32.5404C24.4452 32.5253 24.4452 32.5252 24.4452 32.525C24.4452 32.5249 24.4451 32.5246 24.4451 32.5244C24.4451 32.5238 24.4451 32.5231 24.445 32.5222C24.4449 32.5205 24.4448 32.5179 24.4446 32.5147C24.4443 32.5081 24.4438 32.4987 24.443 32.4863C24.4416 32.4617 24.4393 32.4257 24.436 32.379C24.4294 32.2855 24.4186 32.1494 24.4019 31.9764C24.3684 31.6303 24.311 31.1363 24.2151 30.5408C24.0236 29.3511 23.6777 27.7504 23.059 26.1142C21.8265 22.8542 19.4729 19.3646 15.0187 18.8351L14.9444 19.4603C19.0459 19.9479 21.267 23.1547 22.4701 26.3368C23.0692 27.9216 23.4064 29.4784 23.5935 30.6409C23.687 31.2215 23.7428 31.7023 23.7752 32.037C23.7914 32.2043 23.8017 32.3351 23.8079 32.4234C23.8111 32.4676 23.8132 32.5012 23.8145 32.5234C23.8152 32.5346 23.8156 32.5429 23.8159 32.5482C23.816 32.5509 23.8161 32.5529 23.8162 32.5541C23.8162 32.5547 23.8163 32.5551 23.8163 32.5554C23.8163 32.5555 23.8163 32.5555 23.8163 32.5556C23.8163 32.5556 23.8163 32.5555 24.1307 32.5404ZM3.37537 32.8552H24.1307V32.2256H3.37537V32.8552ZM12.4193 18.8632C7.99959 19.4831 5.66316 22.9612 4.43842 26.1931C3.82383 27.8149 3.48002 29.3957 3.28966 30.5693C3.19439 31.1567 3.13732 31.6435 3.10402 31.9844C3.08736 32.1549 3.07664 32.289 3.07006 32.381C3.06677 32.427 3.06451 32.4624 3.06306 32.4867C3.06234 32.4988 3.06182 32.5082 3.06147 32.5146C3.0613 32.5178 3.06117 32.5203 3.06108 32.5221C3.06103 32.523 3.061 32.5237 3.06097 32.5242C3.06096 32.5244 3.06094 32.5247 3.06094 32.5248C3.06093 32.525 3.06092 32.5252 3.37537 32.5404C3.68981 32.5557 3.68981 32.5557 3.68981 32.5558C3.68981 32.5557 3.68981 32.5557 3.68982 32.5556C3.68983 32.5553 3.68985 32.5549 3.68988 32.5543C3.68994 32.5531 3.69004 32.5512 3.69018 32.5486C3.69047 32.5433 3.69092 32.5352 3.69158 32.5242C3.69288 32.5024 3.69498 32.4693 3.69809 32.4259C3.7043 32.339 3.71457 32.2103 3.73066 32.0456C3.76285 31.7161 3.81831 31.2426 3.91117 30.6701C4.09709 29.5239 4.432 27.9868 5.02719 26.4162C6.22203 23.2632 8.42943 20.0586 12.5068 19.4867L12.4193 18.8632ZM12.1482 16.1037V19.1749H12.7779V16.1037H12.1482ZM8.47208 13.9165C9.76014 15.1022 11.1254 15.9868 12.3629 16.4021L12.5632 15.8052C11.4366 15.4271 10.1463 14.6019 8.8985 13.4533L8.47208 13.9165ZM19.3147 13.4051C17.9391 12.6952 15.5709 12.358 13.4195 12.358C12.3366 12.358 11.2887 12.4433 10.425 12.6172C9.99323 12.7042 9.60067 12.8146 9.26998 12.9511C8.94292 13.0862 8.65579 13.2551 8.45513 13.4701L8.91545 13.8997C9.02961 13.7773 9.22454 13.6511 9.51027 13.5331C9.79237 13.4166 10.1433 13.3162 10.5493 13.2345C11.3611 13.071 12.3654 12.9877 13.4195 12.9877C15.5421 12.9877 17.7868 13.3252 19.026 13.9646L19.3147 13.4051Z",fill:"#1F243C"}),s.createElement("rect",{x:"0.5",y:"1.00195",width:"26.4444",height:"4.40741",rx:"2.2037",fill:"#638EEB",stroke:"#1F243C",strokeWidth:"0.62963"}),s.createElement("rect",{x:"26.9445",y:"35.002",width:"26.4444",height:"4.4074",rx:"2.2037",transform:"rotate(-180 26.9445 35.002)",fill:"#638EEB",stroke:"#1F243C",strokeWidth:"0.62963"}))},77808:(e,t,i)=>{var s;i.d(t,{O:()=>s}),function(e){e.headerHeight=48,e.panelHeight=106,e.predictionsPreviewHeaderHeight=52,e.predictionInsightHeight=52,e.predictionInsightBottomMargin=16}(s||(s={}))},13839:(e,t,i)=>{i.d(t,{t:()=>k});var s=i(90023),r=i(75352),a=i(69425),n=i(13044),o=i(3807),l=i(19656),c=i(23858),d=i(10859),h=i(12518),u=i(58303),p=i(68259),g=i(59833),m=i(92562),v=i(35947),f=i(52979),_=i(30033),b=i(64451),w=i(36072),S=i(55446),C=i(65647),A=i(14765),y=i(87234),I=i(40840),E=i(70932);class P{constructor(){this._mapByHighlightId=new Map,this._mapByAlertId=new Map,this._highlightDataChanged=new w.xQ,this.highlightDataChanged=this._highlightDataChanged}getByHighlightId(e){return this._mapByHighlightId.get(e)}getByAlertId(e){const t=this._mapByAlertId.get(e)||new Set;return Array.from(t).map((e=>this._mapByHighlightId.get(e))).filter((e=>!!e))}get(e){return this._mapByHighlightId.get(e)}has(e){return this._mapByHighlightId.has(e)}set(e,t){this._mapByHighlightId.set(e,t);const i=this._mapByAlertId.get(t.alertId)||new Set;i.add(e),this._mapByAlertId.set(t.alertId,i),this._highlightDataChanged.next(e)}delete(e){const t=this._mapByHighlightId.get(e);if(t){const i=this._mapByAlertId.get(t.alertId);void 0!==i&&(i.delete(e),0===i.size&&this._mapByAlertId.delete(t.alertId)),this._mapByHighlightId.delete(e)}this._highlightDataChanged.next(e)}forEach(e){this._mapByHighlightId.forEach(e)}getHighlightDataObs(e){return this._highlightDataChanged.pipe(S.h((t=>t===e)),C.U((()=>this.getByHighlightId(e))),A.O(this.getByHighlightId(e)))}}class M{constructor(e,t,i,s,r=(()=>y.E9.zero),a=E.Y.create("DenaliHighlightsUpdater")){this._denaliHighlights=e,this._getFluidHighlights=t,this._getTextMap=i,this._getParentRect=s,this._getParentScroll=r,this._log=a}register(e,t,i,s){if(null!==e){if(this._denaliHighlights.has(e))return this.update(e,t,i,s);{const r=new b.Fd(e,t,this._getFluidHighlights(),this._getParentRect,this._getParentScroll),a={id:e,alertId:s.alertId,mark:r,visualization:i};this._denaliHighlights.set(e,a);const n=this._getTextMap().getPlainText();return this._getFluidHighlights().addHighlight(e,(0,I.rX)((0,I.mp)(r.range),n),s),a}}return null}remove(e){this._denaliHighlights.has(e)?(this._getFluidHighlights().removeHighlights([e]),this._denaliHighlights.delete(e)):this._log.warn(`can't remove mark #${e}, doesn't exist`)}update(e,t,i,s){const r=this._denaliHighlights.get(e);if(r){this._denaliHighlights.set(e,{...r,visualization:i});const a=this._getTextMap().getPlainText();return this._getFluidHighlights().updateHighlight(e,(0,I.rX)(t.meta.range(),a),s),r}return this._log.warn("cannot update not existing highlight",e),null}clearAll(){this._denaliHighlights.forEach((e=>{this._getFluidHighlights().removeHighlights([e.id])}))}}var L=i(38508),x=i(57935);class k{constructor(e,t,i,a,n,o,l=E.Y.create("DenaliViewAdapter"),p,g){this._highlights=e,this._textObserver=t,this._replacementService=i,this._layout=a,this._scroller=n,this._selectedHighlightsTracker=o,this._log=l,this._requestAwaitService=p,this._formattingService=g,this._subs=new c.w.Keeper,this._disposed=!1,this._highlightedAlertId=null,this._marks=new Map,this.markChangeApplied=new d.Subject,this._highlightsDataStore=new P,this._highlightUpdater=new M(this._highlightsDataStore,(()=>this._highlights),(()=>this._textObserver.getTextSource()),(()=>{const e=this._layout.textField.rect.getApproximate();return _.Pf.create({...e.client,...e.size})}),(()=>this._layout.textField.scroll.getApproximate())),this.highlightHoverProvider={getHoveredStateBehavior:e=>this._highlightsDataStore.getHighlightDataObs(e).pipe(d.map((e=>e&&e.visualization.type===b.sO.Change.VisualState.Type.highlighted?{[b.sO.Change.VisualState.Source.sidebar]:f.pc.hoveredNeedsAttention,[b.sO.Change.VisualState.Source.text]:f.pc.hovered,[b.sO.Change.VisualState.Source.api]:this._highlightedAlertId===e.alertId?f.pc.hovered:f.pc.none}[e.visualization.source]:f.pc.none)))},this._updateContentsBuffer=new d.Subject,this._flushUpdater=new d.Subject,this.getContents=(e,t)=>{if(this._log.trace(`getContents, ${String(e)}, ${String(t)}`),this._formattingService){const i=this._textObserver.getTextSource().getRichText();return r.RI.unsafeRes(void 0!==e?i.slice(e,void 0!==t?e+t:void 0):i)}{const i=void 0!==e?this.getText().slice(e,void 0!==t?e+t:void 0):this.getText();return r.RI.resFromText(i)}},this.changes=d.mergeStatic((0,s.zG)(r.RI.res(this.getContents().delta),h.fold((()=>d.EMPTY),(e=>d.of(e)))),this._textObserver.contentChanges.async.pipe(d.filter((e=>e.changes.length>0)),d.map((({deltaChange:e})=>e)))),this.activeMarks=new d.BehaviorSubject(u.YP),this.contentUpdated=new d.Subject,this.hoveredMarks=new d.BehaviorSubject(u.YP),this.textChangedAfterPaste=new d.Subject,this.activeWord=new d.BehaviorSubject(u.YP),this.clickedWord=new d.BehaviorSubject(u.YP),this.ongoingSelection=new d.BehaviorSubject(!1),this._log.info(`${k.name} created`),this._subs.push(this._subscribeToContentUpdates(),this._subscribeToSelectedHighlight(),this._trackFocusedAlert())}_trackFocusedAlert(){return this._highlightsDataStore.highlightDataChanged.pipe(d.map((e=>this._highlightsDataStore.getByHighlightId(e))),d.filter((e=>!!e))).subscribe((e=>{this._highlightedAlertId===e.alertId||e.visualization.type!==b.sO.Change.VisualState.Type.highlighted||e.visualization.source!==b.sO.Change.VisualState.Source.text&&e.visualization.source!==b.sO.Change.VisualState.Source.sidebar?e.alertId===this._highlightedAlertId&&e.visualization.type===b.sO.Change.VisualState.Type.visible&&(this._highlightedAlertId=null,this._log.trace(`Mark ${e.id} unfocused - alertId ${e.alertId}`)):(this._highlightedAlertId=e.alertId,this._log.trace(`Mark ${e.id} focused - alertId ${e.alertId}`))}))}pushChanges(e,t){this._log.trace("pushChanges",{change:e,source:t}),r.RI.isFlush(e)?this._flushUpdater.next():r.RI.isReset(e)?this._log.warn("Got unknown reset"):this._updateContents(e.delta,t)}getText(){return this._log.trace("getText"),this._formattingService?(0,L.l)(this._textObserver.getTextSource().getRichText(),""):this._textObserver.getTextSource().getPlainText()}getTextLength(){return this._log.trace("getTextLength"),this.getText().length}flushChanges(){this._log.trace("flushChanges")}getCursor(){return this._log.trace("getCursor"),n.Y1.empty}get contentRect(){throw this._log.trace("contentRect"),Error("not implemented")}setCursor(e,t,i){return this._log.trace("setCursor",{_index:e,_length:t,_source:i}),h.right(void 0)}getLastPossibleCursorPosition(){return this._log.trace("getLastPossibleCursorPosition"),0}_doMarkAction(e){const t=f.y$.Id.createFromMark(e.id),i=e.meta.capiAlertId;switch(e.action){case o.v.Change.ActionType.create:{const s=this._highlightUpdater.register(t,e,e.meta.visualState,{alertId:i,highlightId:t,highlightColor:e.meta.highlightColor,highlightDisplayFormat:e.meta.highlightDisplayFormat,highlightDisappearOnHoverDelay:e.meta.highlightDisappearOnHoverDelay,highlightLiveliness:null}),r=(null==s?void 0:s.mark)||null;return r&&this._marks.set(r.id,r),r}case o.v.Change.ActionType.update:{const s=this._highlightUpdater.update(t,e,e.meta.visualState,{alertId:i,highlightId:t,highlightColor:e.meta.highlightColor,highlightDisplayFormat:e.meta.highlightDisplayFormat,highlightDisappearOnHoverDelay:e.meta.highlightDisappearOnHoverDelay,highlightLiveliness:null}),r=(null==s?void 0:s.mark)||null;return r&&this._marks.set(r.id,r),r}case o.v.Change.ActionType.remove:return this._highlightUpdater.remove(t),this._marks.delete(e.id),null;default:(0,p.vE)(e)}}changeMarks(e){return this._disposed?(this._log.debug("changeMarks called after disposed, returning empty result"),o.v.Change.Result.getEmpty()):(this._log.trace("changeMarks",{rawMarks:e}),e.reduce(((e,t)=>{switch(t.action){case o.v.Change.ActionType.create:e.created.set(t.id,h.fromNullable(new Error("Cannot create mark"))(this._doMarkAction(t)));break;case o.v.Change.ActionType.update:e.updated.set(t.id,h.fromNullable(new Error("Cannot update mark"))(this._doMarkAction(t)));break;case o.v.Change.ActionType.remove:this._doMarkAction(t),e.removed.set(t.id,h.right(void 0))}return e}),o.v.Change.Result.getEmpty()))}scrollToMark(e,t){var i;const s=null!==(i=this._marks.get(e))&&void 0!==i?i:null;return this._log.trace("scrollToMark",{markId:e,mark:s,opts:t}),s?this._scroller.scrollToMark(s,t):(this._log.warn(`Tried to scroll to nonexistent mark with id: ${e}`),d.EMPTY)}_subscribeToContentUpdates(){return this._updateContentsBuffer.pipe(d.bufferWhen((()=>d.mergeStatic(d.timer((0,x.Xd)(20)),this._flushUpdater).pipe(d.first()))),d.filter((e=>e.length>0)),d.map((e=>e.reduce(((e,t)=>e.compose(t)),new a.i)))).subscribe((e=>{const t=this._replacementService.performBatchReplacements((0,v.g)(e)).then((()=>{const t=(0,v.B)(e);this._formattingService&&t.length&&(this._log.trace("Have formattings, applying",t),t.forEach((e=>{this._formattingService&&this._formattingService.apply(e.range,e.formatting)})))}),(()=>{this._log.warn("Failed to apply batch replacements")}));this._requestAwaitService&&this._requestAwaitService.addRequest(t)}))}_subscribeToSelectedHighlight(){return this._selectedHighlightsTracker.pipe(d.map((0,s.ls)(g.UI((e=>{var t;return(0,s.zG)(u.ij(null===(t=this._highlightsDataStore.get(e))||void 0===t?void 0:t.mark),u.hX((e=>(0,s.zG)(e.range(),h.fold(s.W8,(0,s.ff)(l.x.isEnclosingView))))))})),g.oA))).subscribe((e=>this.activeMarks.next(u.G(e))))}_updateContents(e,t){this._updateContentsBuffer.next((0,L.AQ)(e))}getSelectionRect(){throw this._log.trace("getSelectionRect"),Error("not implemented")}setContents(e){this._log.trace("setContents",{_value:e})}getHTML(){return this._log.trace("getHTML"),""}getPossibleCursorPosition(e,t){return this._log.trace("getPossibleCursorPosition",{_x:e,_y:t}),m.vM((()=>{throw new Error("Not implemented")}))}dispose(){this._highlightUpdater.clearAll(),this._subs.dispose(),this._log.info(`${k.name} disposed`),this._disposed=!0}}},22196:(e,t,i)=>{i.d(t,{Y:()=>u,q:()=>p});var s=i(90023),r=i(70989),a=i(65647),n=i(14765),o=i(61804),l=i(58303),c=i(77808),d=i(87190),h=i(63314);const u=(e,t)=>{const i=(0,h.ux)(e.lensState,e.cardsListScrollManager,e.capabilities),s=Math.max(600,t.size.height+c.O.headerHeight+c.O.panelHeight);return i.pipe((0,r.M)(e.predictionsPreviewViewModel.previewState),(0,a.U)((([e,t])=>{if(t.kind!==d.fA.visible)return e;const i=[t.tone].filter(l.pC).length;return i>0?e+c.O.predictionsPreviewHeaderHeight+c.O.predictionInsightHeight*i+c.O.predictionInsightBottomMargin:e})),(0,n.O)(0),(0,a.U)((e=>Math.max(e+c.O.headerHeight,s))),(0,a.U)((e=>Math.min(e,750))))},p=(e,t,i)=>r=>{const a=e(),n=e=>e*i(),c=n(1),d=n(2.25);return(0,s.zG)(t(),l.UI((e=>e-(0,h.US)())),l.UI((e=>o.R.isMainLens(a)&&r?e-d-c:e-c)),l.UI((e=>e-n(1))),l.hX((e=>e>0)))}},2465:(e,t,i)=>{i.d(t,{V:()=>s});var s,r=i(77808);!function(e){e.defaultLayout={name:"default",anchorMargin:{top:r.O.headerHeight+r.O.panelHeight,bottom:0,left:16,right:16},anchorOrigin:{horizontal:"right",vertical:"top"},assistantOrigin:{horizontal:"left",vertical:"top"},repositioningStrategy:[{horizontal:"flip",vertical:"translate"},{horizontal:"translate",vertical:"translate"}]}}(s||(s={}))},70009:(e,t,i)=>{i.d(t,{r:()=>W});var s=i(18117),r=i(24332),a=i(90023),n=i(39953),o=i(75352),l=i(92346),c=i(84823),d=i(60751),h=i(97482),u=i(44661),p=i(79560),g=i(68748),m=i(38155),v=i(38279),f=i(58334),_=i(90927),b=i(71678),w=i(95943),S=i(12504),C=i(23858),A=i(10859),y=i(39620),I=i(12518),E=i(92562),P=i(58303),M=i(52256),L=i(59833),x=i(25583),k=i(26146),R=i(99987),T=i(98350),U=i(821),F=i(4140),G=i(25770);var B=i(74983),V=i(60022),H=i(4798),O=i(91778),z=i(70932),D=i(78555);const W=(e,t,i,p,w,x,W,j,Y,Z,$,q)=>{const X=z.Y.create("createEngine"),K=new C.w.Keeper,Q=function(e,t,i){const s=G.h.create(P.YP),r=G.h.create(P.YP);return{score:G.h.create(P.YP),scoreStatus:G.h.create(P.YP),title:G.h.create(void 0),textInfo:G.h.create(P.YP),checkingState:G.h.create(e.checkingState),asyncChecksState:G.h.create(e.asyncChecksState),context:i,contextCompleteness:i.view(U.j.calculateCompleteness),updateContext:e=>{const t=!k.R$.eq.equals(i.get(),e);return i.set(e),t},defaultContext:s,updateDefaultContext:e=>{const t=!(0,n.zG)((0,a.bc)([s.get(),e],M.vB(k.R$.eq.equals)));return s.set(e),t},documentText:t.getText(),documentLength:G.h.create({full:t.getTextLength(),trimmed:t.getTextLength()}),counters:G.h.create(U.dM.group.empty),calculateStats:()=>F.Vi(e.requestDocStats).then((e=>(r.set(P.G(e)),e))),recentDocumentStats:r}}(e,t,i),J=t.changes.pipe(A.scan(((e,i)=>o.RI.isReset(i)?(0,n.zG)(i.text,I.fold((()=>t.getText()),a.yR)):o.RI.isDelta(i)?(0,n.zG)(o.RI.resFromText(e).compose(i),E.VS((e=>e.text)),I.fold((()=>t.getText()),a.yR)):e),""));K.push(e.events.pipe(A.withLatestFrom(J),A.tap((([e,t])=>{if("alert_received"===e.kind){const i=(0,V.IM)(e.alert,O.Q.fromString("fake"));B.$.isConsistentWithText(i,t)||(Z.alerts.inconsistentAlertWithText("assistant",null==i?void 0:i._tag),(0,T.N)(X,i,t,"logging"))}}))).subscribe(),e.events.pipe(A.tap((t=>{Q.checkingState.set(e.checkingState),l.hX.is("text_info")(t)?Q.textInfo.set(P.G(t.data)):l.hX.is("finish")(t)?(Q.score.set(t.score),Q.scoreStatus.set(t.scoreStatus)):l.hX.is("feedback_ack")(t)?((0,n.zG)(t,P.DT(l.hX.isUserFeedbackWithGeneralScore),P.UI((e=>e.outcomeScores.GeneralScore)),P.UI((e=>Math.trunc(100*e))),M.bw((e=>Q.score.modify((0,a.ls)(P.UI((t=>({...t,rank:e}))),M.vx(P.G({errorRateScore:0,rank:e}))))))),(0,n.zG)(t,P.DT(l.hX.isUserFeedbackWithScoreStatus),P.UI((e=>e.scoreStatus)),M.bw((e=>Q.scoreStatus.set(P.G(e)))))):l.hX.is("session_started")(t)&&Q.updateDefaultContext(t.defaultDocumentContext)}))).subscribe(),...$.isGateEnabled(H.K.CheetahClearSDUIBufferOnReconnect)?[]:[(0,D.o)((()=>P.WG(j)),e.events)],w.contentChanges.async.pipe(A.debounceTime(300),A.map((e=>e.newText)),A.map((e=>({full:e.length-1,trimmed:e.trim().length}))),A.tap(y.wW(Q.documentLength))).subscribe()),(0,n.zG)(x(),P.UI((e=>{Q.updateDefaultContext(k.R$.parseDefault(e.defaultDocumentContext))})));const ee=new S.Xr,te=new m.Ek,ie=(0,r.g_)((0,r.Zm)())(L.oA([P.G((e=>(0,n.zG)(W.get(),P.g_((()=>e),(t=>t.addSnippetsTriggerToAlert(e))))))])),se=new d.a,re=new g.SC(ee,te,(()=>t.getContents().delta),e.events,e,Q.counters,ie,void 0,se),ae=h.e.create(re.state),ne=new u.k(ae,re._ops);K.push(f.R.init(f.R.UserTextChangesSync.create(t),e.events,v.nR.ignoreTEResult(e),v.nR.ignoreResult(ee),te,v.Av.merge([re])).subscribe()),e.loadAlerts(p()),re.flushAlerts(),$.isGateEnabled(H.K.DontSyncAlertApplicationsWithInlineMode)||K.push(N(re.state,q));const oe=P.G(_.J.CategoriesModel.create(e.events,e,re.state,ne,c.JW.ScopeType.GLOBAL)),le=P.G(b.k.create(ae)),ce=(0,n.zG)((0,s.gz)(P.Kw)(j,Y),P.UI((([t,i])=>({sduiBufferService:t,sduiFeedbackService:new R.Q(e),sduiPopoverManager:i})))),de={enablePlagiarismSearch:e.enablePlagiarismSearch,disablePlagiarismSearch:e.disablePlagiarismSearch},he={requestWritingExpert:e.requestWritingExpert,enableWritingExpert:e.enableWritingExpert,disableWritingExpert:e.disableWritingExpert};return{alertsList:re,alertsReader:ae,alertsService:ne,positionManager:ee,getByRawAlertId:se.getByRawAlertId.bind(se),sessionModel:Q,mutedAlertsCategoriesModel:oe,mutingAlertsReader:le,shutdown:()=>{re.dispose(),K.dispose()},sduiEngine:ce,plagiarismClient:de,writingExpertClient:he}},N=(e,t)=>e.pipe(A.startWith(w.p.empty),A.pairwise(),A.map((([e,t])=>w.p.diff(e,t))),A.map((e=>(0,n.zG)(e,x.v.reduce([],((e,t)=>(0,n.zG)(t.alert,P.DT((e=>p.bZ.isApplied(e))),P.UI((e=>e.rawId)),P.fS((()=>P.YP)),P.g_((()=>e),(t=>[...e,t])))),a.yR,a.yR))))).subscribe((e=>{e.length&&t(e)}))},97982:(e,t,i)=>{i.d(t,{aU:()=>Be,X5:()=>Ve,n:()=>He});var s,r=i(24332),a=i(58303),n=i(90023),o=i(39953),l=i(7305),c=i(61804),d=i(79560),h=i(55389),u=i(3307),p=i(71031),g=i(98753),m=i(76728),v=i(57810),f=i(3862),_=i(53043),b=i(7280),w=i(79647),S=i(91281),C=i(70222),A=i(55395),y=i(37402),I=i(66415),E=i(97965),P=i(52729),M=i(81946),L=i(75223),x=i(71978),k=i(65647),R=i(14765),T=i(55446),U=i(96030),F=i(5794),G=i(70989),B=i(90049),V=i(34859),H=i(39620),O=i(20715),z=i(36072),D=i(60165),W=i(60841),N=i(8748),j=i(17071),Y=i(12518),Z=i(92562),$=i(52256),q=i(25770),X=i(19813),K=i(4603),Q=i(66813),J=i(22196),ee=i(34821),te=i(10946),ie=i(87653),se=i(73333),re=i(49140),ae=i(65882),ne=i(10859),oe=i(23858),le=i(68259),ce=i(61793);!function(e){e.equals=(e,t)=>"score"in e&&"score"in t?e.score===t.score:e.type===t.type}(s||(s={}));class de{constructor(e,t,i,r,l,c){this._sessionModel=e,this._layoutVM=t,this._modalManager=i,this._user=r,this._gnar=l,this._closeAssistant=c,this.showSetGoalsActionButton=q.h.create(!0),this.showSettingsActionButton=q.h.create(!0),this.close=()=>{this._closeAssistant()},this.score=ne.combineLatestStatic([this._sessionModel.score.view(a.UI((e=>({capiScore:e.rank})))),this._sessionModel.checkingState]).pipe(ne.map((([e,t])=>(0,o.zG)(e,a.UI((e=>({...e,isLoading:"idle"!==t}))))))),this.summary=this._sessionModel.textInfo.view((0,n.ls)(a.tS((e=>e.messages)),a.UI((e=>e.assistantHeader)),a.fS((()=>"Looking good so far")),(e=>({content:e})))),this.logoScore=(0,ae.aj)([this._layoutVM.activeView,this.score]).pipe(ne.map((([e,t])=>(0,o.zG)(t,a.g_((()=>({type:"logo"})),(t=>e.type!==ce.a.Type.default?{type:"logo"}:{type:"score",score:t}))))),ne.distinctUntilChanged(s.equals)),this.visibility=this._layoutVM.activeView.view((e=>e.type===ce.a.Type.default?"visible":"hidden")),this._subs=new oe.w.Keeper,this._trackHeaderMessageChanges(),this._trackToShowActionButtons()}open(e){if("setGoals"===e)this._subs.push(this._modalManager.show(l.Iy.setGoals("user")).subscribe());else(0,le.vE)(e)}_trackHeaderMessageChanges(){const e=this.summary.pipe(ne.pairwise()).subscribe((([e,t])=>{var i,s;this._gnar.assistantHeaderMessageUpdate(e.content,t.content,null===(i=(0,o.zG)(this._sessionModel.textInfo.get(),a.FS))||void 0===i?void 0:i.wordsCount,null===(s=(0,o.zG)(this._sessionModel.score.get(),$.Fc))||void 0===s?void 0:s.rank)}));this._subs.push(e)}_trackToShowActionButtons(){const e=this._user.subscribe((e=>{e.isAnonymous?(this.showSetGoalsActionButton.set(!1),this.showSettingsActionButton.set(!1)):(this.showSetGoalsActionButton.set(!0),this.showSettingsActionButton.set(!0))}));this._subs.push(e)}dispose(){this._subs.dispose()}}var he=i(23684),ue=i(96299),pe=i(87190);class ge{constructor(e,t,i,s,r){this._lensPreviewVM=e,this._layoutVM=t,this._emogenieService=i,this._session=s,this._gnar=r,this._subs=new oe.w.Keeper,this.previewState=q.h.create({kind:pe.fA.hidden}),this.previewFlow=ue.Z.fromSideEffect((e=>{if("tone"===e.action.key){const e=this._emogenieService.viewState.view("prevalentEmotion").get();return e&&this._gnar.emogeniePredictionButtonClick(e.name),this._layoutVM.pushActiveView({type:ce.a.Type.emogenie})}(0,le.vE)(e.action.key)}),this.previewState),this._previewState=(0,n.zG)(ne.combineLatestStatic([this._emogenieService.viewState.view((e=>a.ij(e.settings.hiddenReport?void 0:e.prevalentEmotion))),this._emogenieService.viewState.view("brandToneOffImageUrl"),this._session.documentLength,this._lensPreviewVM.getLens(c.R.SpecialId.PredictionEmogenie)]),ne.map((([e,t,i,s])=>a.pC(e)&&i.trimmed>0?{kind:pe.fA.visible,tone:(0,n.zG)(e,a.UI((e=>({emotion:e,alertsCount:s.count,brandToneOffImageUrl:t}))))}:i.trimmed>0?{kind:pe.fA.zero}:{kind:pe.fA.hidden}))),this._subs.push(this._previewState.subscribe(H.wW(this.previewState)))}dispose(){this._subs.dispose()}}var me=i(81549),ve=i(94267),fe=i(44424),_e=i(74857),be=i(80724),we=i(4976);function Se(e,t,i,s,r){return{id:"changeAlertEffect",when:c.R.isWithAlertsId,what:y.nL.Effect.SwitchAlert.create(e.actionEvents.pipe(W.w((e=>{const n=t.get();if(!y.nL.hasCards(n))return fe._(new le.ej("Cannot update state without cards"));switch(e.type){case b.lY.Type.alertMinicardButtonClick:return(0,o.zG)(i.getRegistered(e.alertHighlight.alert.id),a.g_((()=>(r.warn("somehow we got click on non registered alert",e.alertHighlight.alert),N.E)),(()=>O.of(e.alertHighlight))));case b.lY.Type.cardMatchesNavigationButtonClick:const t=e.transitionTo;switch(t.kind){case"anotherAlert":return(0,o.zG)("right"===e.direction?s.nextAlert(t.card):(0,o.zG)(s.prevAlert(t.card),$.vx(s.anyRegisteredAlert(t.card))),a.g_((()=>N.E),(e=>O.of({alert:e,highlightIndex:0}))));case"sameAlert":return(0,o.zG)(i.getRegistered(t.card.activeAlert.id),a.g_((()=>N.E),(()=>O.of({alert:t.card.activeAlert,highlightIndex:t.highlightIndex}))));default:return(0,le.vE)(t)}default:return N.E}})),k.U((e=>({alertHighlight:e,alertSource:d.l$.sidebar,options:{order:"lensOrder"}})))))}}function Ce(e,t,i){const s=e.pipe(T.h(y.nL.hasCards),_e.b(0),T.h((e=>e.currentLens.items.size>0&&a.Wi(y.In.getActiveItem(e.currentLens))&&i.get())),k.U((e=>(0,o.zG)(e.currentLens.items.getAt(0),a.tS(ie.O.checksFeedItemsMapper((e=>a.G(e.activeAlert)),(e=>a.G(e.activeAlert)))),$.bw((()=>t.set(a.G(we.CV.skip))))))),be.oA,T.h((e=>e.state.type===d.bZ.State.Type.REGISTERED)),D.x());return{id:"focusFirstCardSideEffect",when:e=>e!==c.R.SpecialId.PredictionEmogenie,what:y.nL.Effect.SwitchLens.create(s.pipe(G.M(e),k.U((([e,t])=>({lensId:t.currentLens.id,alertSource:d.l$.text,options:{order:"lensOrder",toFocus:y.nL.Effect.FocusBehavior.focusAlert({alert:e,highlightIndex:0})}})))))}}function Ae(e,t,i){const s=e.pipe(k.U((e=>s=>e.type===x.ay.Type.AppliedAlertAnimationFinished&&s.currentLens.meta.filter(e.alert)&&y.nL.hasItems(s)?s.patch({currentLens:(0,o.zG)(Y.tryCatch((()=>d.bZ.isApplicableAlert(e.alert)?t.finishApplyAnimation([e.alert])(s.currentLens):s.currentLens),(e=>i.error("could not update lens state on applied animation finish",e))),Y.getOrElse((()=>s.currentLens))),alertSource:e.alert.state.source}):s)));return{id:"onAlertApply",when:n.W8,what:y.nL.Effect.Applicator.create(s)}}function ye(e,t){return{id:"lensChangeEffect",when:n.W8,what:y.nL.Effect.SwitchLens.create(e.pipe(G.M(t),T.h((([e,t])=>e.lensId!==t)),k.U((([e])=>({lensId:e.lensId,alertSource:d.l$.sidebar,options:{order:"lensOrder",toFocus:e.focusFirstCard?y.nL.Effect.FocusBehavior.focusFirst:y.nL.Effect.FocusBehavior.noFocus}})))))}}var Ie,Ee=i(59833);!function(e){const t=(e,t)=>e.pipe(T.h(b.lY.isCreateSnippetAction),k.U((({id:e})=>i=>{const s=(0,n.zG)(i.currentLens.items.update(e,t({type:"success",clockwise:!0})),Y.fold((()=>i.currentLens.items),n.yR));return m.sU.itemsLens.set(s,i)})));e.applicatorEffects=(e,i)=>(0,n.zG)([[t(e,i),"suggestedSnippetSuccessEffect"]],Ee.UI((([e,t])=>({id:`cardsViewModel.effects.${t}`,when:c.R.isWithAlertsId,what:y.nL.Effect.Applicator.create(e)}))))}(Ie||(Ie={}));var Pe=i(45411),Me=i(49083),Le=i(16873),xe=i(5039),ke=i(14372),Re=i(95486),Te=i(68970),Ue=i(62549),Fe=i(79992),Ge=i(89795);const Be=e=>e.view((e=>(0,o.zG)(a.DT(y.nL.hasItems)(e),a.UI((e=>e.currentLens.items)),a.UI((e=>e.filter((0,j.Kg)(ie.O.isAlertCard,ie.O.isAlertsBundle)))),a.UI((e=>e.filter((e=>"rendered"===e.visualState.transition.type)))),a.g_((()=>null),(e=>e.values()))))).pipe(R.O([]),T.h(Fe.Nf),U.G(),k.U((([e,t])=>{const i=new Set(e.map((e=>e.id)));return t.filter((e=>!i.has(e.id)))})),F.J()),Ve=(e,t)=>e.alertClicked.pipe(k.U((e=>(0,o.zG)(e,a.g_(n.gn,(e=>e.alert))))),T.h(Fe.fQ),G.M((e=>e.pipe(k.U((e=>y.nL.hasCards(e)&&c.R.isMainLens(e.currentLens.id)?ie.O.getActiveItemWithAlert(e.currentLens):a.YP)),k.U((e=>(0,o.zG)(e,a.g_((()=>null),(e=>e.activeAlert)))))))(t)),T.h((([e,t])=>e.id!==(null==t?void 0:t.id))),k.U((([e,t])=>e))),He=(e,t,i,s,F,G,ae,ne,oe,le,ue,pe,fe,_e,be,Ee,He,Oe,ze,De,We,Ne,je,Ye,Ze,$e,qe)=>{const Xe=X.C8.Logging.getLogger("view_models"),Ke=q.h.create(h.A.defaultState),Qe=q.h.create(!1),Je=q.h.create(!1),et=q.h.create(!1),tt=Ue.n.isFree(ue.view("user").get()),it=p.t.create({...p.t.defaultLensFilters,[c.R.SpecialId.AllAlerts]:d.bZ.belongsToAllAlerts},{...p.t.defaultTextFilters,[c.R.SpecialId.Closed]:n.jv,[c.R.SpecialId.AllAlerts]:(e=>(0,j.W9)((()=>!Je.get()),(0,j.W9)((e=>!et.get()||d.bZ.isInline(e)),e)))(d.bZ.belongsToAllAlerts)}),st=B.T(Je,Qe,et).pipe(V.h(H.PU)),rt=h.A.get(e.alertsList.state,e.alertsList.lensesScores,it).subscribe(H.wW(Ke)),at=new Le.t(Ke.view("lenses"),it,e.sessionModel.scoreStatus),nt=(0,v.$y)((0,Ge.a)(t).getContents),ot={features:new Set([w.IG.Features.showCardLabelInOutcomes]),cardLayoutDensityMode:A.j.Density.minimal,shouldAnimateAlertApply:w.IG.Default.shouldAnimateAlertApply,cardVisualMode:q.h.create(A.j.CardVisualMode.RegularLightMode)},lt=(0,w.Ls)(nt,e.alertsReader,ot,(()=>O.of(a.YP)),e.mutingAlertsReader),ct=f.R.ItemFactory.create(nt,e.mutingAlertsReader,ot,(()=>O.of(a.YP))),dt=q.h.create(a.YP),ht=q.h.create(16),ut=(0,J.q)((()=>Ct.get().currentLens.id),(()=>dt.get()),(()=>ht.get())),pt=ie.O.getCapabilities(lt,ct,e.alertsReader,nt,ut),gt=new L.gi(ie.O.equatable.structEq,ie.O.defaultOrd),mt=(0,L.is)(lt,pt),vt=new L.ad((e=>c.R.isAllAlerts(e.id)),gt,ie.O.equatable.structEq,ie.O.bundlesOrd),ft=(0,L.kn)(ct,ot,(e=>c.R.isAllAlerts(e)),mt,pt),_t=E.v.createWithInitialAlerts(vt,ft,it,(0,n.ff)(d.bZ.isMuted),pt),bt=new g.F.Impl(e.alertsList.state,e.positionManager,e.alertsReader,it.alertCanBeDisplayed),wt=new M.oq(e.alertsList.state,e.alertsReader,Ke.view("lenses"),bt,at,_t,ft,pt,it),St=i.get(),Ct=q.h.create(wt.emptyState(St).patch({alertSource:d.l$.sidebar})),At=(0,_.u0)((()=>t.getCursor().index),wt),yt=new Re.x(e.alertsList,Ct,3,qe,fe),It=new l.EQ(new ke.o(e.sessionModel,yt,be.get().isPremium,fe)),Et=new Pe.C((0,K.nD)(Ye())),Pt=new m.Xx({flush:()=>t.flushChanges()},new z.xQ,lt,e.alertsService,e.alertsReader,(()=>Promise.resolve()),(()=>Promise.resolve()),(0,o.zG)(e.mutedAlertsCategoriesModel,a.UI((e=>({model:e,openSuggestionsManagement:()=>self.open((0,Te.Um)().suggestionsSettings)})))),a.G(re.B.getCardsViewModelSendToURLExperiment(Et,fe)),(()=>!1),ie.O.getActiveItemWithAlert,pt,Et,{bufferTransitions:!0,showGbPrompt:re.B.shouldShow(be.get())}),Mt=new ee.y(Pt.actionEvents,fe,e.alertsReader),Lt=new ce.D(fe,He,Oe,Ne,je),xt=new ge(at,Lt,s,e.sessionModel,fe),kt=new te.WY(Ct,xt,yt,pt,fe,tt),Rt=new S.o((()=>Y.right(void 0))),Tt=kt.upgradeHookExpanded.pipe(D.x()).subscribe(H.wW(Qe)),Ut=(0,xe.xl)(Ct,it,st,Qe),Ft=new xe.o$(e.alertsList,e.alertsReader,e.positionManager,e.alertsService,t,Ct,Ut,ie.O.getActiveItemWithAlert,Qe,oe,!0),Gt=(0,we.hp)(Ct,Ft,q.h.create(16),Rt,t,Xe),Bt=new z.xQ,Vt=Ct.pipe(k.U((e=>e.currentLens.id))),Ht=new de(e.sessionModel,Lt,It,be,fe,Ee),Ot=Lt.activeView.pipe(k.U((e=>e.type)),R.O(ce.a.Type.startupPlaceholder),U.G(),k.U((([e,t])=>e===ce.a.Type.startupPlaceholder&&t===ce.a.Type.proofitRequest))).subscribe(H.wW(et)),zt=kt.cardListViewportHeight.subscribe(H.wW(dt)),Dt=new se._(Lt,_e,fe),Wt=(0,o.zG)(ne,a.UI((e=>new me.S(Lt,e,Ee,fe)))),Nt=Ct.view(y.nL.getActiveAlertHighlight(ie.O.getActiveItemWithAlert)),jt=new u.mN(t,Ft,e.alertsReader,Nt,Ct.view((e=>e.currentLens.meta.filter))),Yt=Be(Ct),Zt=Ve(jt,Ct),$t=F.pipe(W.w(a.g_((()=>N.E),(t=>t.initAssistantCardActionsProcessing(Pt.actionEvents,e.alertsReader,Ct,Yt,Zt))))).subscribe(),qt=G.pipe(W.w(a.g_((()=>N.E),(t=>t.initCardActionsProcessing(Pt.actionEvents,e.alertsReader,Yt,Zt,Ct))))).subscribe(),Xt=ae.pipe(W.w(a.g_((()=>N.E),(t=>t.initCardActionsProcessing(Pt.actionEvents,e.alertsReader,Yt,Ct))))).subscribe(),Kt=q.h.create((0,o.zG)(le,a.g_((()=>we.CV.skip),(()=>d.l$.text)),a.G)),Qt=[(0,Me.A7)(jt,Ct,tt),(0,o.zG)(x.EQ.focusMarkByActiveAlert(Ct,Ft,e.alertsReader,ie.O.getActiveFocusableItem,Xe.getLogger("MarksEffects.focusMarkByActiveAlert")),y.nL.Effect.Producer.delayed(oe)),Ae(Ft.events,pt,Xe.getLogger("createOnAlertApplySideEffect")),Se(Pt,Ct,e.alertsReader,lt,Xe),Ce(Ct,Kt,kt.autoFocusEnabled),...Pt.getApplicatorEffects(),kt.applicatorEffects,C.R7(Ct,Rt,pt,(0,n.MZ)(Pt.actionEvents),{cardsAroundActive:10,cardsBeyondViewport:10}),(0,o.zG)((0,we.k9)(Ct,Gt,Kt,ie.O.getActiveAlignableItem,pt),y.nL.Effect.Producer.delayed(oe)),C.XU(Ct,Rt,pt),ye(Bt,Vt),m.dv.createSendActiveAlertFeedbacksEffect(Ct,ie.O.getActiveItemWithAlert,e.alertsService,e.alertsReader,Xe.getLogger("CardsViewModelEffects.createSendActiveAlertFeedbacksEffect")),...Ie.applicatorEffects(Pt.actionEvents,pt.transitionTo)],Jt=q.h.create(c.R.SpecialId.AllAlerts),ei=Ct.view((e=>e.currentLens.id)).pipe(T.h((e=>e===c.R.SpecialId.AllAlerts))).subscribe(H.wW(Jt)),ti=(0,_.VC)(wt,At,Jt,pt),ii=q.h.create(le),si=(0,_.Dv)((e=>c.R.isMainLens(e.currentLens.id)),ti,pt),ri=new _.vM(e.sessionModel.checkingState,Ct),ai=(0,o.zG)([(0,o.zG)((e=>_.Py.whenShouldVerifyCurrentLens(ie.O.getActiveItemWithAlert,pt)(e)),_.Py.behaviorToEffect((()=>a.G(y.nL.Effect.FocusBehavior.focusNext)))),(0,o.zG)((0,j.W9)((()=>a.pC(ii.get())),_.Py.whenNoActiveCard),_.Py.behaviorToEffect((e=>(0,o.zG)((e=>{const t=(0,a.DT)((0,j.Kg)(ie.O.isAlertCard,ie.O.isAlertsBundle));return(0,o.zG)(ii.get(),a.tS((i=>(ii.set(a.YP),y.nL.hasCards(e)?(0,o.zG)(e.currentLens.items.reduce(((e,s)=>(0,o.zG)(e,a.wp((()=>(0,o.zG)(s,t,a.tS((e=>a.ij(e.alerts.find((e=>e.id.startsWith(i+"_"))))))))))),a.YP),a.UI((t=>({alert:t,highlightIndex:0,lensId:e.currentLens.id})))):a.YP))))})(e),a.UI((e=>y.nL.Effect.FocusBehavior.focusAlert(e))))))),(0,o.zG)((0,j.W9)((()=>kt.autoFocusEnabled.get()),(0,j.W9)(_.Py.whenFirstOpeningDocumentWithAlerts(ri),_.Py.whenNoActiveCard)),_.Py.behaviorToEffect((()=>a.G(y.nL.Effect.FocusBehavior.focusFirst))))],(0,r.g_)((0,r._e)(a.gW())())),ni=_.Py.getStateTransformer(ai,si,e.alertsReader,pt,(e=>kt.autoFocusEnabled.get()&&"text"!==e.alertSource),n.Q1,Jt),oi=I.v.Items.getItemsPositionsUpdateTransformer(pt),li=(0,n.ls)(ni,Z.L9(oi)),ci=new P.l(Ct,wt,e.alertsReader,e.alertsService,Qt,ie.O.getActiveItemWithAlert,li),di=Bt.pipe(k.U((({lensId:e})=>e)),T.h((e=>e===c.R.SpecialId.AllAlerts)),D.x()).subscribe((e=>{i.set(e)})),hi=Lt.activeView.pipe(k.U((e=>{switch(e.type){case ce.a.Type.default:return i.get();case ce.a.Type.emogenie:return c.R.SpecialId.PredictionEmogenie;case ce.a.Type.proofitReview:return c.R.SpecialId.RealTimeProofit;default:return null}})),T.h(Fe.fQ),D.x(),k.U((e=>[e,e===c.R.SpecialId.AllAlerts]))).subscribe((([e,t])=>Bt.next({lensId:e,focusFirstCard:t}))),ui=q.h.create(a.YP),pi=qe();pi&&pi.capiMessages.pipe(T.h((e=>"start"===e.action))).subscribe((e=>ui.set(a.G(e))));const gi=new ve.X(ue,pe,$e,_e),mi=Pt.actionEvents.pipe(T.h(b.lY.isOpenIdeasGallery)).subscribe((()=>self.open((0,Te.Um)().grammarlyIdeasSales,"_blank"))),vi=(0,he.W)(ze),fi=Pt.actionEvents.subscribe((0,n.ls)((0,Q.JH)(e.alertsReader,Q.SV.Source.assistant),$.bw((e=>{(async()=>{e.kind===Q.SV.Kind.alertApply&&e.source===Q.SV.Source.assistant&&await Ze.incrementCounter(),We.next(e)})()}))));return{lensState:Ct,cardsViewModel:Pt,lensPreviewViewModel:at,cardsListScrollManager:Rt,upgradeViewModel:yt,alertProcessor:De,assistantHeaderViewModel:Ht,assistantLayoutViewModel:Lt,assistantCardListViewModel:kt,lensChanged:Bt,predictionsPreviewViewModel:xt,assistantFeedbackViewModel:Dt,assistantSettingsViewModel:gi,assistantProofitViewModel:Wt,assistantModalManager:It,marksViewModel:Ft,gnar:fe,positionViewModel:vi,user:be,capabilities:pt,remSize:ht,isSingleCardAssistant:!1,dispose:()=>{fi.unsubscribe(),Pt.dispose(),ci.dispose(),Ft.dispose(),xt.dispose(),di.unsubscribe(),rt.unsubscribe(),hi.unsubscribe(),Ht.dispose(),kt.dispose(),It.hideAll(),ei.unsubscribe(),zt.unsubscribe(),Ot.unsubscribe(),mi.unsubscribe(),qt.unsubscribe(),Xt.unsubscribe(),$t.unsubscribe(),Tt.unsubscribe(),(0,o.zG)(Wt,$.bw((e=>e.dispose()))),Mt.dispose()}}}},34821:(e,t,i)=>{i.d(t,{t:()=>c,y:()=>o});var s=i(7280),r=i(55446),a=i(65647),n=i(32315);class o{constructor(e,t,i){this._cardActions=e,this._gnar=t,this._alertsReader=i,this._subs=[c(this._cardActions,this._gnar,"assistant"),l(this._cardActions,this._gnar),n.g.createSubscription(this._cardActions,this._gnar,this._alertsReader.getById)]}dispose(){this._subs.forEach((e=>e.unsubscribe()))}}const l=(e,t)=>e.pipe(r.h((e=>e.type===s.lY.Type.sduiCardAction&&"learn-more"===e.sourceId))).subscribe((()=>{t.learnMoreButtonClick()})),c=(e,t,i)=>e.pipe(a.U((e=>e.type)),r.h((e=>e===s.lY.Type.muteAlertCategory||e===s.lY.Type.undoMuteAlertCategory||e===s.lY.Type.mutedAlertSuggestionManagementClick||e===s.lY.Type.mutedAlertSuccessShow))).subscribe((e=>{switch(e){case s.lY.Type.muteAlertCategory:t.mutedAlertsCardTurnOffButtonClick(i);break;case s.lY.Type.undoMuteAlertCategory:t.mutedAlertsTurnBackOnButtonClick(i);break;case s.lY.Type.mutedAlertSuggestionManagementClick:t.suggestionManagementClick(i);break;case s.lY.Type.mutedAlertSuccessShow:t.categoryDeactivatedShow(i)}}))},10946:(e,t,i)=>{i.d(t,{WY:()=>P,lo:()=>s});var s,r=i(90023),a=i(39953),n=i(61804),o=i(79560),l=i(65179),c=i(42370),d=i(23858),h=i(10859),u=i(80724),p=i(30586),g=i(37402),m=i(66415),v=i(3635),f=i(58303),_=i(17071),b=i(25770),w=i(96299),S=i(21448),C=i(87653),A=i(87190),y=i(95486),I=i(99836),E=i(79992);!function(e){let t;!function(e){e.clickOnEmpty="clickOnEmpty",e.clickOnFakeCard="clickOnFakeCard",e.clickOnUpgradeCard="clickOnUpgradeCard"}(t=e.Type||(e.Type={}))}(s||(s={}));class P{constructor(e,t,i,P,M,L){this._lensState=e,this._predictionsVM=t,this._upgradeViewModel=i,this._capabilities=P,this._gnar=M,this._isFreeUser=L,this._subs=new d.w.Keeper,this.activeAlert=this._lensState.pipe(h.map((e=>g.nL.hasCards(e)&&n.R.isMainLens(e.currentLens.id)?C.O.getActiveItemWithAlert(e.currentLens):f.YP)),h.map((e=>(0,a.zG)(e,f.g_((()=>null),(e=>e.activeAlert)))))),this.successView=b.h.combine(this._lensState,this._predictionsVM.previewState,((e,t)=>m.v.WithSuccess.State.isInSuccess(this._capabilities)(e)?t.kind===A.fA.visible?f.G(v.g.SuccessType.applied):f.G(v.g.SuccessType.small):f.YP)),this._premiumAlertsCount=this._upgradeViewModel.advancedAlerts.view((0,r.ls)(f.UI((e=>e.count)),f.fS((()=>0)))),this.havePremiumAlerts=this._premiumAlertsCount.view((e=>e>0)),this._upgradeHookExpanded=new h.BehaviorSubject(!1),this.upgradeHookExpanded=(0,a.zG)(this._upgradeHookExpanded,h.distinctUntilChanged()),this.upgradeHookFlow=(0,a.zG)((0,l.d)(this._upgradeViewModel.advancedAlerts),w.Z.extendActions(h.tap((e=>{e.key===c.n.State.expanded?"upgrade"===e.action.kind?((0,S.Qi)(this._gnar,{placement:"advancedIssues",bannerType:"SeeWhatsInPremium",upgradeHookName:"advancedIssues",upgradeHookSlot:"singleCardAssistant"}),(0,I.Tb)().upgradeHooks.clickUpgradeHook("advancedIssues","singleCardAssistant"),this._upgradeViewModel.openUpgradeUrl(y.L.Place.assistantCardList)):"onUpgradeButtonMount"===e.action.kind&&this._onUpgradeButtonMount.next(e.action.element):e.key===c.n.State.minimized&&"onClick"===e.action.action&&(this._upgradeHookExpandReason.next("click"),this._isFreeUser&&this.assistantActions.next({type:s.Type.clickOnUpgradeCard}))}))),w.Z.patchState(h.merge(this._minimizeUpgradeHook())),w.Z.patchState(h.merge(this._autoOpenUpgradeHook())),w.Z.patchState(h.tap((e=>this._onUpgradeHookShown.next(function(e){switch(e){case"hidden":return c.n.State.hidden;case"expanded":return c.n.State.expanded;case"minimized":return c.n.State.minimized;default:(0,E.vE)(e)}}(e.kind))))),w.Z.patchState(h.tap((e=>this._upgradeHookExpanded.next("expanded"===e.kind))))),this.cardListContext=new h.BehaviorSubject(f.YP),this.assistantActions=new h.Subject,this.autoFocusEnabled=b.h.create(!0),this.cardListViewportHeight=b.h.create(f.YP),this._onUpgradeButtonMount=new h.ReplaySubject,this._upgradeHookExpandReason=new h.ReplaySubject,this._onUpgradeHookShown=new h.Subject,this._unselectActiveAlert=this.assistantActions.pipe(h.filter((e=>e.type===s.Type.clickOnEmpty||e.type===s.Type.clickOnFakeCard||!(!this._isFreeUser||e.type!==s.Type.clickOnUpgradeCard))),h.tap((()=>this.autoFocusEnabled.set(!1))),h.map((()=>e=>e.patch({currentLens:(0,a.zG)(g.In.getActiveItem(e.currentLens),f.g_((()=>e.currentLens),(t=>g.nL.hasItems(e)?this._capabilities.unselectItem()(e.currentLens):e.currentLens))),switchOrder:"lensOrder",alertSource:o.l$.sidebar})))),this.applicatorEffects={id:"assistantCardListViewModel.effects",when:n.R.isWithAlertsId,what:g.nL.Effect.Applicator.create(h.mergeStatic(this._unselectActiveAlert))},this._subs.push(this._onUpgradeHookShown.pipe(h.debounceTime(1),h.distinctUntilChanged(),h.filter((e=>e===c.n.State.minimized))).subscribe((()=>{this._gnar.assistantCollapsedUpgradeHookShow()})),this._onUpgradeButtonMount.pipe(u.oA,h.combineLatest(this.cardListContext.pipe(u.oA,h.first())),h.switchMap((([e,t])=>p.n(e,{root:t}).pipe(h.first()))),h.filter(_.Dw),h.map((e=>Math.trunc(100*e[0].intersectionRatio))),h.withLatestFrom(this._upgradeHookExpandReason,this._premiumAlertsCount)).subscribe((([e,t,i])=>{this._gnar.assistantExpandedUpgradeHookShow(i,e,t)})),this._lensState.pipe(h.filter(g.nL.hasCards),h.map((e=>g.In.getActiveItem(e.currentLens))),h.pairwise(),h.filter((([e,t])=>f.Wi(e)&&f.pC(t)))).subscribe((e=>{this.autoFocusEnabled.set(!0)})))}dispose(){this._subs.dispose()}_minimizeUpgradeHook(){return this.activeAlert.pipe(h.distinctUntilChanged(),h.withLatestFrom(this.upgradeHookExpanded),h.filter((([e,t])=>!!(e&&t&&this._isFreeUser))),h.withLatestFrom(this._upgradeViewModel.advancedAlerts),h.map((([e,t])=>(0,a.zG)(t,f.g_((()=>({kind:c.n.State.hidden})),(e=>({kind:c.n.State.minimized,alertsCount:e.count})))))))}_autoOpenUpgradeHook(){return this._lensState.pipe(h.filter((e=>(0,a.zG)(e.currentLens.id,n.R.isAllAlerts))),h.map(m.v.WithSuccess.State.isInSuccess(this._capabilities)),h.combineLatest(this.havePremiumAlerts,((e,t)=>e&&t)),h.distinctUntilChanged(),h.tap((e=>{e&&this._upgradeHookExpandReason.next("alertsAddressed")})),h.withLatestFrom(this._upgradeViewModel.advancedAlerts),h.map((([e,t])=>(0,a.zG)(t,f.g_((()=>({kind:c.n.State.hidden})),(t=>e?{kind:c.n.State.expanded,showCloseButton:!0,alertsState:{count:t.count,alerts:t.alerts()}}:{kind:c.n.State.minimized,alertsCount:t.count}))))))}}},87653:(e,t,i)=>{i.d(t,{O:()=>s});var s,r=i(24332),a=i(90023),n=i(39953),o=i(50548),l=i(61667),c=i(8588),d=i(31343),h=i(3862),u=i(79647),p=i(57304),g=i(31689),m=i(54751),v=i(37402),f=i(66415),_=i(17071),b=i(14944),w=i(21147),S=i(58303),C=i(96299);!function(e){function t(e,t){return v.nL.Items.mapper((e=>e.kind),{[d.X.Kind]:e,[h.R.Kind]:t})}function i(e){return e.kind===d.X.Kind}function s(e){return e.kind===h.R.Kind}function A(e){return i(e)&&p.i.isEthicalAIItem(e)}function y(e){return s(e)&&p.i.isEthicalAIItem(e)}function I(e){return{viewState:(i,s)=>t((t=>({view:t,isLastCard:i,kind:"alertCard",visibleViewportHeight:e(s)})),(t=>({view:t,isLastCard:i,kind:"alertsBundle",visibleViewportHeight:e(s)})))}}e.isSelectableWithAlertItem=(0,_.Kg)(i,s),e.getActiveItemWithAlert=v.In.getActiveItemOfType(e.isSelectableWithAlertItem),e.getActiveAlignableItem=v.In.getActiveItemOfType(e.isSelectableWithAlertItem),e.getActiveFocusableItem=v.In.getActiveItemOfType(e.isSelectableWithAlertItem),e.checksFeedItemsMapper=t,e.isAlertCard=i,e.isAlertsBundle=s,e.isEthicalAIAlertCard=A,e.isEthicalAIAlertsBundle=y,e.defaultOrd=(0,r.g_)(b.iP())([(0,n.zG)(b.C2,b.Uz((0,_.ff)(A))),b.Zt(((e,t)=>i(e)&&i(t)?d.X.ord.compare(e,t):0))]),e.bundlesOrd=(0,r.g_)(b.iP())([(0,n.zG)(b.C2,b.Uz((0,_.ff)(y))),b.Zt(((e,t)=>s(e)&&s(t)?h.R.ord.compare(e,t):0))]),e.item=e=>C.UI.Union.make("kind",{alertCard:o.p.Card(e),alertsBundle:c.Q.Card(e)}),e.viewState=I,e.createCardListFlow=()=>(0,l.sJ)(a.Q1),e.listItemOrd=e=>b.Uz((e=>e.cell.item.view))(e).compare;const E={equals:(e,t)=>e.kind===t.kind&&g.s.eqById.equals(e,t)},P=(e,t)=>({equals:(i,s)=>{const r={[d.X.Kind]:e,[h.R.Kind]:t};return E.equals(i,s)&&(a=e=>e.kind,n=r,(e,t)=>n[a(e)].equals(e,t))(i,s);var a,n}}),M=(0,r.g_)(w.uZ())([m.o.eq,g.s.verticalPositionEq,E]);function L(e){const i=d.X.Capabilities.getChangePosition(e);return{changePosition:e=>t(i.changePosition(e),h.R.changePosition(e))}}function x(e,i){const s=d.X.Capabilities.getAnimatable(e),r=h.R.Capabilities.getAnimatable(i);return{completeTransition:e=>t(s.completeTransition(e),r.completeTransition(e)),transitionTo:e=>t(s.transitionTo(e),r.transitionTo(e)),changeVisualState:e=>t(s.changeVisualState(e),r.changeVisualState(e))}}function k(e,i,s,r){const n=h.R.getCardHydrator(r),o=h.R.getSelect(i,s,n),l=h.R.getSelectByAlert(i,s,n),c=d.X.Capabilities.getSelect(e);return{select:(e,i)=>t(c.select(e,i),o(e,i)),selectByAlert:(e,i,s)=>t(c.selectByAlert(e,i,s),l(i,e,s)),unselect:(e,i)=>t(c.unselect((0,a.MZ)(e),i),h.R.unselect((0,a.MZ)(e),i))}}function R(e,r,a,n){return{removeAlertFromItem:(o,l)=>t((t=>d.X.Capabilities.getRemoveAlerts(e,l.itemsOrd)(o,v.In.getActiveItemOfType(i)(l))(t)),(e=>h.R.Capabilities.getRemoveAlertsCapability(r,a,n,l.itemsOrd)(o,v.In.getActiveItemOfType(s)(l))(e)))}}function T(e,i,s){const r=d.X.Capabilities.getRemove(e);return{remove:(e,a)=>t(r.remove(e,a),(t=>e(t)?h.R.Capabilities.getRemove(i,s)([t.activeAlert],a(t))(t):t))}}function U(e,i,s){const r=d.X.Capabilities.getUpdateWithAlert(e),a=h.R.Capabilities.getUpdatableWithAlertsCapability(i,s);return{updateWithAlerts:e=>t(r.updateWithAlerts(e),a(e))}}e.equatable={structEq:P(d.X.eq,h.R.eq),idEq:P(E,E),visualStateEq:P(M,M)},e.changePosition=L,e.disposable={isScheduledToDispose:t((e=>p.i.willBeDisposed(e,e.removedAlertsIds)),(e=>p.i.willBeDisposed(e,e.removedAlertsIds)))},e.hidable={isHidden:t(m.o.isHidden,m.o.isHidden)},e.animatableItem=x,e.hasAlertsQueries={isSelectableByAlert:e=>t(p.i.hasAlert(e.alert.id),p.i.hasAlert(e.alert.id)),hasAlert:e=>t(p.i.hasAlert(e),p.i.hasAlert(e)),hasActiveAlert:t(p.i.hasActiveAlert,p.i.hasActiveAlert)},e.changePositionStrategyQueries={useReferenceHeightOnRemove:t(a.jv,a.jv)},e.select=k,e.removeAlert=R,e.remove=T,e.updateWithAlert=U,e.releaseAlert=(t,i,s,r)=>f.v.Capabilities.getAlertReleaser({...R(t,i,s,r),...e.disposable}),e.unselectable=(t,i,s,r)=>f.v.Capabilities.getUnselectable(v.In.getActiveItem,{...k(t,i,s,r),...e.disposable}),e.selectableByAlert=(t,i,s,r)=>f.v.Capabilities.getSelectableByAlert(v.In.getActiveItem,{...e.hasAlertsQueries,...k(t,i,s,r),...f.v.Capabilities.getHasChecksFeed(),...e.disposable}),e.selectableById=(t,i,s,r)=>f.v.Capabilities.getSelectableById(v.In.getActiveItem,{...k(t,i,s,r),...e.disposable}),e.updateMeta=()=>({updateMeta:f.v.Capabilities.getMetaUpdatable().updateMeta}),e.animatableFeed=(e,t,i,s)=>f.v.Capabilities.getAnimatable(e,{...R(e,t,i,s),...x(e,s),...f.v.Capabilities.getHasChecksFeed()});const F=t=>["focused","expanded"].includes(t.visualState.transition.type)&&!e.disposable.isScheduledToDispose(t);function G(e){const i=u.Mq.getCardSelections(e);return{nextAlert:t(i.nextAlert,i.nextAlert),prevAlert:t(i.prevAlert,i.prevAlert)}}function B(){return{updateUserInput:e=>t(d.X.updateUserInput(e),h.R.changeUserInput(e))}}e.alignable={isValidToAlign:t(F,F)},e.alertIterator=G,e.itemReleaser=()=>f.v.Capabilities.getItemReleaser(),e.hasAlerts=f.v.Capabilities.getHasAlerts,e.getDefaultNextAlertItemFilter=t=>(0,_.W9)(e.isSelectableWithAlertItem,(i=>!e.disposable.isScheduledToDispose(i)&&(0,n.zG)(i,e.hasAlertsQueries.hasActiveAlert,S.UI((e=>t.isRegistered(e.alert.id))),S.fS(a.jv)))),e.hasUserInput=B,e.verifiable=()=>f.v.Capabilities.getVerifiable(e.disposable),e.cloneable=()=>{const e=g.s.Capabilities.getPojoCloneable().clone;return{clone:t(d.X.Capabilities.getCloneable().clone,e)}},e.getCapabilities=function(t,i,s,r,n=(0,a.a9)(S.YP),o=u.IG.Default){return{...I(n),...e.disposable,...e.hidable,...e.equatable,...B(),...e.cloneable(),...L(t),...x(t,r),...k(t,s,o,r),...T(t,o,r),...R(t,s,o,r),...U(t,i,r),...e.hasAlertsQueries,...e.changePositionStrategyQueries,...e.alignable,...e.releaseAlert(t,s,o,r),...e.unselectable(t,s,o,r),...e.selectableByAlert(t,s,o,r),...e.selectableById(t,s,o,r),...e.updateMeta(t),...e.animatableFeed(t,s,o,r),...e.itemReleaser(),...e.verifiable(),shouldAnimatePositionChange:()=>()=>!1,...e.cloneable(),...e.hasAlerts(G(s),s,(()=>e.isSelectableWithAlertItem),{...e.hasAlertsQueries,...e.disposable})}}}(s||(s={}))},73333:(e,t,i)=>{i.d(t,{Q:()=>s,_:()=>n});var s,r=i(61793),a=i(84602);!function(e){e.settings="settings"}(s||(s={}));class n{constructor(e,t,i){this._assistantLayoutViewModel=e,this._domain=t,this._gnar=i,this._entryPoint=void 0}getDomain(){return this._domain}openFeedback(e){this._entryPoint=e,this._gnar.assistantFeedbackButtonClick(),this._assistantLayoutViewModel.pushActiveView({type:r.a.Type.feedback})}submitFeedback(e){this._entryPoint&&this._gnar.assistantFeedbackSubmitButtonClick(this._entryPoint,e.domain,e.text,(0,a.dK)(e)?e.score:void 0)}}},49140:(e,t,i)=>{i.d(t,{B:()=>s});var s,r=i(76728),a=i(68970);!function(e){e.shouldShow=e=>{var t;return!!(null===(t=e.institutionInfo)||void 0===t?void 0:t.voxEnabled)};const t=e=>({onShow:t=>e.gbPromptFormShow(t),onAccept:t=>e.gbPromptAcceptClick(t),onDismiss:t=>e.gbPromptDismissClick(t)});e.getCardsViewModelSendToURLExperiment=(e,i)=>({handleGbPrompt:r.sU.Experiments.handleGbPrompt(e,{account:{styleGuide:(0,a.Um)().styleGuideSettings,writingStyle:(0,a.Um)().writingStyleSettings}},t(i))})}(s||(s={}))},61793:(e,t,i)=>{i.d(t,{D:()=>l,a:()=>s});var s,r=i(10859),a=i(2465),n=i(58679),o=i(79992);!function(e){let t;!function(e){e.default="default",e.emogenie="emogenie",e.feedback="feedback",e.settings="settings",e.proofitRequest="proofitRequest",e.proofitReview="proofitReview",e.startupPlaceholder="startupPlaceholder"}(t=e.Type||(e.Type={})),e.isDefault=function(t){return t.type===e.Type.default},e.isEmogenie=function(t){return t.type===e.Type.emogenie},e.isFeedback=function(t){return t.type===e.Type.feedback},e.isSettings=function(t){return t.type===e.Type.settings},e.isProofitRequest=function(t){return t.type===e.Type.proofitRequest},e.isProofitReview=function(t){return t.type===e.Type.proofitReview}}(s||(s={}));class l extends n.A{constructor(e,t,i,n,l=a.V.defaultLayout){super({type:s.Type.startupPlaceholder},{type:s.Type.default}),this.browser=n,this.layout=l,this._sub=new r.Subscription,this._sub.add(t.subscribe((e=>{if(e.length>0)for(;!this.activeViewHasAlerts();)this.popActiveView()})));const c=new Set([s.Type.emogenie]);this._sub.add(i.pipe(r.debounceTime(100),r.filter(o.fQ)).subscribe((()=>{if(c.has(this._activeView.get().type))for(;this._activeView.get().type!==this._defaultView.type;)this.popActiveView()}))),this._sub.add(this._activeView.subscribe((t=>{switch(t.type){case s.Type.settings:return void e.assistantSettingsShow();case s.Type.proofitRequest:return void e.proofitRequestFormShow();default:return}})))}activeViewHasAlerts(){switch(this._activeView.get().type){case s.Type.default:case s.Type.emogenie:return!0;default:return!1}}popActiveView(){const e=this._viewHistory.pop()||this._defaultView;this._activeView.set(e)}get isHeaderNavigationEnabled(){return this._activeView.view((e=>e.type!==s.Type.feedback))}dispose(){this._sub.unsubscribe()}}},81549:(e,t,i)=>{i.d(t,{S:()=>h});var s=i(57188),r=i(60165),a=i(96030),n=i(70989),o=i(55446),l=i(36880),c=i(61793),d=i(97683);class h{constructor(e,t,i,s){this.feature=t,this._closeAssistant=i,this._gnar=s,this._subs=[],this._subs.push(this.feature.requestInfo.view("status").pipe((0,r.x)(),(0,a.G)(),(0,n.M)(e.activeView)).subscribe((([[t,i],s])=>{t===d.eE.REVIEWING&&s.type===c.a.Type.proofitReview&&e.popActiveView()}))),this._subs.push(this.feature.layoutCreated.pipe((0,n.M)(e.activeView)).subscribe((([t,i])=>{i.type!==c.a.Type.proofitRequest&&i.type!==c.a.Type.proofitReview||t||e.popActiveView()})))}onSubmitRequest(e){this.feature.submitRequest(),this._gnar.proofitRequestFormSubmit();const t=this.feature.requestInfo.lens("status").pipe((0,o.h)((e=>e===d.eE.ACCEPTED)));(0,s.F)(100).pipe((0,l.R)(t)).subscribe({complete:()=>this._closeAssistant(e)})}onCompleteRequest(e){this.feature.resetRequest(),this._gnar.proofitOrderDone(),this._closeAssistant(e)}onSubmitFeedback(e){this._gnar.proofitFeedbackFormSubmit(e.text,e.score)}dispose(){this._subs.forEach((e=>e.unsubscribe()))}}},87190:(e,t,i)=>{i.d(t,{fA:()=>l,pL:()=>v});var s=i(39953),r=i(49231),a=i(41455),n=i(51980);const o=({message:e,emoji:t,emojiId:i,icon:s,iconPartName:o})=>r.createElement("div",{className:n.insight},t&&i&&r.createElement("div",{className:n.insight__inline_icon},r.createElement(a.dy,{unicodeHexArray:[i],unicodeLiteral:t})),s&&r.createElement("div",{className:n.insight__inline_icon,"data-grammarly-part":o},s),r.createElement("div",{className:n.insight__inline_text},e));var l,c=i(80458),d=i(72415),h=i(4088),u=i(10859),p=i(43818),g=i(96299),m=i(36555);!function(e){e.hidden="hidden",e.zero="zero",e.visible="visible"}(l||(l={}));const v=({predictionsVM:e})=>g.UI.mount(C,e.previewFlow),f=g.UI.Grid.make((({slots:e})=>r.createElement("div",{className:m.predictions},r.createElement("div",{className:m.predictions__header},"Predictions"),e.children))),_=({children:e,count:t,dataPartName:i})=>r.createElement(c.Z,{kind:"assistant-priority-lens",dataPartName:i,marginBottom:"12px"},r.createElement("div",{className:m.predictions__card},e,t>0&&r.createElement("div",{className:m.counterContainer},r.createElement(h.CL,null,t)))),b=g.UI.Node.make((({state:e,notify:t})=>r.createElement(d.M,{clickHandler:t("select")},r.createElement(p.F.Fragment,null,e.pipe(u.map((e=>r.createElement(_,{count:e.alertsCount,dataPartName:"emogenie-prediction-card"},r.createElement(o,{key:"tone",message:"off"===e.emotion.brandToneLabel?r.createElement(r.Fragment,null,"May sound ",r.createElement("span",{className:m.predictions__off_brand},"off-brand")):`Sounds ${e.emotion.name}`,emoji:e.emotion.emoji,emojiId:e.emotion.emojiId}))))))))),w=g.UI.Group.make({tone:(S=b,{tag:"_tag",members:{Some:(0,s.zG)(S,g.UI.contramapState((e=>e.value))),None:g.UI.Node.empty}})});var S;const C=g.UI.Union.make("kind",{[l.hidden]:g.UI.Node.empty,[l.zero]:g.UI.Node.empty,[l.visible]:g.UI.Composite.make(f,w)})},32315:(e,t,i)=>{i.d(t,{g:()=>s});var s,r=i(39953),a=i(10859),n=i(7280),o=i(52256);!function(e){e.createSubscription=function(e,t,i){return e.pipe(a.filter(n.lY.isAlertApplyAction)).subscribe((e=>(0,r.zG)(i(e.alertId),o.bw((e=>{"unlocked"===o.Fc(e.extraProperties.freePremium)&&t.freePremiumSuggestionAcceptButtonClick("assistant")})))))}}(s||(s={}))},48555:(e,t,i)=>{i.d(t,{c:()=>r});var s=i(30219);class r{constructor(e){this._highlights=e}addHighlight(e,t,i){return this._highlights.addHighlight(e,t,i)}updateHighlight(e,t,i){return this._highlights.updateHighlight(e,t,i)}removeHighlights(e){return this._highlights.removeHighlights(e)}recalculateHighlight(e){return this._highlights.recalculateHighlight(e)}recalculateAllHighlights(){return this._highlights.recalculateAllHighlights()}maintainConsistency(e,t=(e=>e),i=!1){return this._highlights.maintainConsistency(e,t,i)}hasHighlight(e){return this._highlights.hasHighlight(e)}getSelectedHighlightsTracker(e){return(0,s.H)({...e,highlights:this._highlights})}getGeometryByHighlightId(e){return this._highlights.geometry.get().get(e)}}},58679:(e,t,i)=>{i.d(t,{A:()=>r});var s=i(25770);class r{constructor(e,t){this._viewHistory=[],this._startupPlaceHolder=e,this._activeView=s.h.create(this._startupPlaceHolder),this._defaultView=t}get activeView(){return this._activeView.view()}get lastView(){return this._viewHistory[this._viewHistory.length-1]||this._defaultView}pushActiveView(e){const t=this._activeView.get();e.type!==t.type&&(t.type!==this._startupPlaceHolder.type&&this._viewHistory.push(t),this._activeView.set(e))}popActiveView(){const e=this._viewHistory.pop()||this._defaultView;this._activeView.set(e)}replaceActiveView(e){e.type!==this._activeView.get().type&&this._activeView.set(e)}}},68338:(e,t,i)=>{var s;i.d(t,{R:()=>s}),function(e){e.Close="Close"}(s||(s={}))},645:(e,t,i)=>{i.d(t,{I:()=>c,S:()=>s});var s,r=i(49231),a=i(18983),n=i(80953),o=i(48886),l=i(46412);!function(e){e.Context=r.createContext(n.Y.invariantContent("SidebarTextResources")),e.holder=o.VF((()=>({logoText:"GRAMMARLY",plagiarismTooltip:"Scan for plagiarism",setGoalsTooltip:"Adjust goals",statisticsTooltip:"See performance"}))),e.replacePremiumWithProInDenaliUpgradeHooks=o.UI((e=>({...e,goPremium:"Go Pro",premiumSuggestions:"Pro suggestions",sidebar:{...e.sidebar,content:{...e.sidebar.content,premiumIssues:{...e.sidebar.content.premiumIssues,foundTitleSingular:{...e.sidebar.content.premiumIssues.foundTitleSingular,description2:e.sidebar.content.premiumIssues.foundTitleSingular.description2.replace("Premium","Pro")},foundTitlePlural:{...e.sidebar.content.premiumIssues.foundTitlePlural,description2:e.sidebar.content.premiumIssues.foundTitlePlural.description2.replace("Premium","Pro")}}}}}))),e.denaliHolder=o.VF((t=>t.isGrammarlyPro?e.replacePremiumWithProInDenaliUpgradeHooks(a.m.holder)(t):a.m.holder(t)))}(s||(s={}));const c=l.GG({denali:s.denaliHolder,sidebar:s.holder})},63314:(e,t,i)=>{i.d(t,{US:()=>z,hz:()=>D,ux:()=>W});var s=i(90023),r=i(49231),a=i(75787),n=i(53937),o=i(91747),l=i(52470),c=i(29614),d=i(16505),h=i(37402),u=i(71446),p=i(65647),g=i(39620),m=i(36072),v=i(14765),f=i(20715),_=i(65882),b=i(80724),w=i(90049),S=i(78084),C=i(60841),A=i(8748),y=i(30586),I=i(78488),E=i(14946),P=i(65802),M=i(55446),L=i(64965),x=i(34859),k=i(10859),R=i(58303),T=i(11415),U=i(43818),F=i(19813),G=i(96299),B=i(87653),V=i(50956),H=i(1127);const O=G.UI.Grid.make((({slots:e,view:t})=>r.createElement(U.F.div,{style:{marginBottom:t("spacing").pipe(p.U(a.ux.rem))}},e.children)));function z(){return 1}const D=r.forwardRef((function({state:e,cardsViewModel:t,cardsListScrollManager:i,connectorElements:a,header:c,footer:d,capabilities:p,comparator:_},b){const w=g.jw((e=>{let t=7;return t=31*t+(0,o.AC)(e.currentLens.id),t=31*t+(h.nL.hasItems(e)?1231:1237),t}),e).view((e=>h.nL.hasItems(e.get())?e.view(h.nL.Prism.getLens()):null)).view((e=>e?{state:e,spacing:1}:null)),S=r.useContext(V.Dg).state;return r.createElement(u.d,{className:f.of(""),name:"cardlist",stateSyncListener:N(i,a,S),height:W(e,i,p),isMaster:!0},r.createElement(r.Fragment,null,c?r.createElement(U.F.div,{className:H.headerOrFooterWrapper,mount:e=>a.lens("title").set(R.ij(e))},c):null,r.createElement(U.F.div,{mount:b},w.view((e=>{return e?G.UI.mount((r=e.spacing,(0,s.zG)(n.A.cardList(B.O.item(t.actionEvents)),G.UI.patch("content","cell","item")((e=>(0,s.zG)(G.UI.Knot.make(O,{children:e.child}),G.UI.squash,G.UI.contramapState((e=>({children:e,root:{spacing:r}})))))))),(e=>(0,s.zG)(B.O.createCardListFlow()(t,e,new m.xQ,l.i$(i).pipe(v.O(!1)),p,_)))(e.state)):null;var r}))),d?r.createElement(U.F.div,{className:H.headerOrFooterWrapper},d):null))})),W=(e,t,i)=>{const s=(0,d.Sd)(i)(e.view(h.nL.mapper((({currentLens:e,alertSource:t})=>R.G({currentLens:e,alertSource:t})))));return _.aj([s.pipe(b.oA,p.U((({currentLens:e})=>e.cardsHeight)),v.O(0)),t.paddingTop]).pipe(p.U((([e,t])=>e+t)))},N=(e,t,i)=>{const s=F.C8.Logging.getLogger("view_models");return w.T(S.P((()=>{e.paddingTop.set(0)})),t.view("viewport").pipe(C.w(R.g_((()=>A.E),(e=>y.YC(e).pipe(I.b((()=>s.debug("update card list viewport due to viewport resize event"))),E.T(i.pipe(P.j("dragging"),M.h((e=>!e)),C.w(g.b2.rafScheduler),I.b((()=>s.debug("update card list viewport due to drag end event"))))),p.U((()=>e.getBoundingClientRect())),p.U((e=>({top:c.r.FromWindowTop.ISO.wrap(e.top),height:e.height}))))))),I.b(g.wW(e.viewport))),t.view("scrollProvider").pipe(C.w(R.g_((()=>A.E),(t=>L.R(t,"scroll").pipe(p.U((()=>t.scrollTop)),v.O(t.scrollTop),I.b(g.wW(e.scrollTop)),x.h(g.PU)))))),t.view("title").pipe(C.w(R.g_((()=>f.of(T.UL.empty)),(e=>y.YC(e)))),p.U((e=>e.height)),k.shareReplay({bufferSize:1,refCount:!0}),I.b(g.wW(e.paddingTop))),t.view("scrollConsumer").pipe(C.w(R.g_((()=>A.E),(t=>e.scrollOffset.pipe(I.b((e=>{t.scrollTop+=e})))))))).pipe(x.h(void 0))}},38459:(e,t,i)=>{i.d(t,{C:()=>T,S:()=>R});var s=i(90023),r=i(49231),a=i(97641),n=i(9690),o=i(61804),l=i(42370),c=i(91747),d=i(66415),h=i(71446),u=i(39620),p=i(80724),g=i(65647),m=i(11415),v=i(58303),f=i(43818),_=i(96299),b=i(87653),w=i(63314),S=i(43420),C=i(82998),A=i(10859),y=i(95486),I=i(95627);const E=({upgradeViewModel:e})=>{const t=e.advancedAlerts.pipe(A.map(v.UI((e=>({count:e.count,alerts:e.alerts()})))));return r.createElement(f.F.div,{className:I.premiumLens},_.UI.mount(C.r,_.Z.fromSideEffect((t=>{"upgrade"===t.action.action.action.kind?(e.trackUpgradeButtonClick({placement:"advancedIssues",bannerType:"GoPremium",upgradeHookName:"advancedIssues",upgradeHookSlot:"gDocsSidebarSuccessView"}),e.openUpgradeUrl(y.L.Place.gdocsSidebarCardList)):"onUpgradeButtonMount"===t.action.action.action.kind&&e.trackUpgradeButtonShow({placement:"advancedIssues",bannerType:"GoPremium",upgradeHookName:"advancedIssues",upgradeHookSlot:"gDocsSidebarSuccessView"})}),t)))};var P=i(18983),M=i(11168),L=i(8170),x=i(542);const k=({successLensViewModel:e})=>{const t=(0,M.hM)((0,M.wK)(e.successState.view("type"),r.useContext(P.m.Context)));return r.createElement(f.F.div,{className:x.successLens},_.UI.mount(L.q,t))},R=r.forwardRef((function({state:e,cardsViewModel:t,upgradeViewModel:i,cardsListScrollManager:s,capabilities:a,upgradeHookFlow:h,...p},g){const m=u.jw((e=>{let t=7;return t=31*t+(0,c.AC)(e.currentLens.id),t=31*t+(d.v.WithSuccess.State.isInSuccess(a)(e)?1231:1237),t}),e);return r.createElement(n.G.DefaultProvider,null,r.createElement(T,{ref:g},(e=>r.createElement(f.F.Fragment,null,m.view((n=>{const c=n.get();return c.currentLens.id===o.R.SpecialId.Premium?r.createElement(E,{upgradeViewModel:i}):d.v.WithSuccess.State.isInSuccess(a)(c)?r.createElement(k,{successLensViewModel:p.successLensViewModel}):r.createElement("div",null,r.createElement(w.hz,{state:n,cardsViewModel:t,cardsListScrollManager:s,connectorElements:e,header:_.UI.mount(l.n.TogglablePanel,h),comparator:b.O.listItemOrd,capabilities:a}))}))))))})),T=r.forwardRef((function({children:e,onClick:t,className:i=S.cardList,footer:n,...o},l){const c=h.d.Elements.create(),d=(0,s.zG)(c.view("viewport"),p.oA,g.U(m.UL.fromEl));return r.createElement("div",{...o,onClick:t,className:i,ref:e=>{"function"==typeof l?l(e):l&&(l.current=e);const t=v.ij(e);c.lens("scrollConsumer").set(t),c.lens("scrollProvider").set(t),c.lens("viewport").set(t)}},r.createElement(a.l.RootVirtualContainer,{name:"cardListConnector",viewport:d},e(c)),n)}))},56301:(e,t,i)=>{i.d(t,{Z:()=>u});var s=i(49231),r=i(61804),a=i(16587),n=i(78465),o=i(68567),l=i(62987),c=i(43818),d=i(86952),h=i(5706);const u=({lensPreviewViewModel:e,openPlagiarismPage:t,showPlagiarismButton:i,isPlagiarismPageActive:a,closePlagiarismPage:n,plagiarismCheckingStatus:o,plagiarismPopover:l,plagiarismPopoverActionsHandler:u})=>{const g=e.getLens(r.R.SpecialId.AllAlerts).view((e=>e.count));return s.createElement(c.F.div,{className:h.footer},o.view((e=>"OnTextChange"===e?s.createElement("div",{style:{marginLeft:"12px",marginTop:"4px"}},s.createElement(d.T,null)):s.createElement(p,{activeAlerts:g,openPlagiarismPage:t,showPlagiarismButton:i,isPlagiarismPageActive:a,closePlagiarismPage:n,plagiarismPopover:l,plagiarismPopoverActionsHandler:u}))))};function p({activeAlerts:e,openPlagiarismPage:t,showPlagiarismButton:r,isPlagiarismPageActive:n,closePlagiarismPage:o,plagiarismPopover:l,plagiarismPopoverActionsHandler:c}){const d=s.lazy((()=>Promise.all([i.e(5636),i.e(7470)]).then(i.bind(i,94594)).then((({PlagiarismButton:e})=>({default:e})))));return s.createElement("div",{style:{display:"flex",justifyContent:"space-between",width:"100%"}},s.createElement(a.k,{justify:"start",align:"center",gap:2,marginLeft:4},s.createElement(g,{activeAlerts:e}),s.createElement("p",{style:{fontSize:"12px"}},"Alerts left")),s.createElement(s.Suspense,{fallback:s.createElement("div",null)},s.createElement(d,{showPlagiarismButton:r,openPlagiarismPage:t,isPlagiarismPageActive:n,closePlagiarismPage:o,popover:l,popoverActionsHandler:c})))}const g=({activeAlerts:e})=>s.createElement(c.F.Fragment,null,e.view((e=>e>0?s.createElement(n.C,{count:e,variant:"neutral",getAriaLabelText:e=>`${e} Alerts left`}):s.createElement(o.J,{icon:l.j,accessibilityLabel:"No Alerts"}))))},93666:(e,t,i)=>{i.d(t,{$:()=>w,y:()=>S});var s=i(49231),r=i(86820),a=i(7305),n=i(9690),o=i(79560),l=i(61804),c=i(58276),d=i(58303),h=i(68567),u=i(47305),p=i(76670),g=i(99627),m=i(96299),v=i(645),f=i(81259),_=i(29357),b=i(41927);const w=({navigationViewModel:e,modalManager:t,experimentClient:i})=>s.createElement(n.G.DefaultProvider,null,s.createElement(S,{navigationViewModel:e,modalManager:t,experimentClient:i})),S=({navigationViewModel:e,modalManager:t,experimentClient:i,showLensNavigation:r=!0})=>s.createElement("div",{className:r?b.defaultHeaderWithLenses:b.defaultHeader},s.createElement(n.G.DefaultProvider,null,s.createElement(C,{modalManager:t,experimentClient:i,navigationViewModel:e}),r&&s.createElement("div",{...(0,g.Sh)(b.lensNavigation,b.disabledLensNavigation)},m.UI.mount(c.C,m.Z.fromSideEffect((t=>{e.events.next({type:"switchToLens",id:t.lens.id,focusFirst:!1,actionSource:o.l$.sidebar})}),{activeLensId:d.YP,previews:Object.values(e.lensPreviews).filter((e=>e.id!==l.R.SpecialId.Vox)),disabled:!1}))))),C=({navigationViewModel:e,modalManager:t,experimentClient:i})=>{const n=s.useContext(v.S.Context),l="test"!==i.getTreatment(f.p.RemoveSetGoalsGDocs),c=t.state.view(d.Gg((e=>e.instance.type===a.dC.SetGoals)));return s.createElement("div",{className:b.head},s.createElement("div",{className:b.headerGroup},s.createElement(_.T,{type:"full",className:b.logoIcon})),l&&s.createElement(r.zx.Flat,{name:"setGoals",className:b.setGoalsButton,title:n.setGoalsTooltip,titleAlign:"bottomCenter",active:c,disabled:c,onClick:()=>e.events.next({type:"setGoals"})},s.createElement(h.J,{icon:u.D,accessibilityLabel:"Set Goals",size:"large"})),s.createElement("div",{className:b.headerGroup},l&&s.createElement("div",{className:b.divider}),s.createElement(r.zx.Flat,{name:"closeSidebar",onClick:()=>e.events.next({type:"toggleSidebar",actionSource:o.l$.sidebar})},s.createElement(h.J,{icon:p.V,accessibilityLabel:"Close",size:"small"}))))}},25576:(e,t,i)=>{i.d(t,{L:()=>o});var s=i(90023),r=i(49231),a=i(58303),n=i(43818);const o=({modalManager:e})=>r.createElement(n.F.Fragment,null,e.state.view((0,s.ls)(a.UI((({component:e})=>e)),a.WG)))},81434:(e,t,i)=>{i.d(t,{P:()=>o});var s=i(49231),r=i(78565),a=i(22723),n=i(96519);const o={unauthorizedError:(e,t)=>s.createElement(a.s.UnauthorizedError,{action:t("gotoLogin")}),offline:()=>s.createElement(l,null),alertUndo:(e,t)=>s.createElement(n.A.Standard,{action:t("undo"),params:e.args.params})},l=()=>s.createElement(r.DI.TitledContent,{title:"Lost Connection"},"Your Internet session was interrupted.")},78285:(e,t,i)=>{i.d(t,{Q:()=>l});var s=i(49231),r=i(9074),a=i(80724),n=i(10859),o=i(58303);const l=({children:e,remSize:t,setter:i})=>(c+=1,s.useEffect((()=>{const e=t.subscribe((e=>{d.next(o.G(e)),i(o.G(e))}));return()=>{e.unsubscribe(),c-=1,0===c&&(d.next(o.YP),i(o.YP))}}),[t]),s.createElement(r.u.Context.Provider,{value:d.pipe(a.oA)},e));let c=0;const d=new n.BehaviorSubject(o.YP)},53339:(e,t,i)=>{i.d(t,{_:()=>a});var s=i(49231),r=i(43818);const a=({children:e,position:t,className:i})=>s.createElement(r.F.div,{className:i,style:t.view((e=>({position:"fixed",right:e.right,top:e.top,bottom:"0px",width:e.width,zIndex:e.zIndex,background:"white",display:"flex",flexDirection:"column",justifyContent:"space-between",height:e.height}))),"data-grammarly-part":"legacy-sidebar-container"},e)},2509:(e,t,i)=>{i.d(t,{I:()=>n});var s=i(73964),r=i(39756);const a={priority:s.P.Priority.highest,timeout:s.P.TimeoutDisabled,position:s.P.Position.top,viewType:s.P.ViewType.standard};var n;!function(e){e.createFactory=function(){return{alertUndo:r.r.createBuilder().build({priority:s.P.Priority.low,timeout:s.P.DefaultTimeout,position:s.P.Position.bottomRight,viewType:s.P.ViewType.standard}),unauthorizedError:r.r.createBuilder().build(a),offline:r.r.createBuilder().build(a)}}}(n||(n={}))},57324:(e,t,i)=>{i.d(t,{U9:()=>W,jv:()=>j});var s=i(49231),r=i(99747),a=i(9690),n=i(68811),o=i(9074),l=i(18983),c=i(47065),d=i(80724),h=i(10859),u=i(39620),p=i(15542),g=i(73775),m=i(58303),v=i(68259),f=i(43818),_=i(25770),b=i(11959),w=i(90342),S=i(35063),C=i(62566),A=i(4603),y=i(74514),I=i(45411),E=i(645),P=i(38459),M=i(56301),L=i(93666),x=i(25576),k=i(81434),R=i(78285),T=i(53339),U=i(37128),F=i(90107),G=i(21740),B=i(77365),V=i(63376),H=i(22873),O=i(44094),z=i(94340);const D=({state:e,cardsViewModel:t,navigationViewModel:r,successLensViewModel:a,upgradeViewModel:n,cardsListScrollManager:o,notificationManager:l,lensPreviewViewModel:u,modalManager:p,capabilities:g,upgradeHookFlow:b,plagiarismEntities:A,onTogglePlagiarism:I,plagiarismCheckingState:E,experimentClient:x,gnar:R,position:U})=>{const G=new z.W(m.YP),B=(0,w.O)(R);(0,F.A)(((e,t)=>e.pipe(d.oA,h.tap((({plagiarismVM:e})=>{t.setPlagiarismVM(e)})),h.switchMap((({plagiarismVM:e,plagiarismButtonSub:t})=>t.pipe(h.map(m.UI((t=>({gbutton:t,plagiarismVM:e}))))))),d.oA,h.tap((({gbutton:e,plagiarismVM:i})=>{i.setPlagiarismButtonActions((0,S.Zq)(e.actions,e.id)),t.setShowPlagiarismButton(!0)}))))(A,G)),(0,F.A)(((e,t)=>e.pipe(d.oA,h.switchMap((({trackPlagiarismAlertsEditing:e})=>e(t.plagiarismAlertEditToLook)))))(A,B));const V=s.lazy((()=>Promise.all([i.e(5636),i.e(6178),i.e(9366)]).then(i.bind(i,26849)).then((({Plagiarism:e})=>({default:e}))))),D=s.createElement(f.F.Fragment,null,G.activeSidebarPage.view((i=>{switch(i){case"Default":return s.createElement(s.Fragment,null,s.createElement(L.$,{state:e,navigationViewModel:r,modalManager:p,lensPreviewViewModel:u,experimentClient:x}),s.createElement(P.S,{cardsViewModel:t,state:e,successLensViewModel:a,upgradeViewModel:n,cardsListScrollManager:o,capabilities:g,upgradeHookFlow:b}));case"Plagiarism":return s.createElement(s.Fragment,null,s.createElement(L.y,{navigationViewModel:r,modalManager:p,experimentClient:x,showLensNavigation:!1}),s.createElement(s.Suspense,{fallback:s.createElement("div",null)},s.createElement(V,{cardsListScrollManager:o,plagiarismEngine:G.unsafeGetPlagiarismVM().plagiarismEngine,notificationManager:C.u,switchToDefaultFeed:()=>G.closePlagiarismPage(),plagiarismCheckingState:E})));default:(0,v.vE)(i)}}))),W=()=>{E.set("OnSwitchToPlagiarism"),I(!0),G.openPlagiarismPage(),B.gdocsPlagiarismButtonClick()},N={handleGButtonPopoverAction:e=>{const t=A.get();m.pC(t)&&t.value.popoverActionsHandler({openPlagiarism:()=>W()}).handleGButtonPopoverAction(e)}};return s.createElement(T._,{className:O.sidebarContainer,position:U},s.createElement(y.L,{chunkName:"designSystem"},D,s.createElement(M.Z,{lensPreviewViewModel:u,openPlagiarismPage:W,closePlagiarismPage:()=>{I(!1),G.closePlagiarismPage()},showPlagiarismButton:G.isShouldShowPlagiarismButton,isPlagiarismPageActive:G.showPlagiarismPage(),plagiarismCheckingStatus:E,plagiarismPopover:A.pipe(h.switchMap(m.g_((()=>_.h.create(m.YP)),(e=>e.popover)))),plagiarismPopoverActionsHandler:N}),s.createElement(c.i,{key:"notificationCenter",manager:l,views:k.P,theme:{grid:{container:H.container,bottomLeft:H.bottomLeft,bottomRight:H.bottomRight,top:H.top},view:{wrapper:H.notificationWrapper}}})))};function W(e){return({integration:t,sidebarReady:a,ethicalAIFeature:n,cardEvents:o,sduiEngine:l,user:c,_getByRawAlertId:d,startWithExpandedUphook:g,experimentClient:v,plagiarismCheckingState:f,getCheckingService:w,position:S})=>function(){const C=t.engine,y=new I.C((0,A.nD)()),E=_.h.create(!1),{lensState:P,cardsViewModel:M,navigationViewModel:L,successLensViewModel:k,upgradeViewModel:R,dispose:T,cardsListScrollManager:F,notificationManager:G,lensPreviewViewModel:B,modalManager:V,capabilities:H,upgradeHookFlow:O}=(0,U.G)(C,t.denaliViewAdapter,e,t.connectionState,t.gnar,t.user,c,t.document.settings.lens("selectedLens"),a,n,o,t.experimentClient,g,E,w),z=_.h.create(m.YP),W=h.defer((()=>Promise.all([i.e(5636),i.e(7216),i.e(9569),i.e(6178),i.e(6044),i.e(1196)]).then(i.bind(i,80144)))).pipe(h.map((({setupSduiManagement:e,createPlagiarismViewModels:i,createPlagiarismEntities:s})=>{const{sduiFeedbackService:r,capiClient:a,sduiManager:n}=e(l,d,C.alertsList.state);return s(m.G({sduiManager:n,sduiFeedbackService:r,capiClient:a}),i,{engine:t.engine,capiProxy:t.capiProxy,ded:t.denaliViewAdapter,environment:y,showPlagiarismAlerts:E})}))).subscribe(u.wW(z));return p.P.useEffectOnWillUnmount((()=>{C.shutdown(),W.unsubscribe(),T()})),s.createElement(N,{environment:y,isGrammarlyPro:(0,b.y)(v)},s.createElement(D,{user:c,gnar:t.gnar,state:P,cardsViewModel:M,navigationViewModel:L,successLensViewModel:k,upgradeViewModel:R,cardsListScrollManager:F,notificationManager:G,lensPreviewViewModel:B,modalManager:V,capabilities:H,upgradeHookFlow:O,plagiarismEntities:z,onTogglePlagiarism:e=>E.set(e),plagiarismCheckingState:f,experimentClient:v,position:S}),s.createElement(x.L,{modalManager:V}),s.createElement(r.X,null))}}const N=({environment:e,children:t,isGrammarlyPro:i})=>{const r=s.useRef((0,E.I)({...l.m.getConfig(e.has(I.U.Flag.isAppleSystem)?"mac":"windows"),isGrammarlyPro:i}));return s.createElement(R.Q,{remSize:h.of(16),setter:e=>o.u.setRootCssVar(document.documentElement,e)},s.createElement(I.U.Context.Provider,{value:e},s.createElement(n.a.Context.Provider,{value:e},s.createElement(E.S.Context.Provider,{value:r.current.sidebar},s.createElement(l.m.Context.Provider,{value:r.current.denali},s.createElement(g.TG.ContextMock,null,s.createElement(a.G.DefaultProvider,null,s.createElement(j,null,t))))))))},j=({children:e})=>s.createElement(s.Fragment,null,s.createElement(B.o,{"data-grammarly-part":"gdocs-sidebar",className:V.wrapper},e),s.createElement(G.p,{thin:!0,thinItalic:!0,regular:!0,italic:!0,bold:!0,boldItalic:!0,semiBold:!0}))},4976:(e,t,i)=>{i.d(t,{CV:()=>A,hp:()=>C,k9:()=>y});var s=i(90023),r=i(39953),a=i(13044),n=i(79560),o=i(61804),l=i(10859),c=i(80724),d=i(39620),h=i(61026),u=i(21657),p=i(29614),g=i(16505),m=i(55395),v=i(37402),f=i(58303),_=i(52256),b=i(25770),w=i(70932);class S{constructor(e,t){this._cardPositions=e,this._markPositions=t,this._log=w.Y.create("SidebarAlignmentViewModelImpl")}alignCardToMark({id:e,renderOptions:{features:t},activeAlert:i,activeHighlightIndex:s},a){return l.defer((()=>this._markPositions.getMarkAlertPosition({alert:i,highlightIndex:s}))).pipe(c.oA,l.map((i=>(0,r.zG)(this._cardPositions.getCardSuggestedPositionInViewport(e,t.has(m.j.Features.showLabel),f.G(i),"cardContentTop"),f.Uo))),c.oA,l.switchMap((i=>this._cardPositions.setCardPosition(e,t.has(m.j.Features.showLabel),!0,i.top))),l.mapTo(d.PU),l.catchError((e=>(this._log.error("Cannot align card to mark",e),l.EMPTY))),l.share())}alignMarkTo(e,t,i,s){return l.defer((()=>l.of((0,r.zG)(this._cardPositions.getCardSuggestedPositionInViewport(e.id,e.renderOptions.features.has(m.j.Features.showLabel),f.G(i),"cardContentTop"),f.Uo)).pipe(c.oA))).pipe(l.switchMap((i=>l.mergeStatic(this._markPositions.moveAlertHighlightInViewport(t,p.r.FromWindowTop.ISO.modify(p.L.concatC(i.contentOffset))(i.top),a.uq.initial),this._cardPositions.setCardPosition(e.id,e.renderOptions.features.has(m.j.Features.showLabel),!0,i.top)))),l.mapTo(d.PU),l.catchError((e=>(this._log.error("Cannot align mark to suggested position",e),l.EMPTY))),l.share())}alignMarkToCard({id:e,renderOptions:{features:t},activeHighlightIndex:i,activeAlert:s},n,o=f.YP){return l.defer((()=>l.of((0,r.zG)(this._cardPositions.getCardSuggestedPositionInViewport(e,t.has(m.j.Features.showLabel),o,"cardContentTop"),f.Uo)).pipe(c.oA))).pipe(l.switchMap((r=>l.mergeStatic(this._markPositions.moveAlertHighlightInViewport({alert:s,highlightIndex:i},p.r.FromWindowTop.ISO.modify(p.L.concatC(r.contentOffset))(r.top),a.uq.initial),this._cardPositions.setCardPosition(e,t.has(m.j.Features.showLabel),!0,r.top)))),l.mapTo(d.PU),l.catchError((e=>(this._log.error("Cannot align mark to card",e),l.EMPTY))),l.share())}alignCardTo(e,t,i){const s=i!==h.v.Animation.NO_ANIMATION;return l.defer((()=>l.of((0,r.zG)(this._cardPositions.getCardSuggestedPosition(e.id,e.renderOptions.features.has(m.j.Features.showLabel),f.G(t),"cardTop"),f.Uo)).pipe(c.oA))).pipe(l.switchMap((t=>this._cardPositions.setCardPosition(e.id,e.renderOptions.features.has(m.j.Features.showLabel),s,t.top))),l.mapTo(d.PU),l.catchError((e=>(this._log.error("Cannot align card to required top",e),l.EMPTY))),l.share())}}const C=(e,t,i,s,r,a)=>new S(u.eZ.getSuperScrollMapper(e,s,b.h.create(16)),u.UC.getMapper(t,r,a));var A;!function(e){e.skip="skip"}(A||(A={}));const y=(e,t,i,a,c,u=d.b2.rafScheduler)=>{const m=(e,i,s,r)=>{if(s===n.l$.text)return t.alignCardToMark(e,i?h.v.Animation.ANIMATE_ALL:h.v.Animation.NO_ANIMATION,!0);if(s===v.h8.forceText)return t.alignCardToMark(e,h.v.Animation.NO_ANIMATION,!1);{const a=s===n.l$.sidebar;return t.alignMarkToCard(e,a?i?h.v.Animation.ANIMATE_ALL:h.v.Animation.ANIMATE_MARK:h.v.Animation.NO_ANIMATION,r)}},b=l.mergeStatic(e.view(v.nL.mapper((({currentLens:e,alertSource:t})=>f.G({currentLens:e,alertSource:t})))).pipe(l.startWith(f.YP),l.map(f.UI((e=>e.currentLens.id))),l.pairwise(),l.filter((([e,t])=>(0,r.zG)(_.vB(((e,t)=>e!==t))(e,t),f.Gg(s.yR)))),l.mapTo(f.YP)),e.view(v.nL.mapper((({currentLens:e,alertSource:t})=>f.G({currentLens:e,alertSource:t})))).pipe(l.filter(f.Gg((({currentLens:e})=>(0,g.Bk)(c)(e)))),l.map(f.tS((({currentLens:e,alertSource:t})=>(0,r.zG)(a(e),f.hX(c.isValidToAlign),f.UI((i=>({item:i,source:t,lensId:e.id}))))))))).pipe(l.distinctUntilChanged((0,s.ls)(_.vB(((e,t)=>e.lensId===t.lensId&&e.item.activeAlert.id===t.item.activeAlert.id&&e.item.visualState.transition.type===t.item.visualState.transition.type&&e.item.activeHighlightIndex===t.item.activeHighlightIndex)),f.Gg(s.yR))),l.startWith(f.YP),l.pairwise(),l.map((([e,t])=>(0,r.zG)(t,f.UI((i=>({item:i.item,source:i.source,animate:(0,r.zG)(e,_.wo((({lensId:e})=>e===i.lensId))),suggestedPosition:(0,r.zG)(e,f.hX((e=>!c.isScheduledToDispose(e.item))),f.tS((e=>(0,r.zG)(t,f.UI((t=>[e.item,t.item]))))),f.hX((([e,t])=>t.lensId===e.lensId&&t.positionState.absTop>e.positionState.absTop)),f.UI((([e,t])=>p.r.FromWindowTop.ISO.wrap(t.positionState.absTop))))})))))),l.switchMap(f.g_((()=>l.EMPTY),u)),l.withLatestFrom(i),l.switchMap((([{item:e,source:t,animate:s,suggestedPosition:a},n])=>(0,r.zG)(n,f.g_((()=>m(e,s,t,a)),(t=>(i.set(f.YP),t===A.skip?l.NEVER:m(e,s,t,a))))))));return{id:"alignmentSideEffect",when:o.R.isWithAlertsId,what:v.nL.Effect.Applicator.create(b.pipe(l.switchMapTo(l.NEVER)))}}},35604:(e,t,i)=>{i.d(t,{C:()=>n});var s=i(23858),r=i(34821),a=i(32315);class n{constructor(e,t,i){this._cardsViewModel=e,this._gnar=t,this._getAlertById=i,this._subs=new s.w.Keeper,this.subscribeToSidebarCardActions()}subscribeToSidebarCardActions(){this._subs.push(a.g.createSubscription(this._cardsViewModel.actionEvents,this._gnar,this._getAlertById),(0,r.t)(this._cardsViewModel.actionEvents,this._gnar,"gdocs"))}dispose(){this._subs.dispose()}}},49083:(e,t,i)=>{i.d(t,{A7:()=>u,CH:()=>m,Ng:()=>g,uo:()=>p});var s=i(90023),r=i(61804),a=i(79560),n=i(10859),o=i(37402),l=i(66415),c=i(58303),d=i(52256),h=i(25770);function u(e,t,i){return{id:"alertSwitchingByClickSideEffect",when:s.W8,what:o.nL.Effect.SwitchAlert.create(e.alertClicked.pipe(n.skip(1),n.switchMap(c.g_((()=>n.EMPTY),n.of)),n.filter((e=>!i||e.alert.lensId!==r.R.SpecialId.Premium)),n.withLatestFrom(t.pipe(n.filter(o.nL.hasCards),n.map((e=>e.currentLens.id))),((e,t)=>({...e,lensId:t}))),n.map((({alert:e,highlightIndex:t,lensId:i})=>({alertHighlight:{alert:e,highlightIndex:t},alertSource:a.l$.text,options:{lensId:i,order:"textOrder"}})))))}}function p(e,t){return{id:"connectionManager",when:()=>!0,what:o.nL.Effect.SwitchAlert.create(e.pipe(n.map((e=>e.online)),n.distinctUntilChanged(),n.switchMap((e=>e?n.EMPTY:t.enqueue("offline",{reconnectTime:h.h.create(10)}))),n.switchMapTo(n.NEVER)))}}function g(e,t,i){const s=e.getLens(r.R.SpecialId.Premium).pipe(n.map((e=>e.count>0)),n.distinctUntilChanged());return{id:"autoSwitchToPremiumLensSideEffect",when:e=>e===r.R.SpecialId.AllAlerts,what:o.nL.Effect.SwitchLens.create(t.pipe(n.map(l.v.WithSuccess.State.isInSuccess(i)),n.distinctUntilChanged(),n.delay(1),n.combineLatest(s),n.filter((([e,t])=>e&&t)),n.map((()=>({lensId:r.R.SpecialId.Premium,alertSource:a.l$.sidebar,options:{toFocus:o.nL.Effect.FocusBehavior.noFocus}})))))}}function m(e,t){const i=e.getLens(r.R.SpecialId.AllAlerts).pipe(n.map((e=>e.count>0)),n.distinctUntilChanged());return{id:"autoSwitchFromPremiumLensSideEffect",when:s.W8,what:o.nL.Effect.SwitchLens.create(t.pipe(n.map((e=>e.currentLens.id)),n.distinctUntilChanged(),n.pairwise(),n.filter((([e,t])=>t===r.R.SpecialId.Premium)),n.map((([e,t])=>e)),n.combineLatest(i),n.map((([e,t])=>e===r.R.SpecialId.AllAlerts&&t?c.G(r.R.SpecialId.AllAlerts):c.YP)),n.filter(c.pC),n.map(d.MH),n.map((e=>({lensId:e,alertSource:a.l$.sidebar,options:{toFocus:o.nL.Effect.FocusBehavior.noFocus}})))))}}},49933:(e,t,i)=>{i.d(t,{D:()=>s});var s,r=i(39953),a=i(58303),n=i(43636),o=i(26146);!function(e){e.updateCitationStyle=(e,t)=>i=>{const s=(0,r.zG)(e.defaultContext.get(),a.fS((()=>o.R$.defaultContextFallback))),l=(0,r.zG)(e.context.get(),o.R$.OutcomeContext.withCitationStyle(i));(0,r.zG)(l,e.updateContext)&&t.goalsFormSuccess((0,r.zG)(l.domain,a.fS((()=>s.domain))),(0,r.zG)(l.goals,a.fS((()=>s.goals)),(e=>Array.from(e))),"essayDetectionCard",(0,r.zG)(l.outcomeContext,a.UI(n.ei("type")),a.FS),void 0,(0,r.zG)(l.outcomeContext,a.UI(n.ei("citation")),a.FS),void 0)}}(s||(s={}))},37128:(e,t,i)=>{i.d(t,{G:()=>ce});var s=i(90023),r=i(39953),a=i(7305),n=i(90731),o=i(79560),l=i(61804),c=i(55389),d=i(42370),h=i(65179),u=i(39620),p=i(10859),g=i(80724),m=i(3307),v=i(71031),f=i(98753),_=i(76728),b=i(57810),w=i(3862),S=i(53043),C=i(79647),A=i(91281),y=i(70222),I=i(55395),E=i(37402),P=i(66415),M=i(97965),L=i(52729),x=i(81946),k=i(75223),R=i(71978),T=i(3635),U=i(58303),F=i(52256),G=i(12518),B=i(92562),V=i(25770),H=i(19813),O=i(42822),z=i(11959),D=i(4603),W=i(66813),N=i(27804),j=i(97982),Y=i(87653),Z=i(45411),$=i(2509),q=i(35604),X=i(49933),K=i(5039),Q=i(98110),J=i(95486),ee=i(66042),te=i(4798),ie=i(68970),se=i(62549),re=i(89795),ae=i(4976),ne=i(49083),oe=i(16873),le=i(14372);const ce=(e,t,i,ce,de,he,ue,pe,ge,me,ve,fe,_e,be,we)=>{const Se=H.C8.Logging.getLogger("view_models"),Ce=V.h.create(c.A.defaultState),Ae=V.h.create(!1),ye=v.t.create(v.t.defaultLensFilters,v.t.defaultTextFilters),Ie=e.alertsList.state.pipe((t=>c.A.get(t,e.alertsList.lensesScores,ye))).subscribe(u.wW(Ce)),Ee=new oe.t(Ce.view("lenses"),ye,e.sessionModel.scoreStatus),Pe=(0,b.$y)((0,re.a)(t).getContents),Me={features:(()=>{const e=new Set;return e.add(C.IG.Features.showCardLabelInOutcomes),e})(),cardLayoutDensityMode:I.j.Density.compact,shouldAnimateAlertApply:s.jv,cardVisualMode:V.h.create(I.j.CardVisualMode.RegularLightMode)},Le=(0,C.Ls)(Pe,e.alertsReader,Me,(()=>p.of(U.YP)),e.mutingAlertsReader),xe=w.R.ItemFactory.create(Pe,e.mutingAlertsReader,Me,(()=>p.of(U.YP))),ke=Y.O.getCapabilities(Le,xe,e.alertsReader,Pe),Re=new k.gi(Y.O.equatable.structEq,Y.O.defaultOrd),Te=(0,k.is)(Le,ke),Ue=M.v.createWithInitialAlerts(Re,Te,ye,(0,s.ff)(o.bZ.isMuted),ke),Fe=new f.F.Impl(e.alertsList.state,e.positionManager,e.alertsReader,ye.alertCanBeDisplayed),Ge=new x.oq(e.alertsList.state,e.alertsReader,Ce.view("lenses"),Fe,Ee,Ue,Te,ke,ye),Be=l.R.SpecialId.AllAlerts,Ve=V.h.create(Ge.emptyState(Be)),He=Ve.pipe(p.map((e=>e.currentLens.id)),p.filter(N.U.SelectedLens.filter)).subscribe((e=>pe.set(e))),Oe=(0,S.u0)((()=>t.getCursor().index),Ge),ze=new J.x(e.alertsList,Ve,5,we,de),De=new ee.r(e.alertsList,Ve),We=fe.isGateEnabled(te.K.StudentsOFEGdocs)||fe.isGateEnabled(te.K.StudentsOFEInternal),Ne=new a.EQ(new le.o(e.sessionModel,ze,he.isPremium,de,We,(()=>(0,z.y)(fe)))),je=new Q.$(Ve,Ee,i,Ne,t,de),Ye=new _.Xx({flush:()=>t.flushChanges()},je.events,Le,e.alertsService,e.alertsReader,(()=>Promise.resolve()),(()=>Promise.resolve()),(0,r.zG)(e.mutedAlertsCategoriesModel,U.UI((e=>({model:e,openSuggestionsManagement:()=>self.open((0,ie.Um)().suggestionsSettings)})))),U.YP,(()=>!1),Y.O.getActiveItemWithAlert,ke,new Z.C((0,D.nD)()),{bufferTransitions:!0,showGbPrompt:!1},X.D.updateCitationStyle(e.sessionModel,de)),Ze=new q.C(Ye,de,(t=>e.alertsReader.getById(t))),$e=se.n.isFree(ue.get()),qe=(0,r.zG)(_e?e=>p.mergeStatic(ze.advancedAlerts.pipe(g.oA,p.map((e=>({kind:d.n.State.expanded,showCloseButton:!0,alertsState:{count:e.count,alerts:e.alerts()}}))),p.take(1),p.startWith({kind:d.n.State.minimized,alertsCount:0})),(0,h.d)(ze.advancedAlerts)(e).pipe(p.skip(1))):(0,h.d)(ze.advancedAlerts),O.Z.extendActions(p.tap((e=>{e.key===d.n.State.minimized&&"onClick"===e.action.action&&$e&&Ae.set(!0),e.key===d.n.State.expanded&&"collapse"===e.action.kind&&Ae.set(!1),e.key===d.n.State.expanded&&"upgrade"===e.action.kind&&(ze.trackUpgradeButtonClick({placement:"advancedIssues",bannerType:"SeeWhatsInPremium",upgradeHookName:"advancedIssues",upgradeHookSlot:"gDocsSidebar"}),ze.openUpgradeUrl(J.L.Place.gdocsSidebarCardList)),e.key===d.n.State.expanded&&"onUpgradeButtonMount"===e.action.kind&&ze.trackUpgradeButtonShow({placement:"advancedIssues",bannerType:"SeeWhatsInPremium",upgradeHookName:"advancedIssues",upgradeHookSlot:"gDocsSidebar"})})))),Xe=p.combineLatestStatic([Ae,be]).pipe(p.mapTo(u.PU)),Ke=De.freeAlerts.pipe(p.map((e=>{var t;return!(null===(t=(0,r.zG)(e,F.Fc))||void 0===t?void 0:t.count)&&$e})),p.distinctUntilChanged()).subscribe(u.wW(Ae)),Qe=(0,K.xl)(Ve,ye,Xe,Ae,V.h.create(!1)),Je=p.combineLatestStatic(Qe,be).pipe(p.map((([e,t])=>t?s.jv:e))),et=new K.o$(e.alertsList,e.alertsReader,e.positionManager,e.alertsService,t,Ve,Je,Y.O.getActiveItemWithAlert,Ae,ge,!1),tt=new A.o((()=>G.right(void 0))),it=(0,ae.hp)(Ve,et,V.h.create(16),tt,t,Se),st=Ve.view(E.nL.getActiveAlertHighlight(Y.O.getActiveItemWithAlert)),rt=new m.mN(t,et,e.alertsReader,st,Ve.view((e=>e.currentLens.meta.filter))),at=new n.y(V.h.create([]),$.I.createFactory(),3,5e3),nt=[_.dv.changeAlertEffect(Ve,Ye,Le,Y.O.getActiveItemWithAlert,e.alertsReader,U.G(it),Oe,Se.getLogger("CardsViewModelEffects.changeAlertEffect")),...Ye.getApplicatorEffects(),y.R7(Ve,tt,ke,(0,s.MZ)(Ye.actionEvents),{cardsAroundActive:25,cardsBeyondViewport:25}),ne.A7(rt,Ve,$e),(0,ae.k9)(Ve,it,V.h.create(U.YP),Y.O.getActiveAlignableItem,ke),y.XU(Ve,tt,ke),R.EQ.focusMarkByActiveAlert(Ve,et,e.alertsReader,Y.O.getActiveFocusableItem,Se.getLogger("MarksEffects.focusMarkByActiveAlert")),ne.uo(ce,at),_.dv.createSendActiveAlertFeedbacksEffect(Ve,Y.O.getActiveItemWithAlert,e.alertsService,e.alertsReader,Se.getLogger("CardsViewModelEffects.createSendActiveAlertFeedbacksEffect")),ne.Ng(Ee,Ve,ke),ne.CH(Ee,Ve),je.lensChangeEffect],ot=V.h.create(l.R.SpecialId.AllAlerts),lt=(0,S.VC)(Ge,Oe,ot,ke),ct=V.h.create(!0),dt=S.Py.getStateTransformer(S.Py.getDefaultBehavior(Y.O.getActiveItemWithAlert,ke),lt,e.alertsReader,ke,(e=>ct.get()&&"text"!==e.alertSource),s.Q1,ot),ht=P.v.Items.getItemsPositionsUpdateTransformer(ke),ut=(0,s.ls)(dt,B.L9(ht)),pt=new L.l(Ve,Ge,e.alertsReader,e.alertsService,nt,Y.O.getActiveItemWithAlert,ut),gt=new T.L(Ve,e.sessionModel,s.Q1,ke,U.YP,P.v.WithSuccess.State.isInSuccess(ke),V.h.create(!1)),mt=me.pipe(p.switchMap(U.g_((()=>p.EMPTY),(t=>t.initCardActionsProcessing(Ye.actionEvents,e.alertsReader,(0,j.aU)(Ve),(0,j.X5)(rt,Ve),Ve))))).subscribe(),vt=Ye.actionEvents.subscribe((0,s.ls)((0,W.JH)(e.alertsReader,W.SV.Source.sidebar),F.bw((e=>ve.next(e)))));return{lensState:Ve,lensStateManager:pt,cardsViewModel:Ye,marksViewModel:et,navigationViewModel:je,successLensViewModel:gt,alignmentViewModel:it,lensPreviewViewModel:Ee,cardsListScrollManager:tt,notificationManager:at,upgradeViewModel:ze,modalManager:Ne,capabilities:ke,upgradeHookFlow:qe,dispose:()=>{vt.unsubscribe(),et.dispose(),He.unsubscribe(),Ie.unsubscribe(),Ze.dispose(),mt.unsubscribe(),Ke.unsubscribe(),De.dispose()}}}},16873:(e,t,i)=>{i.d(t,{t:()=>f});var s=i(59833),r=i(38538),a=i(56164),n=i(90023),o=i(39953),l=i(79264),c=i(61804),d=i(1043),h=i(81778),u=i(17071),p=i(68259),g=i(58303),m=i(2245),v=i(25770);class f{constructor(e,t,i){this._lensesList=e,this._alertsFilterService=t,this._scoreStatus=i,this.getLens=(0,u.HP)((function(e){switch(e){case c.R.SpecialId.AllAlerts:return this._lensesList.view(_(c.R.Info.allAlerts,c.R.Meta.group.empty,this._alertsFilterService.getLensesFilter(c.R.SpecialId.AllAlerts)));case c.R.SpecialId.PredictionTakeaways:return this._lensesList.view(_(c.R.Info.predictionTakeaways,c.R.Meta.group.empty,this._alertsFilterService.getLensesFilter(c.R.SpecialId.PredictionTakeaways)));case c.R.SpecialId.PredictionEmogenie:return this._lensesList.view(_(c.R.Info.predictionEmogenie,c.R.Meta.group.empty,this._alertsFilterService.getLensesFilter(c.R.SpecialId.PredictionEmogenie)));case c.R.SpecialId.RealTimeProofit:return this._lensesList.view(_(c.R.Info.realTimeProofit,c.R.Meta.group.empty,this._alertsFilterService.getLensesFilter(c.R.SpecialId.RealTimeProofit)));case c.R.SpecialId.Plagiarism:return this._lensesList.view(this._getPlagiarismLens);case c.R.SpecialId.Premium:return this._lensesList.view(_(c.R.Info.premium,c.R.Meta.group.empty,this._alertsFilterService.getLensesFilter(c.R.SpecialId.Premium)));case c.R.SpecialId.FreePremiumAlerts:return this._lensesList.view(_(c.R.Info.freePremium,c.R.Meta.group.empty,this._alertsFilterService.getLensesFilter(c.R.SpecialId.FreePremiumAlerts)));case c.R.SpecialId.Correctness:case c.R.SpecialId.Clarity:case c.R.SpecialId.Engagement:case c.R.SpecialId.Delivery:case c.R.SpecialId.Vox:case c.R.SpecialId.KnowledgeHub:return this._lensesList.view(_(c.R.Info.createOutcome(e),c.R.Meta.group.empty,this._alertsFilterService.getLensesFilter(e)));default:return(0,p.vE)(e)}})),this._outcomes=[c.R.SpecialId.Correctness,c.R.SpecialId.Clarity,c.R.SpecialId.Engagement,c.R.SpecialId.Delivery],this._previews=(0,u.HP)((()=>r.uX((0,a.mL)(),s.IX)(this._outcomes,(e=>[e,this._getPreview(e)])))),this._isDocumentEmpty=v.h.create(!1),this._isFree=v.h.create(!1),this._outcomeStatusMask=v.h.combine(this._isDocumentEmpty,this._isFree,((e,t)=>{let i=0;return e&&(i|=h.x.IsDocumentEmpty),t&&(i|=h.x.IsFreeUser),i})),this._getPlagiarismLens=(0,n.ls)(_(c.R.Info.plagiarism,{...c.R.Meta.group.empty,percentile:d.T.MAX},this._alertsFilterService.getLensesFilter(c.R.SpecialId.Plagiarism)),c.R.WithAlerts.modifyMeta((e=>({...e,percentile:d.T.groupSum.concat(d.T.MAX,d.T.groupSum.inverse(e.percentile))}))))}findLens(e){return(0,o.zG)(g.ij([this.getLens(c.R.SpecialId.AllAlerts),this.getLens(c.R.SpecialId.Premium)].find((t=>e(t.get())))),g.UI((e=>e.get().id)))}_getPreview(e){return{...c.R.Info.base,logo:g.YP,...this._getOutcomeButtonData(e)}}get lensPreviews(){return this._previews()}_getOutcomeButtonData(e){const t=this.getLens(e),i=t.get().title,s=this._isFree.view((t=>t&&(e===c.R.SpecialId.Engagement||e===c.R.SpecialId.Delivery))),r=v.h.combine(t.view("count").view((e=>0===e)),s,((e,t)=>e&&!t)),{description:a,stateMessage:u}=(0,h.O)(e),p=v.h.combine(this._isDocumentEmpty,r,t.view("percentile"),((e,t,i)=>e?d.T.MIN:t?d.T.MAX:i)).view(d.g.fromRatio),m=v.h.create(!1),f=v.h.combine(this._scoreStatus.view((e=>(0,o.zG)(e,g.UI((e=>e===l.v0.ScoresStatus.SENSITIVE)),g.fS(n.jv)))),t,p,this._outcomeStatusMask,m,u);return{id:e,title:i,description:a,status:f,progress:p,isUnavailable:s}}get nonEmptyLensId(){return(0,o.zG)(g.ij([this.getLens(c.R.SpecialId.AllAlerts),this.getLens(c.R.SpecialId.Premium)].find((e=>e.get().count>0))),g.UI((e=>e.get().id)))}}function _(e,t,i){return s=>{return new c.R.LensImpl(e,(r=e.id,a=t,e=>(0,o.zG)(m.P5(c.R.Id.ord)(r,e),g.fS((()=>a))))(s),i);var r,a}}},5039:(e,t,i)=>{i.d(t,{gM:()=>X,o$:()=>Q,xl:()=>K});var s,r=i(90023),a=i(39953),n=i(61804),o=i(79560),l=i(19656),c=i(95943),d=i(12486),h=i(23858),u=i(39620),p=i(71490),g=i(34553),m=i(22207),v=i(37402),f=i(71978),_=i(65647),b=i(53710),w=i(65882),S=i(90049),C=i(55446),A=i(60165),y=i(70989),I=i(20715),E=i(36072),P=i(96030),M=i(64218),L=i(78488),x=i(80724),k=i(65802),R=i(25583),T=i(59833),U=i(17071),F=i(58303),G=i(12518),B=i(52256),V=i(43636),H=i(68259),O=i(25770),z=i(19813),D=i(1596),W=i(87653),N=i(94525),j=i(77432),Y=i(83895),Z=i(64451),$=i(57935),q=i(41767);!function(e){e.create=(e,t,i,s,r,a)=>(n,o)=>{const l=o.to.visualState===p.Bd.highlighted;return Z.sO.Change.getCreateAction({range:n,capiAlertId:e,visualState:l?{type:Z.sO.Change.VisualState.Type.highlighted,source:t()}:{type:Z.sO.Change.VisualState.Type.visible},highlightColor:i,highlightDisplayFormat:s(n(),l),highlightDisappearOnHoverDelay:r,order:a})},e.update=(e,t,i,s,r,a)=>(n,o)=>{const l=o.to.visualState===p.Bd.highlighted;return Z.sO.Change.getUpdateAction({range:n,capiAlertId:e,visualState:l?{type:Z.sO.Change.VisualState.Type.highlighted,source:t()}:{type:Z.sO.Change.VisualState.Type.visible},highlightColor:i,highlightDisplayFormat:s(n(),l),highlightDisappearOnHoverDelay:r,order:a})},e.remove=e=>t=>Z.sO.Change.getRemoveAction({range:t,capiAlertId:e})}(s||(s={}));const X=(e,t)=>{const i=e.pipe(_.U(Y.D1.StrongAlertRef.getStrongAlertRefBulkDismissAlertIds)),s=t.pipe(_.U((e=>e.cards)),b.R(((e,t)=>(0,a.zG)(t,R.v.reduce(e,((e,t)=>(e.delete(t.id),e)),((e,t,i)=>e.set(i.id,i.alertIds.map((e=>e.toString())))),((e,t)=>e.set(t.id,t.alertIds.map((e=>e.toString()))))))),new Map),_.U((e=>(0,a.zG)(Array.from(e.values()),T.xH))),_.U((e=>new Set(e)))),r=t.pipe(_.U((e=>e.feedId===Y.D1.AssistantFeed.TONE_INSIGHTS_CARD_FEED_ID))),n=t.pipe(_.U((e=>e.feedId===Y.D1.AssistantFeed.PERFORMANCE_SCORE_FEED))),o=t.pipe(_.U((e=>e.feedId===Y.D1.AssistantFeed.BULK_DISMISS_CARD_FEED_ID))),l=t.pipe(_.U((e=>e.feedId===Y.D1.AssistantFeed.BULK_DISMISS_REVIEW_FEED_ID)));return w.aj([i,s,r,n,o,l]).pipe(_.U((([e,t,i,s,r,a])=>i||s?t=>!e.has(t.id):r||a?e=>t.has(e.id):i=>t.has(i.id)&&!e.has(i.id))))},K=(e,t,i,s=O.h.create(!1),r=O.h.create(!1))=>S.T(e.pipe(C.h((e=>e.currentLens.id!==n.R.SpecialId.Premium)),A.x(((e,t)=>e.currentLens.id===t.currentLens.id)),A.x()),i.pipe(y.M(e),_.U((([e,t])=>t)))).pipe(y.M(s,r),_.U((([e,i,s])=>i?(0,U.W9)(o.bZ.isPremium,o.bZ.isHidden):s?o.bZ.isPlagiarism:t.alertVisibleInText(e.currentLens.id))));class Q{constructor(e,t,i,d,u,b,w,S,A,y=I.of(void 0),L=!1){this._alertList=e,this._alertsReader=t,this._positionManager=i,this._alertsService=d,this._ded=u,this._lensState=b,this._filterChanges=w,this._getActiveItemWithAlert=S,this._showPremiumHighlights=A,this._readyObs=y,this._emulateAppliedAlertAnimation=L,this._highlightedAlert=F.YP,this._focusedAlert=F.YP,this._marksMap=new Map,this._subs=new h.w.Keeper,this.events=new E.xQ,this._alertStateDiff=this._alertList.state.pipe(P.G(),_.U((([e,t])=>c.p.diff(e,t))),C.h((0,U.ff)(R.v.isEmpty))),this._alertsFilter=O.h.create(r.jv),this._filteredAlerts=O.h.create(F.YP),this._ready=!1,this._log=z.C8.Logging.getLogger("marks_view_model"),this.unhighlightAlertHighlight=()=>{throw new Error("Method not implemented.")},this.getMarkByAlert=e=>(0,a.zG)(this._marksMap.get(e.alert.id),F.ij,F.tS((t=>t.markByIndex(e.highlightIndex)))),this.getAlertByMark=e=>(0,a.zG)(this._alertsReader.getRegistered(l.P.fromRangeIdToAlertId(e.id)),F.tS((t=>(0,a.zG)(f.$A.getHighlightIndex(t,e.range()),G.map((e=>({alert:m.$.fromModel(t),highlightIndex:e}))),F.Uo)))),this.ensureAlertHighlightInViewport=(e,t,i)=>(0,a.zG)(this.getMarkByAlert(e),F.g_((()=>I.of(G.left(new Error("getMarkByAlert returned O.none")))),(e=>this._ded.scrollToMark(e.id,{animate:i,paddingTop:t}).pipe(_.U(G.right),M.K((e=>I.of(G.left(e)))))))),this._createMA=e=>{const t=B.MH(e.rawId),{impact:i,cardLayout:{outcome:c},extra_properties:d}=e.toRawAlert(),h=D.M.getHighlightColor({inline:e.inline,outcome:N.DD.createOutcomeType(c),impact:i,extraProperties:d,patternName:e.patternName,isPremium:o.bZ.isPremium(e),isHidden:o.bZ.isHidden(e)},!0,!1,!1,q.N1.get(),q.e9.get(),j.p.inProductReactivationUnderlines.get()&&!e.isFree),u=this._lensState.view(v.nL.getActiveItem(W.O.getActiveItemWithAlert)).view((0,r.ls)(F.hX((t=>t.activeAlert.id===e.id)),F.UI((e=>e.activeHighlightIndex)),F.fS((()=>0)))),_=e=>(t,i)=>{const s=l.x.isEnclosingView(t),r=e.getHighlightRanges().some(l.x.isEnclosingView),n=l.x.isMainView(t),c=l.x.isMainStartView(t),d=e.getHighlightRanges(),h=(0,a.zG)(d,T.cx((e=>e.start===t.start&&e.end===t.end)),F.fS((()=>0)))===u.get(),p=o.bZ.isSuperAlert(e);return D.M.getHighlightDisplayFormat({isEnclosing:s,isEnclosed:r,isMain:n,isMainStart:c,isActive:h,belongsToActiveAlert:i,belongsToSuperAlert:p})},b=n.R.getSortOrder(e.lensType),w=new g.v((t=>(0,a.zG)(this._alertsReader.getById(e.id),F.wp((()=>(t&&this._log.warn("Could not find alert for provided MarkAlert",{alert:e,source:t}),F.G(e)))),F.UI(m.$.fromModel),B.MH)),this._alertsService,this._alertsService,(e=>this._ded.changeMarks(e)),s.create(t,(()=>Z.sO.Change.VisualState.Source.api),h,_(e),null,b),s.update(t,(()=>J.getAlertSource(e,this._lensState.get(),this._getActiveItemWithAlert)),h,_(e),null,b),s.remove(t),(t=>{t.to.visualState===p.Bd.applied&&(this.events.next({type:f.ay.Type.AppliedAlertAnimationFinished,alert:e}),this._handleRemovedAlerts([e]).forEach((e=>e.apply())))}));return this._marksMap.set(e.id,w),w},this._handleRemovedAlerts=e=>e.map((({id:e})=>{const t=this._marksMap.get(e);return this._marksMap.delete(e),t.scheduleApply(p.Bd.disposed),t})),this._handleAlertUpdate=e=>e.map((e=>o.bZ.isRegistered(e)&&!o.bZ.isMuted(e)?(0,a.zG)(F.ij(this._marksMap.get(e.id)),F.g_((()=>this._alertsFilter.get()(e)?this._createMA(e):null),(e=>(e.scheduleUpdate(),p.Oe.isOrWillBe(p.Bd.success)(e)&&e.scheduleApply(p.Bd.highlighted),e)))):(0,a.zG)(F.ij(this._marksMap.get(e.id)),F.g_((()=>{}),(t=>(e.allowUpdate&&o.bZ.isCapiDone(e)&&o.bZ.isRated(e)&&p.Oe.isOrWillBe(p.Bd.highlighted)(t)?(t.scheduleUpdate(),t.scheduleApply(p.Bd.success)):(t.scheduleApply(p.Bd.disposed),this._marksMap.delete(t.alert.id)),t)))))).filter((e=>Boolean(e))),this._subs.push(this._readyObs.subscribe((()=>{this._subs.push(this._listenAlertsUpdates(),this._listenRangesUpdates(),this._listenFilterChange(),this._listenFilteredAlerts()),this._ready=!0})))}getPlagiarismAlertsEditingTracker(){return e=>this._alertList.state.pipe(C.h((0,r.ls)(d.v.iso.get,(e=>e.latestChangeDiff),R.v.filter(r.jv,((e,t)=>t.alert.lensType===n.R.Type.Plagiarism&&t.state.type===o.bZ.State.Type.REMOVED&&(t.state.reason===o.bZ.State.Removed.Reason.capiDone||t.state.reason===o.bZ.State.Removed.Reason.textChange)),r.jv),(0,U.ff)(R.v.isEmpty))),L.b((()=>e())))}focusAlertHighlight(e){return this._ready?(0,a.zG)(this._marksMap.get(e.alert.id),F.ij,F.UI((t=>{this._focusedAlert=F.G(e.alert.id),t.scheduleApply(p.Bd.highlighted),t.scheduleForceUpdate(),t.apply()})),G.fromOption((()=>new Error("Unknown alert"))),G.map((()=>({dispose:()=>{F.Gg((t=>t===e.alert.id))(this._focusedAlert)&&(this._highlightedAlert=F.YP),(0,a.zG)(this._marksMap.get(e.alert.id),F.ij,F.hX((()=>!(0,a.zG)(this._highlightedAlert,F.Gg((t=>t===e.alert.id))))),F.UI((e=>{e.scheduleApply(p.Bd.visible),e.apply()})))}})))):G.left(new Error("marks view model is not ready yet"))}highlightAlertHighlight(e){return this._ready?(0,a.zG)(this._marksMap.get(e.id),F.ij,F.UI((t=>{this._highlightedAlert=F.G(e.id),t.scheduleApply(p.Bd.highlighted),t.apply()})),G.fromOption((()=>new Error("Unknown alert"))),G.map((()=>({dispose:()=>{F.Gg((t=>t===e.id))(this._highlightedAlert)&&(this._highlightedAlert=F.YP),(0,a.zG)(this._marksMap.get(e.id),F.ij,F.hX((()=>!(0,a.zG)(this._focusedAlert,F.Gg((t=>t===e.id))))),F.UI((e=>{e.scheduleApply(p.Bd.visible),e.apply()})))}})))):G.left(new Error("marks view model is not ready yet"))}moveCursorToHighlight(e,t){return this._ready?(0,a.zG)(this._marksMap.get(e.alert.id),F.ij,F.tS((t=>t.markByIndex(e.highlightIndex))),F.tS((e=>F.Uo(e.range()))),F.g_((()=>G.left(new Error("Cannot find mark for given range"))),(e=>{const{index:i,length:s}=this._ded.getCursor();if(0===s&&(i<e.start||i>e.end)){const i=Math.min(e[t],this._ded.getLastPossibleCursorPosition());return(0,a.zG)(this._ded.setCursor(i,0),G.orElse(G.left))}return G.right(void 0)}))):G.left(new Error("marks view model is not ready yet"))}getEnclosingMarkByAlert(e){throw new Error("Method not implemented.")}dispose(){this._subs.dispose()}_listenAlertsUpdates(){const e=e=>({activeAlerts:[],updatedAlerts:[],removedAlerts:[],acceptedAlerts:[],hiddenMarkAlerts:[],...e});return S.T(this._filteredAlerts.pipe(x.cp((({visible:t,hidden:i})=>I.of(e({activeAlerts:V.qo(t),removedAlerts:V.qo(i)}))))),this._alertStateDiff.pipe(y.M(this._alertsFilter),_.U((([t,i])=>(0,a.zG)(t,R.v.reduce(e({}),((e,t)=>(this._marksMap.has(t.alert.id)&&e.removedAlerts.push(t.alert),e)),((e,t,i)=>(o.bZ.isAccepted(i.alert)?e.acceptedAlerts.push(i.alert):e.updatedAlerts.push(i.alert),e)),((e,t)=>(i(t.alert)&&e.activeAlerts.push(t.alert),e)))))))).pipe(y.M(this._showPremiumHighlights),_.U((([{activeAlerts:e,removedAlerts:t,updatedAlerts:i,acceptedAlerts:s},r])=>{let a=[];return a=a.concat(e.filter((0,U.W9)((0,U.Kg)((e=>r&&o.bZ.isPremium(e)&&o.bZ.isHidden(e)||o.bZ.isLocked(e)||o.bZ.isLockedUIUphook(e)),(0,U.ff)(o.bZ.isPremium)),(e=>F.pC(e.rawId)))).map((e=>{const t=this._marksMap.get(e.id);return void 0!==t?(t.scheduleForceUpdate(),t):this._createMA(e)}))),this._emulateAppliedAlertAnimation&&setTimeout((()=>{s.forEach((e=>{this.events.next({type:f.ay.Type.AppliedAlertAnimationFinished,alert:e})}))}),3*(0,$.Xd)(20)),a=a.concat(this._handleRemovedAlerts(t.concat(s).filter((e=>this._marksMap.has(e.id))))),a=a.concat(this._handleAlertUpdate(i)),a}))).subscribe((e=>{if(e.length>0){const[t,...i]=e;t.applyWith(i)}}))}_listenRangesUpdates(){return this._positionManager.rangeChanged.pipe(k.j("changed"),_.U((e=>e.filter((e=>l.P.is(e)&&l.x.isVisible(e)&&this._marksMap.has(e.meta.alertId))))),C.h((e=>e.length>0))).subscribe((e=>{const t=Array.from(e.values()).reduce(((e,t)=>(0,a.zG)(this._alertsReader.getById(t.meta.alertId),F.tS((e=>this._alertsReader.getRegistered(e.id))),F.tS((e=>F.ij(this._marksMap.get(e.id)))),B.bw((t=>e.set(t.alert.id,t))),(0,r.a9)(e))),new Map),i=Array.from(t.values());if(i.forEach((e=>{e.scheduleForceUpdate()})),i.length>0){const[e,...t]=i;e.applyWith(t)}}))}_listenFilterChange(){return this._filterChanges.subscribe((e=>{u.wW(this._alertsFilter)(e)}))}_listenFilteredAlerts(){return this._alertsFilter.pipe(y.M(this._alertList.state),_.U((([e,t])=>(0,a.zG)(t,c.p.reduce({visible:{},hidden:{}},((t,i)=>(e(i.alert)&&o.bZ.isRegistered(i.alert)?t.visible[i.alert.id]=i.alert:t.hidden[i.alert.id]=i.alert,t))),(e=>F.G(e)))))).subscribe(u.wW(this._filteredAlerts))}}var J;!function(e){e.toSidebarFluidMarkSource=e=>{switch(e){case o.l$.text:case v.h8.forceText:return Z.sO.Change.VisualState.Source.text;case o.l$.sidebar:case v.h8.forceSidebar:return Z.sO.Change.VisualState.Source.sidebar;case o.l$.api:return Z.sO.Change.VisualState.Source.api;default:return(0,H.vE)(e)}},e.getAlertSource=(t,i,s)=>v.nL.hasCards(i)?(0,a.zG)(s(i.currentLens),F.g_((()=>Z.sO.Change.VisualState.Source.api),(s=>s.activeAlert.id===t.id?e.toSidebarFluidMarkSource(i.alertSource):Z.sO.Change.VisualState.Source.api))):Z.sO.Change.VisualState.Source.api}(J||(J={}))},14372:(e,t,i)=>{i.d(t,{o:()=>b});var s=i(7305),r=i(95008),a=i(8748),n=i(68259),o=i(17071),l=i(96299),c=i(39953),d=i(93462),h=i(52256),u=i(58303),p=i(43636),g=i(26146),m=i(21448),v=i(95486),f=i(99836);function _({documentModel:e,features:t,gnar:i,modalOperations:s,upgradeVM:r,source:a}){return(0,d.k)(e,function(e,t,i,s){return{goalsPopupShow:t=>{const i=s()?"pro":"premium";e.goalsPopupShow(t),(0,m.nE)(e,{placement:"goPremium",bannerType:"setGoalsPopup",upgradeHookName:"assistantGoals",upgradeHookSlot:"gDocsSetGoalsPopup",upgradeHookVariant:i}),(0,f.Tb)().upgradeHooks.showUpgradeHook("assistantGoals","gDocsSetGoalsPopup",i)},getPremiumButtonClick:()=>{const t=s()?"pro":"premium";(0,m.Qi)(e,{placement:"goPremium",bannerType:"setGoalsPopup",upgradeHookName:"assistantGoals",upgradeHookSlot:"gDocsSetGoalsPopup",upgradeHookVariant:t}),(0,f.Tb)().upgradeHooks.clickUpgradeHook("assistantGoals","gDocsSetGoalsPopup",t)},goalsFormSuccess:(s,r)=>{const a=()=>h.FX("academic")(s.domain)&&t;return e.goalsFormSuccess((0,c.zG)(s.domain,u.fS((()=>r.domain))),(0,c.zG)(s.goals,u.UI((e=>a()?[]:e)),u.fS((()=>r.goals)),(e=>Array.from(e))),i,(0,c.zG)(s.outcomeContext,u.hX(a),u.UI(p.ei("type")),u.FS),(0,c.zG)(s.audience,u.hX((0,o.ff)(a)),u.FS),(0,c.zG)(s.outcomeContext,u.hX(a),u.UI(p.ei("citation")),u.FS),(0,c.zG)(s.style,u.hX((0,o.ff)(a)),u.FS))}}}(i,t.isStudentsOFE,a,t.isGrammarlyPro),s,a,g.R$.defaultContextFallback,t,(()=>r.openUpgradeUrl(v.L.Place.gdocsGoals)),!1)}class b{constructor(e,t,i,s,r=!1,a=(()=>!1)){this._documentModel=e,this._upgradeViewModel=t,this._isPremiumUser=i,this._gnar=s,this._isStudentsOFE=r,this._isGrammarlyPro=a}load(e){switch(e.type){case s.dC.SetGoals:return this._loadSetGoals(e.source);case s.dC.Performance:return Promise.resolve((()=>({instance:{type:s.dC.Performance},component:l.UI.mount(l.UI.Node.empty,(()=>a.E))})));default:return(0,n.vE)(e)}}_loadSetGoals(e){return Promise.resolve((t=>{const i=_({features:{demoMode:!1,isFree:!this._isPremiumUser,isStudentsOFE:this._isStudentsOFE,isEligibleForFreeTrial:!1,assignToFreeTrialEuUkExperiment:o.Q1,isGrammarlyPro:this._isGrammarlyPro,isEligibleForFreeTrialEuUk:!1,isEligibleForPro:!1,assignToProVsPremiumExperiment:o.Q1},documentModel:this._documentModel,upgradeVM:this._upgradeViewModel,source:e,modalOperations:t,gnar:this._gnar});return{instance:{type:s.dC.SetGoals,source:e},component:l.UI.mount(r.R.Modal,i)}}))}}},98110:(e,t,i)=>{i.d(t,{$:()=>v});var s=i(90023),r=i(7305),a=i(79560),n=i(61804),o=i(10859),l=i(23858),c=i(55395),d=i(37402),h=i(68194),u=i(58303),p=i(68259),g=i(25770),m=i(68338);class v{constructor(e,t,i,r,p,m){this._state=e,this._lensPreviewVM=t,this._sidebarEvents=i,this._modalManager=r,this._ded=p,this._gnar=m,this.isUphooksRedesign=!1,this.popover=g.h.create(u.YP),this.events=new o.Subject,this.activeLensId=this._state.view("currentLens","id"),this.documentActions=g.h.create({proofit:h.Bo.proofitDisabled(h.TV.NotAvailable),plagiarism:h.Bo.plagiarismDisabled(h.eh.NotAvailable),cheetah:h.Bo.cheetahDisabled(h.Sh.NotAvailable)}),this.showMuteControl=g.h.create(!1),this._subs=new l.w.Keeper,this._lensSwitch=new o.Subject,this.lensTitleType=h.Bo.LensTitleType.default,this.lensChangeEffect={id:"lensChangeEffect",when:s.W8,what:d.nL.Effect.SwitchLens.create(this._lensSwitch.pipe(o.withLatestFrom(this._state.pipe(o.map((e=>e.currentLens.id)))),o.filter((([{lensId:e},t])=>e!==t)),o.map((([{lensId:e,focusFirst:t}])=>({lensId:e,alertSource:a.l$.sidebar,options:{order:"lensOrder",toFocus:t?d.nL.Effect.FocusBehavior.focusFirst:d.nL.Effect.FocusBehavior.noFocus}})))))},this.cardVisualMode=g.h.create(c.j.CardVisualMode.RegularLightMode),this._listenNavigationEvent();const v=[n.R.SpecialId.Correctness,n.R.SpecialId.Clarity,n.R.SpecialId.Engagement,n.R.SpecialId.Delivery].reduce(((e,t)=>(e[t]=this._lensPreviewVM.lensPreviews[t],e)),{});this.lensPreviews=v,this.a11yContrast=!1}dispose(){this._subs.dispose()}_listenNavigationEvent(){this._subs.push(this.events.pipe(o.switchMap((e=>{switch(e.type){case"toggleSidebar":return this._sidebarEvents.next({kind:m.R.Close}),o.EMPTY;case"switchToLens":return this._lensSwitch.next({lensId:e.id,focusFirst:e.focusFirst}),this._gnar.gdocsSidebarOpenLensButtonClick(e.id),o.EMPTY;case"setGoals":return this._modalManager.show(r.Iy.setGoals("user"));case"performance":return this._modalManager.show(r.Iy.performance);case"switchToCritical":case"switchToAdvanced":case"preferences":case"switchToAll":return o.EMPTY;default:return(0,p.vE)(e)}}))).subscribe())}}},94340:(e,t,i)=>{i.d(t,{W:()=>n});var s=i(52256),r=i(58303),a=i(25770);class n{constructor(e){this._plagiarismVM=e,this.activeSidebarPage=a.h.create("Default"),this.isShouldShowPlagiarismButton=a.h.create(!1)}showGeneralFeed(){return this.activeSidebarPage.view((e=>"Default"===e))}showPlagiarismPage(){return this.activeSidebarPage.view((e=>"Plagiarism"===e))}setActivePage(e){this.activeSidebarPage.set(e)}openPlagiarismPage(){this.setActivePage("Plagiarism"),s.MH(this._plagiarismVM).openPlagiarismPage()}closePlagiarismPage(){this.setActivePage("Default"),s.MH(this._plagiarismVM).closePlagiarismPage()}setPlagiarismVM(e){this._plagiarismVM=r.G(e)}setShowPlagiarismButton(e){this.isShouldShowPlagiarismButton.set(e)}unsafeGetPlagiarismVM(){return s.MH(this._plagiarismVM)}}},66042:(e,t,i)=>{i.d(t,{r:()=>u});var s=i(42241),r=i(79560),a=i(95943),n=i(82823),o=i(65882),l=i(65647),c=i(60165),d=i(58303),h=i(25770);class u{constructor(e,t){this._alertsList=e,this._lensState=t,this._sub=new n.w,this._freeAlerts=h.h.create([]),this.freeAlerts=this._freeAlerts.view((e=>e.length>0?d.G({count:e.length,alerts:()=>function(e){return s.Q.group(e.map((e=>e.toLiteAlert())))}(e)}):d.YP)),this._sub.add(o.aj([this._lensState.view("currentLens").view("id").view((()=>e=>r.bZ.isRegistered(e)&&!r.bZ.isHidden(e)&&!r.bZ.isPremium(e))),this._alertsList.state]).pipe(l.U((([e,t])=>a.p.reduce([],((t,{alert:i})=>(e(i)&&t.push(i),t)))(t))),c.x()).subscribe((e=>{this._freeAlerts.set(e)})))}dispose(){this._sub.unsubscribe()}}},99657:(e,t,i)=>{i.r(t),i.d(t,{createSideBarController:()=>ze});var s,r=i(65882),a=i(36072),n=i(65647),o=i(39620),l=i(17071),c=i(58303),d=i(81123),h=i(43175),u=i(49231),p=i(20715),g=i(78488),m=i(34859),v=i(5663),f=i(5669),_=i(33874),b=i(70932),w=i(496),S=i(64151);!function(e){var t;e.div=(t="div",function({children:e,...i}){const s=u.useRef(null),[r,a]=u.useState(null);return u.useEffect((()=>{s.current&&("function"==typeof s.current.attachShadow?a(s.current.attachShadow({mode:"open"})):a(s.current))}),[s]),u.createElement(t,{ref:s,...i},r?(0,S.createPortal)(u.createElement(C.Provider,{value:r},e),r):null)})}(s||(s={}));const C=u.createContext(null);var A=i(1208),y=i(79299);function I(e,t,i,s){const r=(s-90)*Math.PI/180;return{x:e+i*Math.cos(r),y:t+i*Math.sin(r)}}function E(e,t,i,s,r){const a=I(e,t,i,r),n=I(e,t,i,s),o=r-s<=180?"0":"1";return["M",a.x,a.y,"A",i,i,0,o,0,n.x,n.y].join(" ")}var P=i(29357),M=i(53339),L=i(16205),x=i.n(L);const k=({onClose:e,position:t})=>u.createElement(s.div,{"data-grammarly-part":"sidebar-splash"},u.createElement(A.b,null,x().__css),u.createElement(M._,{className:x().sidebar,position:t},u.createElement("div",{className:x().header},u.createElement("div",{className:x().headerGroup},u.createElement(P.T,{type:"full",className:x().logoIcon})),u.createElement("div",{className:x().headerGroup},u.createElement("div",{className:x().closeButton,onClick:e,role:"button",tabIndex:0},u.createElement("svg",{width:"11",height:"11",viewBox:"0 0 12 13",fill:"none"},u.createElement("path",{d:"M0.5 1L6 6.5M11.5 12L6 6.5M6 6.5L11.5 1M6 6.5L0.5 12",strokeLinecap:"round",strokeWidth:"1.5"}))))),u.createElement("div",{className:x().splashContainer},u.createElement("svg",{viewBox:"0 0 100 100",className:x().splash},u.createElement("circle",{cx:"50",cy:"50",r:"50",stroke:"none",fill:y.Z.green50}))),u.createElement("div",{className:x().spinnerContainer},u.createElement("svg",{width:"64",height:"64",viewBox:"0 0 100 100",fill:"none",className:x().spinner},u.createElement("path",{d:E(50,50,45,0,240),stroke:y.Z.green50,strokeWidth:5})))));var R=i(8748),T=i(55446),U=i(43428),F=i(60841),G=i(64218),B=i(25770),V=i(47781),H=i(79992);class O{constructor(e,t,i,s,n,o,l,c,d,h,u,p,g,m=b.Y.create("GDocsSidebarBaseAssistantController")){this._doc=e,this._telemetry=t,this._gnar=i,this._actions=s,this._isGDocOwner=n,this._alertCounts=o,this._state=l,this._csActions=c,this._experimentClient=d,this._config=h,this._gnarTrackingEnabled=p,this._log=m,this._subscriptions=[],this._sidebarVisible=B.h.create(!1),this._commands=new a.xQ,this._iterableController=new V.k(V.k.shouldCreate(this._config.bundleInfo.browser,this._state.get().dynamicConfig,this._experimentClient),this._state,this._actions.iterableNextFetchSettings,this._csActions,this._experimentClient,this._doc.location.host,void 0,void 0,void 0),this.sidebarVisible=this._sidebarVisible,this.toggle=e=>{this._commands.next({action:w.$.Action.toggle,source:e})},this.show=(e,t)=>{this._commands.next({action:w.$.Action.show,source:e,alertId:t})},this.hide=e=>{this._commands.next({action:w.$.Action.hideAll,source:e})},this.dispose=()=>{let e;this._subscriptions.forEach((e=>e.unsubscribe())),this._subscriptions=[],e=this._hideSidebar().subscribe((t=>{t&&(this._gnarTrackingEnabled&&this._gnar.gdocsSidebarGdocsSidebarClose(this._isGDocOwner,w.$.Source.api,this._alertCounts.expandedViewAlertsCount,this._alertCounts.wordsCount,this._alertCounts.inlineAlertCount,this._alertCounts.nonHiddenClarityAlertCount,this._alertCounts.nonInlineAlertCount),null==e||e.unsubscribe())}))},this._nativeSidebarController=u(this._doc,(()=>{this._commands.next({action:w.$.Action.hideGrammarlyOnly,source:w.$.Source.user})}),t,this._experimentClient,g),this._subscriptions=[this._nativeSidebarController.visibility.pipe((0,T.h)(H.X0)).subscribe((()=>this._commands.next({action:w.$.Action.hideGrammarlyOnly,source:w.$.Source.user}))),(0,r.aj)([this._sidebarVisible,this._nativeSidebarController.visibility]).pipe((0,T.h)((([e,t])=>e&&t))).subscribe((()=>this._nativeSidebarController.focusEditor())),this._commands.pipe((0,U.z)((e=>this._nativeSidebarController.ready.pipe((0,F.w)((t=>this._executeCommand(e))))))).subscribe()]}get position(){return this._nativeSidebarController.position}_executeCommand(e){const t=this._sidebarVisible.get(),i=[w.$.Action.toggle,w.$.Action.hideAll,w.$.Action.hideGrammarlyOnly],s=[w.$.Action.toggle,w.$.Action.show];return i.includes(e.action)&&t?this._hideSidebar(e.action===w.$.Action.hideGrammarlyOnly).pipe((0,g.b)((()=>{this._actions.onHide(),this._gnarTrackingEnabled&&this._gnar.gdocsSidebarGdocsSidebarClose(this._isGDocOwner,e.source,this._alertCounts.expandedViewAlertsCount,this._alertCounts.wordsCount,this._alertCounts.inlineAlertCount,this._alertCounts.nonHiddenClarityAlertCount,this._alertCounts.nonInlineAlertCount)})),(0,G.K)((e=>(this._log.warn("Error injecting gdocs sidebar",e),this._telemetry.sidebarFail(e,"inject"),R.E)))):s.includes(e.action)&&!t?this._showSidebar(e.source===w.$.Source.yellowUnderline).pipe((0,g.b)((()=>{this._actions.onShow(e.alertId),this._gnarTrackingEnabled&&this._gnar.gdocsSidebarGdocsSidebarShow(this._isGDocOwner,e.source,this._alertCounts.expandedViewAlertsCount,this._alertCounts.wordsCount,this._alertCounts.inlineAlertCount,this._alertCounts.nonHiddenClarityAlertCount,this._alertCounts.nonInlineAlertCount)})),(0,G.K)((e=>(this._log.warn("Error restoring gdocs sidebar",e),this._telemetry.sidebarFail(e,"restore"),R.E)))):R.E}}class z extends O{constructor(e,t,i,s,r,a,n,o,l,c,d,h,p=b.Y.create("GDocsCheetahSidebarController")){super(e,t,i,s,r,a,n,o,l,c,d,!1,(e=>f.V.get({monitorAs:"gdocs-sidebar-splash"}).inject(_.EM.fromDocument(document,"grammarly-extension"),_.zs.appendChild(document.documentElement),(()=>u.createElement(k,{onClose:()=>{this.hide(w.$.Source.user),this._nativeSidebarController.hideSplashScreen()},position:e})))),p),this._subscriptions.push(h.subscribe((()=>{this._nativeSidebarController.hideSplashScreen()})))}_showSidebar(e){return this._nativeSidebarController.open().pipe((0,g.b)((e=>{this._nativeSidebarController.showCompanionAboutButton(!1),this._nativeSidebarController.unselectActiveSwitcherButton(),this._nativeSidebarController.showSplashScreen(),this._sidebarVisible.set(!0),this._iterableController.onTrigger(v.xz.GDocsSidebarInitialized)})))}_hideSidebar(e){return(!e?this._nativeSidebarController.close():(0,p.of)(!0)).pipe((0,m.h)(!0),(0,g.b)((()=>{this._nativeSidebarController.showCompanionAboutButton(!0),this._nativeSidebarController.removeSwitcherButtonOverlay(),this._sidebarVisible.set(!1)})))}}var D=i(30152),W=i(81777),N=i(33328),j=i(25989);function Y(e,t){return new D.y((function(i){var s=e.length;if(0!==s)for(var r=new Array(s),a=0,n=0,o=function(o){var l=(0,j.D)(e[o]),c=!1;i.add(l.subscribe({next:function(e){c||(c=!0,n++),r[o]=e},error:function(e){return i.error(e)},complete:function(){++a!==s&&c||(n===s&&i.next(t?t.reduce((function(e,t,i){return e[t]=r[i],e}),{}):r),i.complete())}}))},l=0;l<s;l++)o(l);else i.complete()}))}var Z,$=i(18615),q=i(74514),X=i(34967);class K extends O{constructor(e,t,i,s,r,a,n,o,l,c,d,h,u,p,g,m,v,f,_=b.Y.create("GDocsLegacySidebarController")){super(e,t,i,a,n,o,l,c,u,p,f,!0,void 0,_),this._sidebarIntegrationFactory=s,this._getSidebarComponent=r,this._ethicalAIFeature=d,this._cardEvents=h,this._sduiEngine=g,this._plagiarismCheckingState=m,this._getCheckingService=v,this._injectedSidebar=null,this._sidebarIntegration=null,this._forceSplashOnFirstSidebarInjection=!0}_showSidebar(e){const t=this._sidebarIntegrationFactory.pipe((0,$.P)(),(0,n.U)((e=>e())),(0,g.b)((t=>{this._sidebarIntegration=t;const i=this._getSidebarComponent({integration:t,sidebarReady:this._sidebarVisible.pipe((0,T.h)(H.fQ),(0,m.h)(void 0)),ethicalAIFeature:this._ethicalAIFeature,cardEvents:this._cardEvents,user:this._state.view("user"),experimentClient:this._experimentClient,sduiEngine:this._sduiEngine,_getByRawAlertId:t.engine.getByRawAlertId,startWithExpandedUphook:e,plagiarismCheckingState:this._plagiarismCheckingState,getCheckingService:this._getCheckingService,position:this._nativeSidebarController.position});this._injectedSidebar=this._renderSidebarComponent(i)})));return function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(1===e.length){var i=e[0];if((0,W.k)(i))return Y(i,null);if((0,N.K)(i)&&Object.getPrototypeOf(i)===Object.prototype){var s=Object.keys(i);return Y(s.map((function(e){return i[e]})),s)}}if("function"==typeof e[e.length-1]){var r=e.pop();return Y(e=1===e.length&&(0,W.k)(e[0])?e[0]:e,null).pipe((0,n.U)((function(e){return r.apply(void 0,e)})))}return Y(e,null)}([this._nativeSidebarController.open(),t]).pipe((0,g.b)((e=>{this._nativeSidebarController.showCompanionAboutButton(!1),this._nativeSidebarController.unselectActiveSwitcherButton(),this._sidebarVisible.set(!0),this._iterableController.onTrigger(v.xz.GDocsSidebarInitialized)})))}_hideSidebar(e){return(this._isGrammarlySidebarVisible()&&!e?this._nativeSidebarController.close():(0,p.of)({})).pipe((0,m.h)(this._isGrammarlySidebarVisible()),(0,g.b)((e=>{e&&(this._removeGrammarlySidebar(),this._nativeSidebarController.showCompanionAboutButton(!0),this._nativeSidebarController.removeSwitcherButtonOverlay(),this._sidebarVisible.set(!1))})))}_renderSidebarComponent(e){const t=f.V.get({monitorAs:"gdocs-sidebar"}).inject(_.EM.fromDocument(this._doc,"grammarly-gdocs-sidebar"),_.zs.appendChild(this._doc.documentElement),X.G7.withPlaceholder(u.createElement(q.L,{key:"createGDocsSideBarController",chunkName:"createGDocsSideBarController"},u.createElement(e,null)),u.createElement(k,{onClose:()=>this.hide(w.$.Source.user),position:this._nativeSidebarController.position}),1e3,this._forceSplashOnFirstSidebarInjection));return this._forceSplashOnFirstSidebarInjection=!1,t}_removeGrammarlySidebar(){this._injectedSidebar&&(this._injectedSidebar.dispose(),this._injectedSidebar=null),this._sidebarIntegration&&(this._sidebarIntegration.dispose(),this._sidebarIntegration=null)}_isGrammarlySidebarVisible(){return!!this._injectedSidebar}}!function(e){e.create=function(e,t,i,s,r,a,n,o,l,c,h,u,p,g,m,v,f,_,b){return(0,d.b)(p)?new z(e,t,i,a,n,o,l,c,p,g,_,b):new K(e,t,i,s,r,a,n,o,l,c,h,u,p,g,m,v,f,_)}}(Z||(Z={}));var Q=i(8923),J=i(13839),ee=i(21089),te=i(50866),ie=i(70009),se=i(48555),re=i(68344),ae=i(96679),ne=i(68485),oe=i(70989),le=i(30033);var ce=i(68970),de=i(92147);class he{constructor(e,t,i,s,r,a,o,l,d,h,u,p,g,m,v,f,_,b,w,S,C,A,y,I=new J.t(new se.c(i),a,re.L.create((()=>o.get()),a,(0,de.Cg)(),t,m,A,(0,ce.n_)(),w,C,new ae.M,S).create(ne.P.sidebar),e,b,function(e,t){return e.offsetPosition.pipe((0,oe.M)(t.geometry),(0,n.U)((([e,t])=>null==e?[]:Array.from(t.keys()).filter((i=>{const s=t.get(i);return s&&s.rects&&s.rects.some((t=>le.UL.contains(e,t)))})))))}(s,i)),E=te.p.create(h.get(),u,_,l,d,y),P=(0,ie.r)(E,I,f.settings.lens("context"),(()=>(0,ee.q)(l)),a,(()=>u.value.lastStart),B.h.create(c.YP),c.YP,c.YP,m,w,(e=>e.forEach((e=>l.removeAlert(e,{_tag:Q.i.alertAccepted})))))){this._hoverProvider=r,this.connectionState=p,this.gnar=g,this._felog=m,this.user=v,this.document=f,this.alertsTransformer=_,this.experimentClient=w,this.productMetricsCSClient=S,this.customEventsFilter=y,this.denaliViewAdapter=I,this.capiProxy=E,this.engine=P,r.setAssistantHover(I.highlightHoverProvider)}dispose(){this._hoverProvider.removeAssistantHover(),this.capiProxy.dispose(),this.denaliViewAdapter.dispose(),this.engine.shutdown()}}var ue=i(60022),pe=i(62549),ge=i(34076),me=i(68338);var ve=i(90023),fe=i(73863),_e=i(43456),be=i(60165),we=i(4798),Se=i(65258),Ce=i(58454),Ae=i(34083),ye=i(76193),Ie=i(17917),Ee=i(14765),Pe=i(91795),Me=i(74081);const Le=(e,t)=>(0,Se.Re)(e)?Pe.x.observeAttribute(e,"class").pipe((0,Ee.O)(null),(0,n.U)((i=>!e.classList.contains(t))),(0,T.h)(H.fQ)):R.E,xe=e=>(0,Se.Re)(e)?Me.N.observeSizeChanges([e]).pipe((0,Ee.O)(null),(0,n.U)((t=>"none"!==e.style.display&&"hidden"!==e.style.visibility)),(0,be.x)()):R.E;class ke{constructor(e,t,i,s,r,a=Se.IG,o=Le,l=xe){this._doc=e,this._onClick=t,this._telemetry=i,this._experimentClient=s,this._renderSplashScreen=r,this._resolveElements=a,this._observeClassRemoved=o,this._observeVisibility=l,this._position=B.h.create(Ie.xK.legacy),this.position=this._position.view(),this._activeSwitcherButton=null,this._switcherButtons=[],this._subscriptions=[],this._onRemoveSwitcherButtonOverlay=null,this._switcherButtonClick=e=>{if(null===e.target)return;const t=e.target.closest(Ie.H2.selector);t===this._activeSwitcherButton?this._activeSwitcherButton=null:(this._activeSwitcherButton=t,this._onClick())},this.dispose=()=>{this._subscriptions.forEach((e=>e.unsubscribe())),this._subscriptions=[],this._switcherButtons.forEach((e=>e.removeEventListener("click",this._switcherButtonClick)))};const c=this._resolveElements(this._doc,{sidebar:()=>this._doc.querySelector(Ie.iB),switcherButtons:()=>(0,ve.zG)(Array.from(this._doc.querySelectorAll(Ie.H2.selector)),(e=>0===e.length?null:e))}).pipe((0,fe.q)(1),(0,_e.d)(1));this._ready=c.pipe((0,n.U)((({switcherButtons:e})=>e[0])),(0,F.w)((e=>this._observeClassRemoved(e,Ie.H2.disabledClass))),(0,fe.q)(1),(0,_e.d)(1)),this._visibility=c.pipe((0,be.x)(),(0,F.w)((({sidebar:e})=>this._observeVisibility(e))),(0,_e.d)(1));const d=this._experimentClient.isGateEnabled(we.K.GDocsDetectSidebarTypeDynamically);this._subscriptions=[c.subscribe((({switcherButtons:e})=>{this._switcherButtons=e,this._switcherButtons.forEach((e=>e.addEventListener("click",this._switcherButtonClick)))})),c.subscribe((({sidebar:e})=>{const t=Ie.uT(e),i=d?t:ye.X.legacy;this._telemetry.trackSidebarType({detectedSidebarType:t,displayedSidebarType:i}),this._position.set(Ie._X(i))}))]}get visibility(){return this._visibility}get ready(){return this._ready}_clickOnFirstSwitcherButton(){const e=this._doc.querySelector(Ie.H2.selector);if(!e)throw new Error("There is no button on native sidebar panel");(0,Ae.Nk)(e)}clickActiveSwitcherButton(){this._activeSwitcherButton&&((0,Ae.Nk)(this._activeSwitcherButton),this._activeSwitcherButton=null)}unselectActiveSwitcherButton(){this._activeSwitcherButton=this._doc.querySelector(Ie.H2.selectedSelector),this._activeSwitcherButton&&(0,Se.Re)(this._activeSwitcherButton)&&this._createSwitcherButtonOverlay(this._activeSwitcherButton)}open(){return this._visibility.pipe((0,g.b)((e=>!e&&this._clickOnFirstSwitcherButton())),(0,$.P)(H.fQ))}close(){return this._visibility.pipe((0,g.b)((e=>e&&this.clickActiveSwitcherButton())),(0,$.P)(H.X0))}showCompanionAboutButton(e=!0){const t=this._doc.querySelector(Ie.kl);t&&(0,Se.Re)(t)&&(t.style.display=e?"block":"none")}focusEditor(){const e=(0,Ce.Nd)(this._doc);e&&e.dispatchEvent(new MouseEvent("click"))}removeSwitcherButtonOverlay(){this._onRemoveSwitcherButtonOverlay&&(this._onRemoveSwitcherButtonOverlay(),this._onRemoveSwitcherButtonOverlay=null)}showSplashScreen(){var e;this._splashScreenInjection=null===(e=this._renderSplashScreen)||void 0===e?void 0:e.call(this,this.position)}hideSplashScreen(){var e;null===(e=this._splashScreenInjection)||void 0===e||e.dispose()}_createSwitcherButtonOverlay(e){const t=this._doc.createElement("div"),i=getComputedStyle(e);t.style.width=i.width,t.style.height=i.height,t.style.position=i.position,t.style.zIndex=i.zIndex,t.style.cursor="pointer",t.style.background="transparent",t.style.marginTop=`-${i.height}`;const s=()=>e.classList.add(Ie.H2.hoverClass),r=()=>{e.classList.remove(Ie.H2.hoverClass),e.classList.remove(Ie.H2.activeClass)},a=()=>e.classList.add(Ie.H2.activeClass),n=()=>e.classList.add(Ie.H2.selectedClass),o=()=>{this._onClick(),e.style.pointerEvents="unset"};this._onRemoveSwitcherButtonOverlay=()=>{t.removeEventListener("mouseenter",s),t.removeEventListener("mouseout",r),t.removeEventListener("mousedown",a),t.removeEventListener("mouseup",n),t.removeEventListener("click",o),t.remove()},t.addEventListener("mouseenter",s),t.addEventListener("mouseout",r),t.addEventListener("mousedown",a),t.addEventListener("mouseup",n),t.addEventListener("click",o),e.classList.remove(Ie.H2.selectedClass),e.style.pointerEvents="none",e.insertAdjacentElement("afterend",t)}}var Re;!function(e){e.create=(e,t,i,s,r,a,n,o)=>new ke(e,t,i,s,r,a,n,o)}(Re||(Re={}));var Te=i(57324),Ue=i(895),Fe=i(77089),Ge=i(12518),Be=i(40840),Ve=i(64451),He=i(70874),Oe=i(49650);function ze(e){const{docId:t,docOwnedByCurrentUser:i}=e.initArgs,{_ctx:s,_unloadables:u,_observableState:p,_plagiarismClient:m,_plagiarismCheckingState:v,_subs:f,fieldContext:_,sidebarOpened:b,expandedViewAlertsAtom:S,inlineAlertAtom:C,nonInlineAlertAtom:A,nonHiddenClarityAlertAtom:y,wordsCount:I,ethicalAIFeature:E,cardEventService:P,sduiEngine:M,lazyCheckingService:L,cheetahAssistantDidOpen:x,delayService:k,cheetahAssistantDidClose:R,hoverProviderSubject:U,alertProcessorSubject:G,textRevisionManagerSubject:B,highlightsGeometrySubject:V,layout:H,integrationName:O,cursorTracker:z,textObserver:D,lazyReplacementService:W,checkingServiceState:N,documentSettingsStorage:Y,canvasTelemetry:$,textEventsTarget:q,sessionStatsManager:X}=e,K=(0,r.aj)([U,B,G,V]).pipe((0,n.U)((([e,t,i,r])=>()=>new he(H,O,r,z,e,D,W,i,t,L,N,p.view("connection"),_.gnar,_.felog,{isPremium:_.state.user.premium,isAnonymous:_.state.user.anonymous,isGrammarlyEmployee:pe.n.isGrammarlyEmployee(_.state.user),isTestUser:pe.n.isTestUser(_.state.user),isFreeTrial:pe.n.isFreeTrial(_.state.user)},Y.document,ue.F4,function({layout:e,textObserver:t,userInputShutOff:i,timeoutMs:s,telemetry:r}){const a=(0,Oe.z)(t,e.textField,i,s);return{scrollToMark(t,i){const s=Ve.Fd.getMarkRect(t);if(Ge.isRight(s))return(0,j.D)([0]).pipe((0,g.b)((t=>{const i=e.textField.visibleRect.getApproximate();a.scrollToRect(s.right,i.client.top)})));const n=(0,Be.mp)(t.range);return a.scrollToRange(n.start).pipe((0,F.w)((i=>He.S.hz30.pipe((0,fe.q)(9),(0,T.h)((i=>{const s=Ve.Fd.getMarkRect(t);if(Ge.isRight(s)){const t=e.textField.visibleRect.getApproximate();return a.scrollToRect(s.right,t.client.top),!0}return!1})),(0,g.b)({complete:()=>{r.error("scroller","Mark has not been found after retries.")}}),(0,fe.q)(1)))))},dispose(){a.dispose()}}}({layout:H,textObserver:D,telemetry:$,userInputShutOff:(0,Ue.I)(q)}),s.experimentClient,_.productMetricsCSClient,_.state.dynamicConfig,X,(0,l.ff)(h.r4)))));K.pipe(n.U((e=>e())),n.U((e=>c.G({enablePlagiarismSearch:e.capiProxy.enablePlagiarismSearch,disablePlagiarismSearch:e.capiProxy.disablePlagiarismSearch})))).subscribe(o.wW(m));const Q=new a.xQ,J=Z.create(s.doc,_.felog.gdocs,_.gnar,K,(0,Te.U9)(Q),{onShow:e=>{_.actions.gdocsSaveDocumentSetting({docIdHash:(0,ge.Of)(t),documentState:{sidebarVisible:!0}}),b.next({kind:"opened",alertId:e})},onHide:()=>{_.actions.gdocsSaveDocumentSetting({docIdHash:(0,ge.Of)(t),documentState:{sidebarVisible:!1}}),b.next({kind:"closed"})},iterableNextFetchSettings:e=>{_.actions.iterableNextFetchSettings(e)}},i,{expandedViewAlertsCount:S.get(),inlineAlertCount:C&&C.get(),nonInlineAlertCount:A&&A.get(),nonHiddenClarityAlertCount:y&&y.get(),wordsCount:I},p,_.actions,E,P,s.experimentClient,s.config,M,v,(()=>L.get()),Re.create,x);return u.push(function(e,t){const i=e.pipe((0,T.h)((e=>e.kind===me.R.Close))).subscribe((()=>t.hide(w.$.Source.user)));return{dispose(){i.unsubscribe()}}}(Q,J)),f.push(J.sidebarVisible.subscribe((e=>{e?(k.showDelayMs.next(0),k.hideDelayMs.next(0)):(k.showDelayMs.reset(),k.hideDelayMs.reset())}))),(0,d.b)(s.experimentClient)&&f.push((0,Fe.G_)(R).subscribe((()=>{J.hide(w.$.Source.user)}))),J}},84602:(e,t,i)=>{function s(e){return"score"in e}function r(e){if(!s(e))throw new Error("Received unexpected feedback form data without score")}function a(e){if(s(e))throw new Error("Received unexpected feedback form data with score")}i.d(t,{TY:()=>a,dK:()=>s,n8:()=>r})},55869:(e,t,i)=>{var s=i(42663),r=i(2963)(s);r.push([e.id,"._UUx2a-sidebar{-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;overflow:hidden;position:relative;}._UUx2a-sidebar ._rjT4p-header{position:absolute;top:0;right:0;width:100%;display:-ms-flexbox;display:flex;-ms-flex-direction:row;flex-direction:row;-ms-flex-pack:justify;justify-content:space-between;-ms-flex-align:center;align-items:center;margin-top:.25rem;height:32px;}._UUx2a-sidebar ._rjT4p-header ._FnbRU-headerGroup{display:-ms-flexbox;display:flex;-ms-flex-direction:row;flex-direction:row;-ms-flex-align:center;align-items:center;}._UUx2a-sidebar ._rjT4p-header ._FnbRU-headerGroup ._tAUEh-logoIcon{margin:0 .25rem 0 .8rem}._UUx2a-sidebar ._rjT4p-header ._FnbRU-headerGroup ._A2vNJ-closeButton{margin-right:3.5px;width:25px;height:25px;display:-ms-flexbox;display:flex;-ms-flex-pack:center;justify-content:center;-ms-flex-align:center;align-items:center;border-radius:4px;stroke:#6d758d;}._UUx2a-sidebar ._rjT4p-header ._FnbRU-headerGroup ._A2vNJ-closeButton:hover{background-color:#f0f2fc;cursor:pointer;stroke:#4a6ee0}._UUx2a-sidebar ._iAhBE-splashContainer{position:absolute;right:0;top:0;transform:translate(0,calc(50vh - 50%));}._UUx2a-sidebar ._iAhBE-splashContainer ._UCK9k-splash{width:100%;height:100%;animation:_mIR7B-splash-opacity 1s cubic-bezier(.08,.8,.67,1) 400ms 1 normal both,_WG_5I-splash-scale 1s cubic-bezier(.05,.69,.67,1) 400ms 1 normal both}._UUx2a-sidebar ._LQT5h-spinnerContainer{position:absolute;transform:translate(0,calc(50vh - 50%));animation:_WdqUz-spinner-scale 330ms cubic-bezier(.05,.62,.51,1.26) 333ms 1 normal backwards;}._UUx2a-sidebar ._LQT5h-spinnerContainer ._BC8p8-spinner{animation:_BC8p8-spinner 1.2s infinite linear}@keyframes _BC8p8-spinner{from{transform:rotate(0)}to{transform:rotate(360deg)}}@keyframes _mIR7B-splash-opacity{0%{opacity:1}100%{opacity:0}}@keyframes _WG_5I-splash-scale{0%{transform:scale(0)}100%{transform:scale(2)}}@keyframes _WdqUz-spinner-scale{0%{transform:translate(0,calc(50vh - 50%)) scale(0)}100%{transform:translate(0,calc(50vh - 50%)) scale(1)}}",""]),r.locals={sidebar:"_UUx2a-sidebar",header:"_rjT4p-header",headerGroup:"_FnbRU-headerGroup",logoIcon:"_tAUEh-logoIcon",closeButton:"_A2vNJ-closeButton",splashContainer:"_iAhBE-splashContainer",splash:"_UCK9k-splash","splash-opacity":"_mIR7B-splash-opacity","splash-scale":"_WG_5I-splash-scale",spinnerContainer:"_LQT5h-spinnerContainer","spinner-scale":"_WdqUz-spinner-scale",spinner:"_BC8p8-spinner"},e.exports=r},51980:e=>{e.exports={insight:"vaGfd",insight__inline_icon:"M5fov",insight__inline_text:"NodQp"}},36555:e=>{e.exports={predictions:"zAvBV",predictions__header:"p82xz",predictions__card:"ZuLGb",counterContainer:"KwKbD",predictions__zero_text:"IVxiZ",predictions__off_brand:"HrjP2"}},1127:e=>{e.exports={headerOrFooterWrapper:"Y2H0f"}},43420:e=>{e.exports={cardList:"gV0cS"}},95627:e=>{e.exports={premiumLens:"TFbap"}},542:e=>{e.exports={successLens:"_NLHO"}},5706:e=>{e.exports={footer:"nFy3z",plagiarismButton:"o_JYq",counterWrapper:"mOddw",counter:"csO1n",counterCheckmarkIcon:"cBKjm"}},41927:e=>{e.exports={defaultHeader:"DTiYT",defaultHeaderWithLenses:"YBSd6",priorityLensHeader:"sHAVn",head:"TGEx5",headerGroup:"oSvN_",logoIcon:"_4cQZf",headerButton:"PpuRF",setGoalsButton:"UuSZX",divider:"NPZsq",lensNavigation:"dBaZB",disabledLensNavigation:"hr85r",prioritySwitchWrapper:"iqdfL",prioritySwitchFlatWrapper:"LUmRC"}},63376:e=>{e.exports={wrapper:"QzCRj"}},22873:e=>{e.exports={container:"qfD5D",baseGrid:"iPCw8",bottomLeft:"PuuHv",bottomRight:"r_Ycp",top:"qu1VK",notificationWrapper:"cSTPv"}},44094:e=>{e.exports={sidebarContainer:"OUOwE",sidebarContent:"etRrJ"}},16587:(e,t,i)=>{i.d(t,{k:()=>o});var s=i(49231),r=i(45482),a=i(87830),n=i(80013);const o=s.forwardRef((function(e,t){const{utility:i,other:r}=(0,a.a)(e),{accessibilityLabel:o,align:c,as:d,children:h,className:u,direction:p="row",elevation:g,flex:m,gap:v=0,justify:f,wrap:_=!1,style:b={},...w}=r,S=function({direction:e,wrap:t,elevation:i,className:s}){return(0,n.W)("gds-flex","column"===e&&"gds-flex-direction-column",t&&"gds-flex-wrap",i&&`gds-flex-elevation-${i}`,s)}({direction:p,wrap:_,elevation:g,className:u}),C=(0,a.f)(i),A={...l(v),alignItems:c,justifyContent:f,flex:m,...C,...b},y=null!=d?d:"div";return s.createElement(y,{"aria-label":o,ref:t,className:S,style:A,...w},h)}));function l(e){if(null==e)return{};if("number"==typeof e)return{gap:`var(--space-${(0,r.Jy)(e)})`};return{gap:`${null==e.row?"normal":`var(--space-${(0,r.Jy)(e.row)})`} ${null==e.column?"normal":`var(--space-${(0,r.Jy)(e.column)})`}`}}},25619:(e,t,i)=>{i.d(t,{u:()=>a});var s=i(49231),r=i(80013);const a=s.forwardRef((function(e,t){const{className:i,as:a="span",...n}=e;return s.createElement(a,{ref:t,className:(0,r.W)("gds-sr-only",i),...n})}))},33969:(e,t,i)=>{i.d(t,{x:()=>n});var s=i(49231),r=i(80013),a=i(45482);const n=s.forwardRef((function(e,t){const{as:i,className:n,variant:o="text-medium",color:c,align:d,weight:h,italic:u,decoration:p,margin:g,marginLeft:m,marginRight:v,marginTop:f,marginBottom:_,style:b,maxLines:w,...S}=e,C={...b,...null!=c&&{color:`var(--color-text-${c})`},...null!=d&&{textAlign:d},...l(h),...null!=u&&{fontStyle:u?"italic":"normal"},...null!=p&&{textDecoration:p},...(0,a.AA)({margin:g,marginLeft:m,marginRight:v,marginTop:f,marginBottom:_}),...w&&{WebkitLineClamp:w}};return s.createElement(i,{ref:t,className:(0,r.W)("gds-typography","gds-"+(o.startsWith("heading")?"heading":"text"),`gds-${o}`,w&&"gds-multiline-ellipsis",n),style:C,...S})})),o={bold:"bold",semibold:600,medium:500,normal:"normal"};function l(e){return null!=e&&o[e]?{fontWeight:o[e]}:null}},13087:(e,t,i)=>{function s(e){if(void 0!==e)return"light-green"===e?"var(--light-green)":"yellow-green"===e?"var(--yellow-green)":/-\d\d?\d?$/.test(e)||"white"===e?`var(--${e})`:`var(--color-${e})`}i.d(t,{y:()=>s})},45482:(e,t,i)=>{function s(e){return.5===e?"half":.25===e?"quarter":`${e}`}function r({margin:e,marginLeft:t,marginRight:i,marginTop:s,marginBottom:r}){const a=o(e);return{marginLeft:n(t,a.left),marginRight:n(i,a.right),marginTop:n(s,a.top),marginBottom:n(r,a.bottom)}}function a({padding:e,paddingLeft:t,paddingRight:i,paddingTop:s,paddingBottom:r}){const a=o(e);return{paddingLeft:n(t,a.left),paddingRight:n(i,a.right),paddingTop:n(s,a.top),paddingBottom:n(r,a.bottom)}}function n(e,t){const i=void 0!==e?e:t;if(void 0!==i){if("string"==typeof i)return i;if(i<0){return`calc(var(--space-${s(-1*i)}) * -1)`}return`var(--space-${s(i)})`}}function o(e){if("string"!=typeof e)return{top:e,right:e,bottom:e,left:e};const t=e.split(" "),i=t[0],s=t[1]||i;return{top:i,right:s,bottom:t[2]||i,left:t[3]||s}}i.d(t,{AA:()=>r,Jy:()=>s,VI:()=>a})},87830:(e,t,i)=>{i.d(t,{a:()=>a,f:()=>n});var s=i(13087),r=i(45482);function a(e){const{bgColor:t,borderColor:i,borderRadius:s,color:r,margin:a,marginLeft:n,marginRight:o,marginTop:l,marginBottom:c,padding:d,paddingLeft:h,paddingRight:u,paddingTop:p,paddingBottom:g,width:m,height:v,...f}=e;return{utility:{bgColor:t,borderColor:i,borderRadius:s,color:r,margin:a,marginLeft:n,marginRight:o,marginTop:l,marginBottom:c,padding:d,paddingLeft:h,paddingRight:u,paddingTop:p,paddingBottom:g,width:m,height:v},other:f}}function n(e){const{bgColor:t,borderColor:i,borderRadius:a,color:n,margin:o,marginLeft:l,marginRight:c,marginTop:d,marginBottom:h,padding:u,paddingLeft:p,paddingRight:g,paddingTop:m,paddingBottom:v,width:f,height:_}=e;return{backgroundColor:(0,s.y)(t),border:void 0!==i?`1px solid var(--color-border-${i})`:void 0,borderRadius:void 0!==a?`var(--radius-${(0,r.Jy)(a)})`:void 0,color:void 0!==n?`var(--color-text-${n})`:void 0,width:"number"==typeof f?`${f}px`:f,height:"number"==typeof _?`${_}px`:_,...(0,r.AA)({margin:o,marginLeft:l,marginRight:c,marginTop:d,marginBottom:h}),...(0,r.VI)({padding:u,paddingLeft:p,paddingRight:g,paddingTop:m,paddingBottom:v})}}}}]);