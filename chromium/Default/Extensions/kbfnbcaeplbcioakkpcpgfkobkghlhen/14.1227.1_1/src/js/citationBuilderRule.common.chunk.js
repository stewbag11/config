(self.webpackChunk=self.webpackChunk||[]).push([[9447],{95976:(e,t,i)=>{i.r(t),i.d(t,{CitationBuilder:()=>T});var a,n=i(90023),r=i(31382),o=i(82823),s=i(58303),l=i(52256),d=i(25770),u=i(12518),c=i(70932),m=i(19042);!function(e){let t;e.create=function(e,t,i,a,o,l){return(0,n.zG)(e.parse(),u.bimap((e=>{l.citationBuilder.warning("dataParsing",e.message,(0,r.ex)(o),e),c.Y.create("CitationBuilder.Model").error(e.message,e.data)}),(s=>{const p=d.h.create(s),g=d.h.create(t.view("onboardingVersionSeen").view((e=>void 0!==e&&e>=m.qv.VERSION)).get());return{domain:i,citation:p,detectedSourceType:e.sourceType,setOnboardingSeen:()=>(g.set(!0),a.setCitationBuilderOnboardingSeen(m.qv.VERSION)),onboardingSeen:g,updateCitation:e=>p.set(e),disableCitationBuilder:()=>{const e=document.location.pathname;a.toggleCitationBuilderForDomain({domain:i,enabled:!1,pathName:e,inAllowList:(0,r.eC)(document.location,o)})},reparseCitation:()=>(0,n.zG)(e.parse(),u.fold((e=>{l.citationBuilder.warning("dataReparsing",e.message,(0,r.ex)(o),e),c.Y.create("CitationBuilder.Model").error(e.message,e.data)}),(e=>p.set(e)))),shouldReparseOnWindowOpen:e.shouldReparseOnWindowOpen}})),s.Uo)},function(e){e.empty={editing:!1,manualInvocation:!0,params:{}}}(t=e.Features||(e.Features={}))}(a||(a={}));var p=i(38138),g=i(4603),h=i(4798),b=i(68970),y=i(25624);class S{constructor(e,t,i,a,r){this._context=e,this._state=t,this._actions=i,this._telemetry=a,this._gnar=r,this._disposed=d.h.create(!1),this.disposed=this._disposed,this._subscriptions=new o.w,this._disposables=[];const u=(0,n.zG)(s.ij(new URL(this._context.url).searchParams.get("citationBuilderParams")),s.tS((e=>s.Y3((()=>JSON.parse(e))))),s.tS((e=>s.Uo(p.ZQ.decode(e)))),l.bw((e=>c.Y.create("CitationBuilder").trace("params",e))),s.fS((()=>({}))));var m,g;u.reset&&(c.Y.create("CitationBuilder").trace("Reset Citation Builder"),this._actions._resetCitationBuilderSettings()),this._builderCSState=d.h.create(this._state.page.citationBuilder||y.KC.empty),this._features=(m=this._context.experimentClient,g=u,{editing:m.isGateEnabled(h.K.CitationBuilderEditing),manualInvocation:m.isGateEnabled(h.K.CitationBuilderManualInvocation),params:g})}init(){return!(0,b.n_)()&&(0,r.Td)(this._state.page.domain,this._state.dynamicConfig,this._features.manualInvocation,this._state.page)?Promise.all([i.e(2467),i.e(6523),i.e(8368),i.e(9536),i.e(8455),i.e(8818),i.e(3896)]).then(i.bind(i,26492)).then((({ParsingModel:e})=>{const t=e.create(this._context.url,this._context.doc,this._state,this._features,this._telemetry);return this._model=a.create(t,this._builderCSState,this._state.page.domain,this._actions,this._state.dynamicConfig,this._telemetry),this._model})).then(s.g_((()=>this.dispose()),(e=>{Promise.all([i.e(2467),i.e(6523),i.e(8368),i.e(9536),i.e(8455),i.e(8818),i.e(3896)]).then(i.bind(i,13925)).then((({GenerationModel:t})=>{const i=t.create({builderCSState:this._builderCSState,actions:this._actions,dynamicConfig:this._state.dynamicConfig,citation:e.citation,detectedSourceType:e.detectedSourceType,telemetry:this._telemetry,generatorFactory:t.standardGeneratorFactory});return this._inject(e,i,this._state.dynamicConfig,this._telemetry,(0,r.XG)(this._gnar))})).catch((e=>{this._telemetry.citationBuilder.error("unexpectedInjected","Unexpected error while injecting",(0,r.ex)(this._state.dynamicConfig),e)}))}))):Promise.resolve()}_inject(e,t,a,n,o){return Promise.all([Promise.all([i.e(2467),i.e(6523),i.e(8368),i.e(9536),i.e(8455),i.e(8818),i.e(3896)]).then(i.bind(i,44918)),Promise.all([i.e(2467),i.e(6523),i.e(8368),i.e(9536),i.e(8455),i.e(8818),i.e(3896)]).then(i.bind(i,94270)),Promise.all([i.e(2467),i.e(6523),i.e(8368),i.e(9536),i.e(8455),i.e(8818),i.e(3896)]).then(i.bind(i,16467))]).then((([{createCitationBuilderViewModel:i},{CitationBuilderIntegrationLayout:s},{CitationBuilderView:l}])=>{this._viewModel=i({csState:this._state,model:e,generationModel:t,gnar:o,features:this._features}),this._disposables.push(this._viewModel),this._layout=new s,this._disposables.push(this._layout.render(l,this._viewModel,(0,g.OB)(),this._context.experimentClient)),n.citationBuilder.info("init","Citation builder initiated",(0,r.ex)(a))}))}update(e){e.page.citationBuilder&&this._builderCSState.set(e.page.citationBuilder),(0,r.Td)(e.page.domain,e.dynamicConfig,this._features.manualInvocation,e.page)||this.dispose()}dispose(){this._disposables.forEach((e=>e.dispose())),this._disposed.set(!0),this._subscriptions.unsubscribe()}}var _=i(37094),C=i(99836);const v=(e,t,i,a)=>{const n=(0,C.Tb)();try{const r=new S(e,t,i,n,a);return r.init(),r}catch(e){return void n.citationBuilder.error("unexpected","Unexpected error",(0,r.ex)(t.dynamicConfig),e)}};var T;!function(e){e.getGeneralPurposeRules=function(e){const{sources:t,explicitlyEnabledDomainsWithRegexStrings:i}=(0,r.sO)(e);return[...t.map((0,n.ls)((e=>({name:e.name,domain:new RegExp(e.domain),pathname:new RegExp(e.pathname),andCanExecute:e=>e.experimentClient.isGateEnabled(h.K.CitationBuilder)})),(e=>(0,_.AY)(e,[v],`citationBuilder-${e.name}-${e.domain.toString()}-${e.pathname.toString()}`)))),...i.map((([e,t])=>(0,n.zG)({name:e,domain:new RegExp(t),pathname:/.*/,andCanExecute:e=>e.experimentClient.isGateEnabled(h.K.CitationBuilder)&&e.experimentClient.isGateEnabled(h.K.CitationBuilderManualInvocation)},(e=>(0,_.AY)(e,[v])))))]}}(T||(T={}))},38138:(e,t,i)=>{i.d(t,{Op:()=>l,Tk:()=>s,ZQ:()=>o});var a=i(11633),n=i(97410),r=i(25624);const o=a.r$({reset:a.O7,mockDate:a.Z_});var s;!function(e){e.Style=r.KC.Style,e.AuthorT=a.jV([a.dt({lastName:a.Z_,firstName:a.Z_}),a.r$({middleName:a.Z_,suffix:a.Z_})]),e.EditingInputFieldTypes={authors:"authors",title:"string",periodicalTitle:"string",publishingDate:"date",publishingYear:"number",volume:"string",issue:"string",doi:"string",pagesRange:"pages",url:"string",websiteName:"string",accessedDate:"date",publisher:"string",translators:"authors",publicationCity:"string",edition:"number",editors:"authors",university:"string",dissertationType:"string",database:"string",publicationNumber:"string",lectureType:"string",conferenceTitle:"string",organization:"string",venue:"string",city:"string",location:"string",directors:"authors",studio:"string",actors:"authors",movieLength:"timestamp",username:"string",timestamp:"timestamp",bibleVersion:"string",bibleBook:"string",bibleChapter:"number",bibleVerses:"pages",creators:"authors",artists:"authors",imageDescription:"string",imageSource:"string",imageType:"string",company:"string",productName:"string",modelVersion:"string",modelType:"string",promptText:"string",promptDescription:"string",inTextPagesCited:"pages",inTextTimeStamp:"timestamp"},e.parsedToEditingInput=e=>{var t;return{authors:e[n.S.authors],publishingDate:e[n.S.published],publishingYear:null===(t=e[n.S.published])||void 0===t?void 0:t.year,title:e[n.S.title],periodicalTitle:e[n.S.periodicalTitle],volume:e[n.S.volume],issue:e[n.S.issue],pagesRange:void 0!==e[n.S.firstPage]?[{startPage:e[n.S.firstPage],endPage:e[n.S.lastPage]}]:void 0,doi:e[n.S.doi],url:e[n.S.url],accessedDate:e[n.S.retrievalDate],websiteName:e[n.S.websiteName],publisher:e[n.S.publisher],edition:e[n.S.edition],publicationCity:e[n.S.publicationCity],translators:e[n.S.translators],editors:e[n.S.editors],artists:e[n.S.authors],imageDescription:e[n.S.imageDescription],imageSource:e[n.S.imageSource],imageType:e[n.S.imageType],username:e[n.S.username],directors:e[n.S.directors],studio:e[n.S.studio],actors:e[n.S.actors],movieLength:e[n.S.movieLength],company:e[n.S.company],productName:e[n.S.productName],promptText:e[n.S.promptText],promptDescription:e[n.S.promptDescription],modelVersion:e[n.S.modelVersion],modelType:e[n.S.modelType]}}}(s||(s={}));class l extends Error{constructor(e,t){super(e),this.name="CitationBuilderError",t&&(this.data={...t})}}},97410:(e,t,i)=>{i.d(t,{S:()=>n,_:()=>a});var a,n,r=i(11633);!function(e){let t,i;!function(e){e.wikipedia="wikipedia",e.journalArticle="journalArticle",e.magazineArticle="magazineArticle",e.website="website",e.book="book",e.movie="movie",e.onlineVideo="onlineVideo",e.image="image",e.generativeAi="generativeAi"}(t=e.Kind||(e.Kind={})),e.defaultKind=t.journalArticle,e.defaultLocale="en-US",e.KindC=r.G0([r.i0(t.wikipedia),r.i0(t.journalArticle),r.i0(t.magazineArticle),r.i0(t.website),r.i0(t.book),r.i0(t.movie),r.i0(t.onlineVideo),r.i0(t.image),r.i0(t.generativeAi)]),function(e){let t,i;!function(e){e.const="const",e.currDate="currDate",e.query="query",e.queryAll="queryAll",e.queryLast="queryLast",e.url="url",e.function="function",e.regex="regex"}(t=e.Kind||(e.Kind={})),function(e){e.or="or",e.struct="struct"}(i=e.CombinatorKind||(e.CombinatorKind={}))}(i=e.Strategy||(e.Strategy={}))}(a||(a={})),function(e){e.authors="authors",e.published="published",e.retrievalDate="retrievalDate",e.title="title",e.periodicalTitle="periodicalTitle",e.volume="volume",e.issue="issue",e.firstPage="firstPage",e.lastPage="lastPage",e.url="url",e.doi="doi",e.websiteName="websiteName",e.publisher="publisher",e.edition="edition",e.publicationCity="publicationCity",e.translators="translators",e.editors="editors",e.imageDescription="imageDescription",e.imageSource="imageSource",e.imageType="imageType",e.timestamp="timestamp",e.username="username",e.directors="directors",e.studio="studio",e.actors="actors",e.movieLength="movieLength",e.company="company",e.productName="productName",e.modelVersion="modelVersion",e.modelType="modelType",e.promptText="promptText",e.promptDescription="promptDescription"}(n||(n={}))},19042:(e,t,i)=>{i.d(t,{bL:()=>l,dw:()=>d,l_:()=>s,qv:()=>r,s5:()=>u,tu:()=>o});var a=i(49231),n=i(97410);const r={title:"Generate citations",subTitle:a.createElement(a.Fragment,null,"You can now automatically generate a citation for the resource you're viewing."),button:"Got it",VERSION:2},o={title:"How do you like this auto-citations tool?",notification:"Thank you for your feedback!"},s={title:e=>a.createElement(a.Fragment,null,"Hide ",a.createElement("b",null,"Get citation")," button for ",e,"?"),forNow:"Yes, for now",always:"Yes, always"},l={noAutoCitation:"No auto-citation available for this page.",copy:"Copy",copyInText:"Copy in-text citation",edit:"Edit citation",review:"Review",changeSourceType:{question:"Not an article?",action:"Change source type"},citationViewMissingFieldsLabel:e=>`${e} missing field${e%10==1?"":"s"}`},d={accessedDate:"Date Accessed",actors:"Actor",artists:"Artist",authors:"Author",bibleBook:"Book",bibleChapter:"Chapter",bibleVerses:"Verse(s)",bibleVersion:"Version",city:"City",conferenceTitle:"Conference Title",creators:"Creators",database:"Database",directors:"Director",dissertationType:"Dissertation Type",doi:"DOI",edition:"Edition",editors:"Editors",imageDescription:"Description",imageSource:"Source",imageType:"Type",inTextPagesCited:"In-text Page(s)",inTextTimeStamp:"In-text Timestamp",issue:"Issue",lectureType:"Lecture Type",location:"Location",movieLength:"Length",pagesRange:"Page(s)",periodicalTitle:"Periodical Title",publicationCity:"Publication City",publicationNumber:"Publication Number",publisher:"Publisher",publishingDate:"Publishing Date",publishingYear:"Year",organization:"Organization",studio:"Studio",timestamp:"Timestamp",title:"Title",translators:"Translators",websiteName:"Website Name",university:"University",url:"URL",username:"Username",venue:"Venue",volume:"Volume",company:"Company",productName:"Product Name",modelVersion:"Model Version",modelType:"Model Type",promptText:"Prompt Text",promptDescription:"Prompt Description"},u={[n._.Kind.wikipedia]:"Wikipedia",[n._.Kind.magazineArticle]:"Magazine",[n._.Kind.book]:"Book",[n._.Kind.image]:"Image",[n._.Kind.journalArticle]:"Journal",[n._.Kind.movie]:"Movie",[n._.Kind.onlineVideo]:"Video",[n._.Kind.website]:"Website",[n._.Kind.generativeAi]:"GenAI"}}}]);